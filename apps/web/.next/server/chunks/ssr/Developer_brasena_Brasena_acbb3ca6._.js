module.exports=[23547,(a,b,c)=>{"use strict";b.exports=a.r(23481).vendored["react-ssr"].ReactDOM},69041,(a,b,c)=>{"use strict";b.exports=a.r(23481).vendored["react-ssr"].ReactServerDOMTurbopackClient},61506,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(97176);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},62430,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},54460,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getDeploymentId:function(){return f},getDeploymentIdQueryOrEmptyString:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(){return!1}function g(){return""}},43249,a=>{"use strict";var b=a.i(97176),c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(a,d)=>{let e=(0,b.forwardRef)(({color:e="currentColor",size:f=24,strokeWidth:g=2,absoluteStrokeWidth:h,className:i="",children:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...c,width:f,height:f,stroke:e,strokeWidth:h?24*Number(g)/Number(f):g,className:["lucide",`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,i].join(" "),...k},[...d.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(j)?j:[j]]));return e.displayName=`${a}`,e};a.s(["default",()=>d],43249)},11334,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(67692),g=a.r(48140),h=a.r(73526),i=f._(a.r(58391));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},38375,(a,b,c)=>{b.exports=a.r(11334)},68070,a=>{"use strict";var b=a.i(53077),c=a.i(38375),d=a.i(39681);let e={sm:{width:88,height:40,className:"h-8 w-[88px] object-contain"},md:{width:140,height:62,className:"h-auto w-[140px] object-contain"}};function f({size:a="sm",className:f}){let{width:g,height:h,className:i}=e[a];return(0,b.jsx)(c.default,{src:"/logo.png",alt:"Brasena",width:g,height:h,className:(0,d.cn)(i,f)})}a.s(["BrasenaLogo",()=>f])},56730,a=>{"use strict";var b=a.i(53077),c=a.i(97176),d=a.i(1880),e=a.i(13858),f=a.i(57301),g=a.i(99335),h=a.i(72943),i=a.i(74731),j=a.i(77241),k=a.i(59356),l=a.i(42205),m=a.i(97855),n=a.i(68070),o=a.i(6354),p=a.i(13820),q=a.i(39681);let r={name:"",email:"",phone:"",password:"",profileType:"business",preferredLanguage:"en",businessName:"",ein:"",birthday:"",deliveryAddress:{street:"",apt:"",city:"",state:"",zip:""},agreeToTerms:!1};function s(){let a=(0,e.useRouter)(),{t:s}=(0,k.useLanguage)(),t=(0,l.useSupabase)(),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),{register:y,handleSubmit:z,watch:A,setValue:B,formState:{errors:C,isSubmitting:D}}=(0,f.useForm)({resolver:(0,g.zodResolver)(m.signupWithAddressSchema),defaultValues:r}),E=A("preferredLanguage");async function F(b){if(x(null),"business"!==b.profileType||!b.businessName||!b.ein)return void x("Business name and EIN are required.");try{let{data:c,error:d}=await t.auth.signUp({email:b.email,password:b.password,options:{data:{name:b.name,phone:b.phone,profile_type:"business",preferred_language:b.preferredLanguage}}});if(d)return void x(d.message);let e=c.user?.id;if(!e)return void x("Account created but session not found. Please sign in.");let f=new Date().toISOString(),g={id:e,email:b.email,full_name:b.name,phone:b.phone,role:"customer",profile_type:"business",preferred_language:b.preferredLanguage,created_at:f,updated_at:f},{error:h}=await t.from("profiles").insert(g);if(h)return void x(h.message);let i={user_id:e,business_name:b.businessName,ein:b.ein,verified:!1},{error:k}=await t.from("business_profiles").insert(i);if(k)return void x(k.message);let l={user_id:e,street:b.deliveryAddress.street,apt:b.deliveryAddress.apt||null,city:b.deliveryAddress.city,state:b.deliveryAddress.state,zip:b.deliveryAddress.zip,instructions:b.deliveryAddress.instructions??null,is_default:!0},{error:m}=await t.from("addresses").insert(l);if(m)return void x(m.message);a.push(j.ROUTES.SHOP)}catch(a){x(a instanceof Error?a.message:"Something went wrong")}}return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"mb-6 flex justify-center",children:(0,b.jsx)(n.BrasenaLogo,{size:"sm"})}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)(d.default,{href:j.ROUTES.SIGNUP,className:"text-text-secondary hover:text-brand-sage text-sm font-medium min-h-touch flex items-center",children:"← Back"}),(0,b.jsx)(d.default,{href:j.ROUTES.LOGIN,className:"text-text-secondary hover:text-brand-sage text-sm font-medium min-h-touch flex items-center",children:"Sign in"})]}),(0,b.jsx)("p",{className:"text-brand-sage text-sm font-medium mb-6",children:s("signup.step2")}),(0,b.jsx)("h1",{className:"font-display text-2xl font-semibold text-text-primary mb-1",children:"Tell us about your business"}),(0,b.jsx)("p",{className:"text-text-secondary text-base mb-6",children:"We'll use this for delivery and account security."}),(0,b.jsxs)("form",{onSubmit:z(F),className:"flex flex-col gap-4",children:[(0,b.jsx)(o.FormField,{label:"Full name",required:!0,error:C.name?.message,...y("name")}),(0,b.jsx)(o.FormField,{label:"Business name",required:!0,error:C.businessName?.message,...y("businessName")}),(0,b.jsx)(o.FormField,{label:"Business EIN / Tax ID",required:!0,error:C.ein?.message,...y("ein")}),(0,b.jsx)(o.FormField,{label:"Email address",type:"email",autoComplete:"email",required:!0,error:C.email?.message,...y("email")}),(0,b.jsx)(o.FormField,{label:"Phone number",type:"tel",autoComplete:"tel",required:!0,error:C.phone?.message,...y("phone")}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-text-primary mb-1.5",children:["Password ",(0,b.jsx)("span",{className:"text-brand-sage ml-0.5",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:u?"text":"password",autoComplete:"new-password",className:(0,q.cn)("input pr-12",C.password&&"border-[color:var(--color-error)]"),...y("password")}),(0,b.jsx)("button",{type:"button",onClick:()=>v(a=>!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary min-h-touch min-w-touch flex items-center justify-center","aria-label":u?"Hide password":"Show password",children:u?(0,b.jsx)(i.EyeOff,{className:"w-5 h-5"}):(0,b.jsx)(h.Eye,{className:"w-5 h-5"})})]}),C.password&&(0,b.jsx)("p",{role:"alert",className:"mt-1.5 text-sm text-[color:var(--color-error)]",children:C.password.message})]}),(0,b.jsx)(o.FormField,{label:"Birthday",type:"date",required:!0,error:C.birthday?.message,...y("birthday")}),(0,b.jsxs)("fieldset",{className:"space-y-3",children:[(0,b.jsx)("legend",{className:"text-sm font-medium text-text-primary",children:"Delivery address"}),(0,b.jsx)(o.FormField,{label:"Street",required:!0,error:C.deliveryAddress?.street?.message,...y("deliveryAddress.street")}),(0,b.jsx)(o.FormField,{label:"Apt, suite (optional)",error:C.deliveryAddress?.apt?.message,...y("deliveryAddress.apt")}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(o.FormField,{label:"City",required:!0,error:C.deliveryAddress?.city?.message,...y("deliveryAddress.city")}),(0,b.jsx)(o.FormField,{label:"State",required:!0,error:C.deliveryAddress?.state?.message,...y("deliveryAddress.state")})]}),(0,b.jsx)(o.FormField,{label:"ZIP code",required:!0,error:C.deliveryAddress?.zip?.message,...y("deliveryAddress.zip")})]}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("span",{className:"block text-sm font-medium text-text-primary mb-2",children:"Language preference"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>B("preferredLanguage","en"),className:(0,q.cn)("flex-1 py-3 rounded-xl font-medium min-h-touch border transition-all","en"===E?"bg-brand-sage/20 border-brand-sage text-brand-sage":"bg-surface-muted border-surface-border text-text-secondary hover:border-brand-sage/40"),children:"English"}),(0,b.jsx)("button",{type:"button",onClick:()=>B("preferredLanguage","es"),className:(0,q.cn)("flex-1 py-3 rounded-xl font-medium min-h-touch border transition-all","es"===E?"bg-brand-sage/20 border-brand-sage text-brand-sage":"bg-surface-muted border-surface-border text-text-secondary hover:border-brand-sage/40"),children:"Español"})]})]}),(0,b.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",className:"mt-1 w-5 h-5 rounded border-surface-border bg-surface-muted text-brand-sage focus:ring-brand-sage",...y("agreeToTerms")}),(0,b.jsx)("span",{className:"text-sm text-text-secondary",children:"I agree to the terms of service and privacy policy"})]}),C.agreeToTerms&&(0,b.jsx)("p",{role:"alert",className:"text-sm text-[color:var(--color-error)]",children:C.agreeToTerms.message}),w&&(0,b.jsx)("p",{role:"alert",className:"text-sm text-[color:var(--color-error)]",children:w}),(0,b.jsx)("button",{type:"submit",disabled:D,className:"btn-primary w-full flex items-center justify-center gap-2 min-h-touch",children:D?(0,b.jsx)(p.Spinner,{size:"sm",color:"white"}):"Create account"})]})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=Developer_brasena_Brasena_acbb3ca6._.js.map