{"version":3,"sources":["../../../../../../../../../Developer/brasena/Brasena/apps/web/src/lib/env.ts","../../../../../../../../../Developer/brasena/Brasena/apps/web/src/config/index.ts","../../../../../../../../../Developer/brasena/Brasena/apps/web/src/lib/utils/index.ts","../../../../../../../../../Developer/brasena/Brasena/apps/web/src/components/auth-shell.tsx/__nextjs-internal-proxy.mjs","../../../../../../../../../Developer/brasena/Brasena/apps/web/src/app/%28auth%29/layout.tsx"],"sourcesContent":["/**\n * Validates required environment variables at startup and exports a typed env object.\n * Uses static process.env.X references so Next.js inlines them in the client bundle.\n */\n\nfunction validateEnv(): {\n  NEXT_PUBLIC_SUPABASE_URL: string\n  NEXT_PUBLIC_SUPABASE_ANON_KEY: string\n  NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY: string\n} {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL ?? \"\"\n  const anonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ?? \"\"\n  const stripeKey = process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY ?? \"\"\n\n  if (url.trim() === \"\") {\n    throw new Error(\n      \"Missing required environment variable: NEXT_PUBLIC_SUPABASE_URL - check your .env.local file\"\n    )\n  }\n  if (anonKey.trim() === \"\") {\n    throw new Error(\n      \"Missing required environment variable: NEXT_PUBLIC_SUPABASE_ANON_KEY - check your .env.local file\"\n    )\n  }\n  if (stripeKey.trim() === \"\") {\n    throw new Error(\n      \"Missing required environment variable: NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY - check your .env.local file\"\n    )\n  }\n\n  if (!url.startsWith(\"https://\") || !url.includes(\".supabase.co\")) {\n    throw new Error(\n      \"NEXT_PUBLIC_SUPABASE_URL must be the Supabase API URL (e.g. https://YOUR_REF.supabase.co). Use Project Settings → API → Project URL in the dashboard, not the Postgres connection string.\"\n    )\n  }\n\n  if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"development\") {\n    // eslint-disable-next-line no-console\n    console.log(\n      \"[Brasena] Env loaded: NEXT_PUBLIC_SUPABASE_URL, NEXT_PUBLIC_SUPABASE_ANON_KEY, NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY\"\n    )\n  }\n\n  return {\n    NEXT_PUBLIC_SUPABASE_URL: url.trim(),\n    NEXT_PUBLIC_SUPABASE_ANON_KEY: anonKey.trim(),\n    NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY: stripeKey.trim(),\n  }\n}\n\nexport const env = validateEnv()\n","// ─── Environment Variables ─────────────────────────────\n// All env vars flow through here. Never import process.env directly\n// in components - always use this config object instead.\n// Required vars are validated at boot via @/lib/env.\n\nimport { env } from \"@/lib/env\"\n\nexport const config = {\n  app: {\n    name: \"Brasena\",\n    url: process.env.NEXT_PUBLIC_APP_URL ?? \"http://localhost:3000\",\n    env: process.env.NODE_ENV ?? \"development\",\n  },\n\n  supabase: {\n    url: env.NEXT_PUBLIC_SUPABASE_URL,\n    anonKey: env.NEXT_PUBLIC_SUPABASE_ANON_KEY,\n  },\n\n  stripe: {\n    publishableKey: env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY,\n    // secretKey only on server - never expose to client\n  },\n\n  maps: {\n    mapboxToken: process.env.NEXT_PUBLIC_MAPBOX_TOKEN,\n  },\n\n  delivery: {\n    uberDirectEnabled: process.env.NEXT_PUBLIC_UBER_DIRECT_ENABLED === \"true\",\n    maxWeightForUber: 30, // lbs - orders over 30lb go to private van\n  },\n} as const\n\n// ─── Business Constants ────────────────────────────────\nexport const BUSINESS = {\n  // Bulk pricing thresholds (lbs)\n  WEIGHT_TIERS: [10, 20, 30, 40] as const,\n\n  // Order routing\n  DRIVER_NOTIFY_DELAY_MS: 7 * 60 * 1000, // 5-10 min delay after vendor confirms\n\n  // Operating hours (EST)\n  HOURS: { open: 6, close: 23 }, // 6 AM - 11 PM\n\n  // Geographic\n  INITIAL_BOROUGH: \"Bronx\",\n  SERVICE_ZIPCODES: [\n    \"10451\", \"10452\", \"10453\", \"10454\", \"10455\",\n    \"10456\", \"10457\", \"10458\", \"10459\", \"10460\",\n    \"10461\", \"10462\", \"10463\", \"10464\", \"10465\",\n    \"10466\", \"10467\", \"10468\", \"10469\", \"10470\",\n    \"10471\", \"10472\", \"10473\", \"10474\", \"10475\",\n  ],\n\n  // Product\n  MAX_PHASE_1_PRODUCTS: 25,\n  CATEGORIES: [\"Beef\", \"Pork\", \"Chicken\"] as const,\n} as const\n\n// ─── Route Constants ───────────────────────────────────\nexport const ROUTES = {\n  // Public\n  HOME:     \"/\",\n  LANGUAGE: \"/language\",\n  LOGIN:    \"/login\",\n  SIGNUP:   \"/signup\",\n\n  // Shop (authenticated)\n  SHOP:       \"/home\",\n  CATEGORIES: \"/categories\",\n  PRODUCTS:   (category: string) => `/categories/${category}`,\n  PRODUCT:    (slug: string) => `/products/${slug}`,\n  CART:       \"/cart\",\n  CHECKOUT:   \"/checkout\",\n\n  // Orders\n  ORDERS:      \"/orders\",\n  ORDER:       (id: string) => `/orders/${id}`,\n  ORDER_TRACK: (id: string) => `/orders/${id}/track`,\n\n  // Account\n  ACCOUNT: \"/account\",\n\n  // Vendor (iPad interface)\n  VENDOR_QUEUE:  \"/vendor/queue\",\n  VENDOR_ORDER:  (id: string) => `/vendor/orders/${id}`,\n\n  // Admin\n  ADMIN_DASHBOARD: \"/admin/dashboard\",\n  ADMIN_PRODUCTS:  \"/admin/products\",\n  ADMIN_ORDERS:    \"/admin/orders\",\n} as const\n\n// ─── Profile Types ─────────────────────────────────────\nexport type ProfileType = \"residential\" | \"business\"\nexport type UserRole = \"customer\" | \"vendor\" | \"driver\" | \"csr\" | \"admin\"\n\n// ─── Order Status ──────────────────────────────────────\nexport const ORDER_STATUS = {\n  PENDING:         \"pending\",\n  CONFIRMED:       \"confirmed\",\n  PREPARING:       \"preparing\",\n  OUT_FOR_DELIVERY:\"out_for_delivery\",\n  DELIVERED:       \"delivered\",\n  CANCELLED:       \"cancelled\",\n} as const\n\nexport type OrderStatus = typeof ORDER_STATUS[keyof typeof ORDER_STATUS]\n","import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\nimport { BUSINESS, config } from \"@/config\"\n\n/**\n * Merge Tailwind classes safely.\n * Handles conflicts like \"bg-red-500 bg-blue-500\" → \"bg-blue-500\"\n * This is the standard pattern for any Tailwind + React project.\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n/**\n * Format a number as USD currency.\n * Used throughout the UI for prices.\n */\nexport function formatPrice(cents: number): string {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n  }).format(cents / 100)\n}\n\n/**\n * Format price per pound display.\n * e.g. \"$3.49/lb\"\n */\nexport function formatPricePerLb(pricePerLbCents: number): string {\n  return `${formatPrice(pricePerLbCents)}/lb`\n}\n\n/**\n * Calculate savings percentage between base and tier price.\n */\nexport function calcSavingsPercent(base: number, sale: number): number {\n  if (base === 0) return 0\n  return Math.round(((base - sale) / base) * 100)\n}\n\n/**\n * Determine delivery provider based on total order weight.\n * Orders over 30lb go to private van per business rules.\n */\nexport function getDeliveryProvider(\n  totalWeightLbs: number\n): \"uber_direct\" | \"doordash\" | \"private_van\" {\n  if (totalWeightLbs > config.delivery.maxWeightForUber) {\n    return \"private_van\"\n  }\n  // Under 30lb - Uber Direct preferred, DoorDash as fallback\n  return \"uber_direct\"\n}\n\n/**\n * Check if a zip code is in the current service area.\n */\nexport function isZipCodeServiced(zip: string): boolean {\n  return (BUSINESS.SERVICE_ZIPCODES as readonly string[]).includes(zip)\n}\n\n/**\n * Generate a human-readable order number.\n * e.g. \"BR-2024-00042\"\n */\nexport function generateOrderNumber(id: number): string {\n  const year = new Date().getFullYear()\n  return `BR-${year}-${String(id).padStart(5, \"0\")}`\n}\n\n/**\n * Format a date for display in order tracking.\n */\nexport function formatDeliveryDate(isoString: string): string {\n  return new Intl.DateTimeFormat(\"en-US\", {\n    weekday: \"long\",\n    month: \"long\",\n    day: \"numeric\",\n  }).format(new Date(isoString))\n}\n\n/**\n * Get the next business day as an ISO date string.\n * Used for \"next day delivery\" display.\n */\nexport function getNextDeliveryDate(): string {\n  const tomorrow = new Date()\n  tomorrow.setDate(tomorrow.getDate() + 1)\n\n  // Skip Sunday (0) - no deliveries\n  if (tomorrow.getDay() === 0) {\n    tomorrow.setDate(tomorrow.getDate() + 1)\n  }\n\n  return tomorrow.toISOString()\n}\n\n/**\n * Calculate total weight of a cart in lbs.\n */\nexport function calcTotalWeight(\n  items: Array<{ weightLbs: number; quantity: number }>\n): number {\n  return items.reduce((sum, i) => sum + i.weightLbs * i.quantity, 0)\n}\n\n/**\n * Debounce a function - useful for search inputs.\n */\nexport function debounce<T extends (...args: unknown[]) => unknown>(\n  fn: T,\n  ms: number\n): (...args: Parameters<T>) => void {\n  let timeoutId: ReturnType<typeof setTimeout>\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeoutId)\n    timeoutId = setTimeout(() => fn(...args), ms)\n  }\n}\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AuthShell = registerClientReference(\n    function() { throw new Error(\"Attempted to call AuthShell() from the server but AuthShell is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Developer/brasena/Brasena/apps/web/src/components/auth-shell.tsx\",\n    \"AuthShell\",\n);\n","/**\n * Auth layout: full-screen bg-surface, subtle radial gradient, single centered\n * column (max 390px). AuthShell adds EN/ES language toggle on login/signup screens.\n */\n\nimport { AuthShell } from \"@/components/auth-shell\"\nimport { cn } from \"@/lib/utils\"\n\nexport default function AuthLayout({\n  children,\n}: {\n  children: React.ReactNode\n}): JSX.Element {\n  return (\n    <div\n      className={cn(\n        \"min-h-screen bg-surface\",\n        \"bg-[radial-gradient(ellipse_80%_60%_at_50%_-20%,rgba(139,175,142,0.03),transparent)]\"\n      )}\n    >\n      <div className=\"max-w-[390px] min-h-screen mx-auto px-4 pt-10 pb-16 flex flex-col items-center\">\n        <main className=\"w-full flex-1 flex flex-col\">\n          <AuthShell className=\"flex-col\">\n            {children}\n          </AuthShell>\n        </main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"uCAkDO,IAAM,EAAM,AA7CnB,SAAS,EAKP,IAAM,EAAM,IAAA,uCACN,EAAU,EADoC,MACpC,2MACV,EAAY,EAD2C,QAC3C,YAElB,GAAmB,CAFiD,GAE7C,CAAnB,EAAI,IAAI,GACV,MAAM,AAAI,MACR,gGAGJ,GAAuB,IAAI,CAAvB,EAAQ,IAAI,GACd,MAAM,AAAI,MACR,qGAGJ,GAAyB,IAAI,CAAzB,EAAU,IAAI,GAChB,MAAM,AAAI,MACR,0GAIJ,GAAI,CAAC,EAAI,UAAU,CAAC,aAAe,CAAC,EAAI,QAAQ,CAAC,gBAC/C,CADgE,KAC1D,AAAI,MACR,6LAWJ,MAAO,CACL,yBAA0B,EAAI,IAAI,GAClC,8BAA+B,EAAQ,IAAI,GAC3C,mCAAoC,EAAU,IAAI,EACpD,CACF,ICjCS,EAAI,wBAAwB,CACxB,EAAI,6BAA6B,CAGpC,AACU,EAAI,kCAAkC,AAExD,iBAuCoB,CAEpB,KAAU,IACV,SAAU,YACV,MAAU,SACV,OAAU,UAGV,KAAY,QACZ,WAAY,cACZ,SAAY,AAAC,GAAqB,CAAC,YAAY,EAAE,EAAA,CAAU,CAC3D,QAAY,AAAC,GAAiB,CAAC,UAAU,EAAE,EAAA,CAAM,CACjD,KAAY,QACZ,SAAY,YAGZ,OAAa,UACb,MAAa,AAAC,GAAe,CAAC,QAAQ,EAAE,EAAA,CAAI,CAC5C,YAAa,AAAC,GAAe,CAAC,QAAQ,EAAE,EAAG,MAAM,CAAC,CAGlD,QAAS,WAGT,aAAe,gBACf,aAAgB,AAAD,GAAgB,CAAC,eAAe,EAAE,EAAA,CAAI,CAGrD,gBAAiB,mBACjB,eAAiB,kBACjB,aAAiB,eACnB,kCC5FA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAQO,SAAS,EAAG,GAAG,CAAoB,EACxC,MAAO,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,CAAA,EAAA,EAAA,IAAA,AAAI,EAAC,GACtB,CATA,EAAA,CAAA,CAAA,0ECAO,IAAM,EAAY,CAAA,EAAA,AADzB,EAAA,CAAA,CAAA,OACyB,uBAAA,AAAuB,EAC5C,WAAa,MAAM,AAAI,MAAM,gOAAkO,EAC/P,iGACA,8DAHG,IAAM,EAAY,CAAA,EAAA,AADzB,EAAA,CAAA,CAAA,OACyB,uBAAA,AAAuB,EAC5C,WAAa,MAAM,AAAI,MAAM,gOAAkO,EAC/P,6EACA,iHCAJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,EAAW,UACjC,CAAQ,CAGT,EACC,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,0BACA,iGAGF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0FACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uCACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oBAClB,SAMb","ignoreList":[3]}