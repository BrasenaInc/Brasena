(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41217,e=>{"use strict";var r=e.i(26557),s=e.i(50898);let t={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-2",lg:"w-14 h-14 border-[3px]"},a={sage:"border-brand-sage border-t-transparent",primary:"border-primary border-t-transparent",mint:"border-brand-mint border-t-transparent",white:"border-text-primary border-t-transparent"};function i(e){let{size:i="md",color:l="sage",className:d}=e;return(0,r.jsx)("div",{role:"status","aria-label":"Loading",className:(0,s.cn)("rounded-full animate-spin",t[i],a[l],d)})}e.s(["Spinner",()=>i])},25101,e=>{"use strict";var r=e.i(15424),s=e.i(26557),t=e.i(68645),a=e.i(33201),i=e.i(37621),l=e.i(22233),d=e.i(43217),n=e.i(70718),o=e.i(78600),m=e.i(593),u=e.i(28256),c=e.i(71386),x=e.i(24415),b=e.i(52629),p=e.i(94545),f=e.i(41217),g=e.i(50898);let h={name:"",email:"",phone:"",password:"",profileType:"business",preferredLanguage:"en",businessName:"",ein:"",birthday:"",deliveryAddress:{street:"",apt:"",city:"",state:"",zip:""},agreeToTerms:!1};function y(){var e,y,v,j,N,w,F,A,_,T,S,q,z,L,C,O;let k=(0,i.useRouter)(),{t:E}=(0,u.useLanguage)(),R=(0,c.useSupabase)(),[U,P]=(0,t.useState)(!1),[B,I]=(0,t.useState)(null),{register:G,handleSubmit:H,watch:K,setValue:W,formState:{errors:D,isSubmitting:J}}=(0,l.useForm)({resolver:(0,d.zodResolver)(x.signupWithAddressSchema),defaultValues:h}),M=K("preferredLanguage");async function Q(e){if(I(null),"business"!==e.profileType||!e.businessName||!e.ein)return void I("Business name and EIN are required.");try{var r,s;let{data:t,error:a}=await R.auth.signUp({email:e.email,password:e.password,options:{data:{name:e.name,phone:e.phone,profile_type:"business",preferred_language:e.preferredLanguage}}});if(a)return void I(a.message);let i=null==(s=t.user)?void 0:s.id;if(!i)return void I("Account created but session not found. Please sign in.");let l={user_id:i,business_name:e.businessName,ein:e.ein,verified:!1},{error:d}=await R.from("business_profiles").insert(l);if(d)return void I(d.message);let n={user_id:i,street:e.deliveryAddress.street,apt:e.deliveryAddress.apt||null,city:e.deliveryAddress.city,state:e.deliveryAddress.state,zip:e.deliveryAddress.zip,instructions:null!=(r=e.deliveryAddress.instructions)?r:null,is_default:!0},{error:o}=await R.from("addresses").insert(n);if(o)return void I(o.message);k.push(m.ROUTES.SHOP)}catch(e){I(e instanceof Error?e.message:"Something went wrong")}}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-6 flex justify-center",children:(0,s.jsx)(b.BrasenaLogo,{size:"sm"})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)(a.default,{href:m.ROUTES.SIGNUP,className:"text-text-secondary hover:text-brand-sage text-sm font-medium min-h-touch flex items-center",children:["â† ",E("common.back")]}),(0,s.jsx)(a.default,{href:m.ROUTES.LOGIN,className:"text-text-secondary hover:text-brand-sage text-sm font-medium min-h-touch flex items-center",children:E("login.submit")})]}),(0,s.jsx)("p",{className:"text-brand-sage text-sm font-medium mb-6",children:E("signup.step2")}),(0,s.jsx)("h1",{className:"font-display text-2xl font-semibold text-text-primary mb-1",children:E("form.businessTitle")}),(0,s.jsx)("p",{className:"text-text-secondary text-base mb-6",children:E("form.subtitle")}),(0,s.jsxs)("form",{onSubmit:H(Q),className:"flex flex-col gap-4",children:[(0,s.jsx)(p.FormField,(0,r._)({label:E("form.name"),required:!0,error:null==(e=D.name)?void 0:e.message},G("name"))),(0,s.jsx)(p.FormField,(0,r._)({label:E("form.businessName"),required:!0,error:null==(y=D.businessName)?void 0:y.message},G("businessName"))),(0,s.jsx)(p.FormField,(0,r._)({label:E("form.ein"),required:!0,error:null==(v=D.ein)?void 0:v.message},G("ein"))),(0,s.jsx)(p.FormField,(0,r._)({label:E("form.email"),type:"email",autoComplete:"email",required:!0,error:null==(j=D.email)?void 0:j.message},G("email"))),(0,s.jsx)(p.FormField,(0,r._)({label:E("form.phone"),type:"tel",autoComplete:"tel",required:!0,error:null==(N=D.phone)?void 0:N.message},G("phone"))),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-text-primary mb-1.5",children:[E("form.password")," ",(0,s.jsx)("span",{className:"text-brand-sage ml-0.5",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",(0,r._)({type:U?"text":"password",autoComplete:"new-password",className:(0,g.cn)("input pr-12",D.password&&"border-[color:var(--color-error)]")},G("password"))),(0,s.jsx)("button",{type:"button",onClick:()=>P(e=>!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary min-h-touch min-w-touch flex items-center justify-center","aria-label":U?"Hide password":"Show password",children:U?(0,s.jsx)(o.EyeOff,{className:"w-5 h-5"}):(0,s.jsx)(n.Eye,{className:"w-5 h-5"})})]}),D.password&&(0,s.jsx)("p",{role:"alert",className:"mt-1.5 text-sm text-[color:var(--color-error)]",children:D.password.message})]}),(0,s.jsx)(p.FormField,(0,r._)({label:E("form.birthday"),type:"date",required:!0,error:null==(w=D.birthday)?void 0:w.message},G("birthday"))),(0,s.jsxs)("fieldset",{className:"space-y-3",children:[(0,s.jsx)("legend",{className:"text-sm font-medium text-text-primary",children:E("form.addressSection")}),(0,s.jsx)(p.FormField,(0,r._)({label:E("form.street"),required:!0,error:null==(A=D.deliveryAddress)||null==(F=A.street)?void 0:F.message},G("deliveryAddress.street"))),(0,s.jsx)(p.FormField,(0,r._)({label:E("form.aptShort"),error:null==(T=D.deliveryAddress)||null==(_=T.apt)?void 0:_.message},G("deliveryAddress.apt"))),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(p.FormField,(0,r._)({label:E("form.city"),required:!0,error:null==(q=D.deliveryAddress)||null==(S=q.city)?void 0:S.message},G("deliveryAddress.city"))),(0,s.jsx)(p.FormField,(0,r._)({label:E("form.state"),required:!0,error:null==(L=D.deliveryAddress)||null==(z=L.state)?void 0:z.message},G("deliveryAddress.state")))]}),(0,s.jsx)(p.FormField,(0,r._)({label:E("form.zip"),required:!0,error:null==(O=D.deliveryAddress)||null==(C=O.zip)?void 0:C.message},G("deliveryAddress.zip")))]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("span",{className:"block text-sm font-medium text-text-primary mb-2",children:E("form.language")}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>W("preferredLanguage","en"),className:(0,g.cn)("flex-1 py-3 rounded-xl font-medium min-h-touch border transition-all","en"===M?"bg-brand-sage/20 border-brand-sage text-brand-sage":"bg-surface-muted border-surface-border text-text-secondary hover:border-brand-sage/40"),children:E("common.english")}),(0,s.jsx)("button",{type:"button",onClick:()=>W("preferredLanguage","es"),className:(0,g.cn)("flex-1 py-3 rounded-xl font-medium min-h-touch border transition-all","es"===M?"bg-brand-sage/20 border-brand-sage text-brand-sage":"bg-surface-muted border-surface-border text-text-secondary hover:border-brand-sage/40"),children:E("common.espanol")})]})]}),(0,s.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,s.jsx)("input",(0,r._)({type:"checkbox",className:"mt-1 w-5 h-5 rounded border-surface-border bg-surface-muted text-brand-sage focus:ring-brand-sage"},G("agreeToTerms"))),(0,s.jsx)("span",{className:"text-sm text-text-secondary",children:E("form.agreeTerms")})]}),D.agreeToTerms&&(0,s.jsx)("p",{role:"alert",className:"text-sm text-[color:var(--color-error)]",children:D.agreeToTerms.message}),B&&(0,s.jsx)("p",{role:"alert",className:"text-sm text-[color:var(--color-error)]",children:B}),(0,s.jsx)("button",{type:"submit",disabled:J,className:"btn-primary w-full flex items-center justify-center gap-2 min-h-touch",children:J?(0,s.jsx)(f.Spinner,{size:"sm",color:"white"}):E("form.submit")})]})]})}e.s(["default",()=>y])}]);