(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61527,(e,t,r)=>{var s={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],s=t[1];return(r+s)*3/4-s},t.toByteArray=function(e){var t,r,a=l(e),i=a[0],o=a[1],c=new n((i+o)*3/4-o),u=0,h=o>0?i-4:i;for(r=0;r<h;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===o&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===o&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,s=e.length,n=s%3,a=[],i=0,o=s-n;i<o;i+=16383)a.push(function(e,t,s){for(var n,a=[],i=t;i<s;i+=3)n=(e[i]<<16&0xff0000)+(e[i+1]<<8&65280)+(255&e[i+2]),a.push(r[n>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return a.join("")}(e,i,i+16383>o?o:i+16383));return 1===n?a.push(r[(t=e[s-1])>>2]+r[t<<4&63]+"=="):2===n&&a.push(r[(t=(e[s-2]<<8)+e[s-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),a.join("")};for(var r=[],s=[],n="u">typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=a.length;i<o;++i)r[i]=a[i],s[a.charCodeAt(i)]=i;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var s=r===t?0:4-r%4;return[r,s]}s[45]=62,s[95]=63},72:function(e,t,r){"use strict";var s=r(675),n=r(783),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function i(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var s=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);var a=0|f(s,n),l=i(a),c=l.write(s,n);return c!==a&&(l=l.slice(0,c)),l}if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(R(e,SharedArrayBuffer)||e&&R(e.buffer,SharedArrayBuffer)))return function(e,t,r){var s;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(s=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),s}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var u=e.valueOf&&e.valueOf();if(null!=u&&u!==e)return o.from(u,t,r);var p=function(e){if(o.isBuffer(e)){var t=0|d(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?i(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(p)return p;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),i(e<0?0:0|d(e))}function h(e){for(var t=e.length<0?0:0|d(e.length),r=i(t),s=0;s<t;s+=1)r[s]=255&e[s];return r}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(c(e),e<=0)?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return O(e).length;default:if(n)return s?-1:T(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,r){var n,a,i,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var s=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>s)&&(r=s);for(var n="",a=t;a<r;++a)n+=j[e[a]];return n}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var s="";r=Math.min(e.length,r);for(var n=t;n<r;++n)s+=String.fromCharCode(127&e[n]);return s}(this,t,r);case"latin1":case"binary":return function(e,t,r){var s="";r=Math.min(e.length,r);for(var n=t;n<r;++n)s+=String.fromCharCode(e[n]);return s}(this,t,r);case"base64":return n=this,a=t,i=r,0===a&&i===n.length?s.fromByteArray(n):s.fromByteArray(n.slice(a,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var s=e.slice(t,r),n="",a=0;a<s.length;a+=2)n+=String.fromCharCode(s[a]+256*s[a+1]);return n}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function g(e,t,r){var s=e[t];e[t]=e[r],e[r]=s}function m(e,t,r,s,n){var a;if(0===e.length)return -1;if("string"==typeof r?(s=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(a=r*=1)!=a&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(n)return -1;else r=e.length-1;else if(r<0)if(!n)return -1;else r=0;if("string"==typeof t&&(t=o.from(t,s)),o.isBuffer(t))return 0===t.length?-1:y(e,t,r,s,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,s,n)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,s,n){var a,i=1,o=e.length,l=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return -1;i=2,o/=2,l/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(n){var u=-1;for(a=r;a<o;a++)if(c(e,a)===c(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===l)return u*i}else -1!==u&&(a-=a-u),u=-1}else for(r+l>o&&(r=o-l),a=r;a>=0;a--){for(var h=!0,d=0;d<l;d++)if(c(e,a+d)!==c(t,d)){h=!1;break}if(h)return a}return -1}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(R(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),R(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,s=t.length,n=0,a=Math.min(r,s);n<a;++n)if(e[n]!==t[n]){r=e[n],s=t[n];break}return r<s?-1:+(s<r)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,s=o.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var a=e[r];if(R(a,Uint8Array)&&(a=o.from(a)),!o.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(s,n),n+=a.length}return s},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a&&(o.prototype[a]=o.prototype.inspect),o.prototype.compare=function(e,t,r,s,n){if(R(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),t<0||r>e.length||s<0||n>this.length)throw RangeError("out of range index");if(s>=n&&t>=r)return 0;if(s>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,s>>>=0,n>>>=0,this===e)return 0;for(var a=n-s,i=r-t,l=Math.min(a,i),c=this.slice(s,n),u=e.slice(t,r),h=0;h<l;++h)if(c[h]!==u[h]){a=c[h],i=u[h];break}return a<i?-1:+(i<a)},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)};function v(e,t,r){r=Math.min(e.length,r);for(var s=[],n=t;n<r;){var a,i,o,l,c=e[n],u=null,h=c>239?4:c>223?3:c>191?2:1;if(n+h<=r)switch(h){case 1:c<128&&(u=c);break;case 2:(192&(a=e[n+1]))==128&&(l=(31&c)<<6|63&a)>127&&(u=l);break;case 3:a=e[n+1],i=e[n+2],(192&a)==128&&(192&i)==128&&(l=(15&c)<<12|(63&a)<<6|63&i)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:a=e[n+1],i=e[n+2],o=e[n+3],(192&a)==128&&(192&i)==128&&(192&o)==128&&(l=(15&c)<<18|(63&a)<<12|(63&i)<<6|63&o)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,s.push(u>>>10&1023|55296),u=56320|1023&u),s.push(u),n+=h}var d=s,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",g=0;g<f;)p+=String.fromCharCode.apply(String,d.slice(g,g+=4096));return p}function _(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function b(e,t,r,s,n,a){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw RangeError('"value" argument is out of bounds');if(r+s>e.length)throw RangeError("Index out of range")}function w(e,t,r,s,n,a){if(r+s>e.length||r<0)throw RangeError("Index out of range")}function k(e,t,r,s,a){return t*=1,r>>>=0,a||w(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,s,23,4),r+4}function S(e,t,r,s,a){return t*=1,r>>>=0,a||w(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,s,52,8),r+8}o.prototype.write=function(e,t,r,s){if(void 0===t)s="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)s=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===s&&(s="utf8")):(s=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,a,i,o,l,c,u,h,d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var f=!1;;)switch(s){case"hex":return function(e,t,r,s){r=Number(r)||0;var n=e.length-r;s?(s=Number(s))>n&&(s=n):s=n;var a=t.length;s>a/2&&(s=a/2);for(var i=0;i<s;++i){var o,l=parseInt(t.substr(2*i,2),16);if((o=l)!=o)break;e[r+i]=l}return i}(this,e,t,r);case"utf8":case"utf-8":return n=t,a=r,x(T(e,this.length-n),this,n,a);case"ascii":return i=t,o=r,x(A(e),this,i,o);case"latin1":case"binary":return function(e,t,r,s){return x(A(t),e,r,s)}(this,e,t,r);case"base64":return l=t,c=r,x(O(e),this,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,h=r,x(function(e,t){for(var r,s,n=[],a=0;a<e.length&&!((t-=2)<0);++a)s=(r=e.charCodeAt(a))>>8,n.push(r%256),n.push(s);return n}(e,this.length-u),this,u,h);default:if(f)throw TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var s=this.subarray(e,t);return Object.setPrototypeOf(s,o.prototype),s},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var s=this[e],n=1,a=0;++a<t&&(n*=256);)s+=this[e+a]*n;return s},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var s=this[e+--t],n=1;t>0&&(n*=256);)s+=this[e+--t]*n;return s},o.prototype.readUInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var s=this[e],n=1,a=0;++a<t&&(n*=256);)s+=this[e+a]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var s=t,n=1,a=this[e+--s];s>0&&(n*=256);)a+=this[e+--s]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return(e>>>=0,t||_(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||_(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||_(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||_(e,4,this.length),n.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||_(e,4,this.length),n.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||_(e,8,this.length),n.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||_(e,8,this.length),n.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,s){if(e*=1,t>>>=0,r>>>=0,!s){var n=Math.pow(2,8*r)-1;b(this,e,t,r,n,0)}var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,s){if(e*=1,t>>>=0,r>>>=0,!s){var n=Math.pow(2,8*r)-1;b(this,e,t,r,n,0)}var a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,s){if(e*=1,t>>>=0,!s){var n=Math.pow(2,8*r-1);b(this,e,t,r,n-1,-n)}var a=0,i=1,o=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/i|0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,s){if(e*=1,t>>>=0,!s){var n=Math.pow(2,8*r-1);b(this,e,t,r,n-1,-n)}var a=r-1,i=1,o=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/i|0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,s){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<r&&(s=r),s===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(s<0)throw RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-r&&(s=e.length-t+r);var n=s-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,s);else if(this===e&&r<t&&t<s)for(var a=n-1;a>=0;--a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,s),t);return n},o.prototype.fill=function(e,t,r,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,r=this.length):"string"==typeof r&&(s=r,r=this.length),void 0!==s&&"string"!=typeof s)throw TypeError("encoding must be a string");if("string"==typeof s&&!o.isEncoding(s))throw TypeError("Unknown encoding: "+s);if(1===e.length){var n,a=e.charCodeAt(0);("utf8"===s&&a<128||"latin1"===s)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var i=o.isBuffer(e)?e:o.from(e,s),l=i.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=i[n%l]}return this};var E=/[^+/0-9A-Za-z-_]/g;function T(e,t){t=t||1/0;for(var r,s=e.length,n=null,a=[],i=0;i<s;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!n){if(r>56319||i+1===s){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return a}function A(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function O(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function x(e,t,r,s){for(var n=0;n<s&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}function R(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var j=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var s=16*r,n=0;n<16;++n)t[s+n]=e[r]+e[n];return t}()},783:function(e,t){t.read=function(e,t,r,s,n){var a,i,o=8*n-s-1,l=(1<<o)-1,c=l>>1,u=-7,h=r?n-1:0,d=r?-1:1,f=e[t+h];for(h+=d,a=f&(1<<-u)-1,f>>=-u,u+=o;u>0;a=256*a+e[t+h],h+=d,u-=8);for(i=a&(1<<-u)-1,a>>=-u,u+=s;u>0;i=256*i+e[t+h],h+=d,u-=8);if(0===a)a=1-c;else{if(a===l)return i?NaN:1/0*(f?-1:1);i+=Math.pow(2,s),a-=c}return(f?-1:1)*i*Math.pow(2,a-s)},t.write=function(e,t,r,s,n,a){var i,o,l,c=8*a-n-1,u=(1<<c)-1,h=u>>1,d=5960464477539062e-23*(23===n),f=s?0:a-1,p=s?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(i++,l/=2),i+h>=u?(o=0,i=u):i+h>=1?(o=(t*l-1)*Math.pow(2,n),i+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,n),i=0));n>=8;e[r+f]=255&o,f+=p,o/=256,n-=8);for(i=i<<n|o,c+=n;c>0;e[r+f]=255&i,f+=p,i/=256,c-=8);e[r+f-p]|=128*g}}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}},i=!0;try{s[e](r,r.exports,a),i=!1}finally{i&&delete n[e]}return r.exports}a.ab="/ROOT/Developer/brasena/Brasena/node_modules/next/dist/compiled/buffer/",t.exports=a(72)},58702,(e,t,r)=>{"use strict";let s;var n=e.r(45391),a=e.r(8760);Object.defineProperty(r,"__esModule",{value:!0}),r.parseCookie=f,r.parse=f,r.stringifyCookie=function(e,t){let r=(null==t?void 0:t.encode)||encodeURIComponent,s=[];for(let t of Object.keys(e)){let n=e[t];if(void 0===n)continue;if(!i.test(t))throw TypeError("cookie name is invalid: ".concat(t));let a=r(n);if(!o.test(a))throw TypeError("cookie val is invalid: ".concat(n));s.push("".concat(t,"=").concat(a))}return s.join("; ")},r.stringifySetCookie=p,r.serialize=p,r.parseSetCookie=function(e,t){let r=(null==t?void 0:t.decode)||v,s=e.length,n=g(e,0,s),a=m(e,0,n),i=-1===a?{name:"",value:r(y(e,0,n))}:{name:y(e,0,a),value:r(y(e,a+1,n))},o=n+1;for(;o<s;){let t=g(e,o,s),r=m(e,o,t),n=-1===r?y(e,o,t):y(e,o,r),a=-1===r?void 0:y(e,r+1,t);switch(n.toLowerCase()){case"httponly":i.httpOnly=!0;break;case"secure":i.secure=!0;break;case"partitioned":i.partitioned=!0;break;case"domain":i.domain=a;break;case"path":i.path=a;break;case"max-age":a&&u.test(a)&&(i.maxAge=Number(a));break;case"expires":if(!a)break;let l=new Date(a);Number.isFinite(l.valueOf())&&(i.expires=l);break;case"priority":if(!a)break;let c=a.toLowerCase();("low"===c||"medium"===c||"high"===c)&&(i.priority=c);break;case"samesite":if(!a)break;let h=a.toLowerCase();("lax"===h||"strict"===h||"none"===h)&&(i.sameSite=h)}o=t+1}return i},r.stringifySetCookie=p,r.serialize=p;let i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,l=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,c=/^[\u0020-\u003A\u003D-\u007E]*$/,u=/^-?\d+$/,h=Object.prototype.toString,d=((s=function(){}).prototype=Object.create(null),s);function f(e,t){let r=new d,s=e.length;if(s<2)return r;let n=(null==t?void 0:t.decode)||v,a=0;do{let t=m(e,a,s);if(-1===t)break;let i=g(e,a,s);if(t>i){a=e.lastIndexOf(";",t-1)+1;continue}let o=y(e,a,t);void 0===r[o]&&(r[o]=n(y(e,t+1,i))),a=i+1}while(a<s)return r}function p(e,t,r){let s="object"==typeof e?e:a._(n._({},r),{name:e,value:String(t)}),u="object"==typeof t?t:r,d=(null==u?void 0:u.encode)||encodeURIComponent;if(!i.test(s.name))throw TypeError("argument name is invalid: ".concat(s.name));let f=s.value?d(s.value):"";if(!o.test(f))throw TypeError("argument val is invalid: ".concat(s.value));let p=s.name+"="+f;if(void 0!==s.maxAge){if(!Number.isInteger(s.maxAge))throw TypeError("option maxAge is invalid: ".concat(s.maxAge));p+="; Max-Age="+s.maxAge}if(s.domain){if(!l.test(s.domain))throw TypeError("option domain is invalid: ".concat(s.domain));p+="; Domain="+s.domain}if(s.path){if(!c.test(s.path))throw TypeError("option path is invalid: ".concat(s.path));p+="; Path="+s.path}if(s.expires){var g;if(g=s.expires,"[object Date]"!==h.call(g)||!Number.isFinite(s.expires.valueOf()))throw TypeError("option expires is invalid: ".concat(s.expires));p+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(p+="; HttpOnly"),s.secure&&(p+="; Secure"),s.partitioned&&(p+="; Partitioned"),s.priority)switch("string"==typeof s.priority?s.priority.toLowerCase():void 0){case"low":p+="; Priority=Low";break;case"medium":p+="; Priority=Medium";break;case"high":p+="; Priority=High";break;default:throw TypeError("option priority is invalid: ".concat(s.priority))}if(s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":p+="; SameSite=Strict";break;case"lax":p+="; SameSite=Lax";break;case"none":p+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid: ".concat(s.sameSite))}return p}function g(e,t,r){let s=e.indexOf(";",t);return -1===s?r:s}function m(e,t,r){let s=e.indexOf("=",t);return s<r?s:-1}function y(e,t,r){let s=t,n=r;do{let t=e.charCodeAt(s);if(32!==t&&9!==t)break}while(++s<n)for(;n>s;){let t=e.charCodeAt(n-1);if(32!==t&&9!==t)break;n--}return e.slice(s,n)}function v(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},12896,(e,t,r)=>{},22233,43217,70718,78600,71386,24415,94545,41217,e=>{"use strict";let t,r,s;var n,a,i,o,l,c,u,h,d,f,p,g,m,y,v,_,b,w,k,S,E,T,A,O,x,R,j,C,I,P=e.i(15424),N=e.i(94388),U=e.i(42847),L=e.i(68645),D=e=>e instanceof Date,B=e=>null==e,F=e=>!B(e)&&!Array.isArray(e)&&"object"==typeof e&&!D(e),V="u">typeof window&&void 0!==window.HTMLElement&&"u">typeof document;function q(e){let t;if(e instanceof Date)return new Date(e);let r="u">typeof FileList&&e instanceof FileList;if(V&&(e instanceof Blob||r))return e;let s=Array.isArray(e);if(!s&&!(F(e)&&F(t=e.constructor&&e.constructor.prototype)&&t.hasOwnProperty("isPrototypeOf")))return e;let n=s?[]:Object.create(Object.getPrototypeOf(e));for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=q(e[t]));return n}var M=e=>void 0===e,Z=e=>Array.isArray(e)?e.filter(Boolean):[],z=e=>Z(e.replace(/["|']|\]/g,"").split(/\.|\[/)),K=(e,t,r)=>{if(!t||!F(e))return r;let s=(/^\w*$/.test(t)?[t]:z(t)).reduce((e,t)=>B(e)?e:e[t],e);return M(s)||s===e?M(e[t])?r:e[t]:s},W=e=>"function"==typeof e,H=(e,t,r)=>{let s=-1,n=/^\w*$/.test(t)?[t]:z(t),a=n.length,i=a-1;for(;++s<a;){let t=n[s],a=r;if(s!==i){let r=e[t];a=F(r)||Array.isArray(r)?r:isNaN(+n[s+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=a,e=e[t]}};let J="onChange",G="onSubmit",$="pattern",Y="required";L.default.createContext(null).displayName="HookFormControlContext";var X=function(e,t,r){let s=!(arguments.length>3)||void 0===arguments[3]||arguments[3],n={defaultValues:t._defaultValues};for(let a in e)Object.defineProperty(n,a,{get:()=>("all"!==t._proxyFormState[a]&&(t._proxyFormState[a]=!s||"all"),r&&(r[a]=!0),e[a])});return n};let Q="u">typeof window?L.default.useLayoutEffect:L.default.useEffect;var ee=e=>"string"==typeof e,et=e=>B(e)||"object"!=typeof e;function er(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(et(e)||et(t))return Object.is(e,t);if(D(e)&&D(t))return Object.is(e.getTime(),t.getTime());let s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;for(let a of(r.add(e),r.add(t),s)){let s=e[a];if(!n.includes(a))return!1;if("ref"!==a){let e=t[a];if(D(s)&&D(e)||F(s)&&F(e)||Array.isArray(s)&&Array.isArray(e)?!er(s,e,r):!Object.is(s,e))return!1}}return!0}L.default.createContext(null).displayName="HookFormContext";var es=(e,t,r,s,n)=>t?(0,N._)((0,P._)({},r[e]),{types:(0,N._)((0,P._)({},r[e]&&r[e].types?r[e].types:{}),{[s]:n||!0})}):{},en=e=>Array.isArray(e)?e:[e],ea=()=>{let e=[];return{get observers(){return e},next:t=>{for(let r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},ei=e=>F(e)&&!Object.keys(e).length,eo=e=>{if(!V)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},el=e=>eo(e)&&e.isConnected;function ec(e,t){let r=Array.isArray(t)?t:/^\w*$/.test(t)?[t]:z(t),s=1===r.length?e:function(e,t){let r=t.slice(0,-1).length,s=0;for(;s<r;)e=M(e)?s++:e[t[s++]];return e}(e,r),n=r.length-1,a=r[n];return s&&delete s[a],0!==n&&(F(s)&&ei(s)||Array.isArray(s)&&function(e){for(let t in e)if(e.hasOwnProperty(t)&&!M(e[t]))return!1;return!0}(s))&&ec(e,r.slice(0,-1)),e}function eu(e){return Array.isArray(e)||F(e)&&!(e=>{for(let t in e)if(W(e[t]))return!0;return!1})(e)}function eh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let r in e){let s=e[r];eu(s)?(t[r]=Array.isArray(s)?[]:{},eh(s,t[r])):M(s)||(t[r]=!0)}return t}function ed(e,t,r){for(let s in r||(r=eh(t)),e){let n=e[s];if(eu(n))M(t)||et(r[s])?r[s]=eh(n,Array.isArray(n)?[]:{}):ed(n,B(t)?{}:t[s],r[s]);else{let e=t[s];r[s]=!er(n,e)}}return r}let ef={value:!1,isValid:!1},ep={value:!0,isValid:!0};var eg=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!M(e[0].attributes.value)?M(e[0].value)||""===e[0].value?ep:{value:e[0].value,isValid:!0}:ep:ef}return ef},em=(e,t)=>{let{valueAsNumber:r,valueAsDate:s,setValueAs:n}=t;return M(e)?e:r?""===e?NaN:e?+e:e:s&&ee(e)?new Date(e):n?n(e):e};let ey={isValid:!1,value:null};var ev=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ey):ey;function e_(e){let t=e.ref;return"file"===t.type?t.files:"radio"===t.type?ev(e.refs).value:"select-multiple"===t.type?[...t.selectedOptions].map(e=>{let{value:t}=e;return t}):"checkbox"===t.type?eg(e.refs).value:em(M(t.value)?e.ref.value:t.value,e)}var eb=e=>M(e)?e:e instanceof RegExp?e.source:F(e)?e.value instanceof RegExp?e.value.source:e.value:e,ew=e=>({isOnSubmit:!e||e===G,isOnBlur:"onBlur"===e,isOnChange:e===J,isOnAll:"all"===e,isOnTouch:"onTouched"===e});let ek="AsyncFunction";var eS=e=>!!e&&!!e.validate&&!!(W(e.validate)&&e.validate.constructor.name===ek||F(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===ek)),eE=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));let eT=(e,t,r,s)=>{for(let n of r||Object.keys(e)){let r=K(e,n);if(r){let{_f:e}=r,a=(0,U._)(r,["_f"]);if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],n)&&!s)return!0;else if(e.ref&&t(e.ref,e.name)&&!s)return!0;else if(eT(a,t))break}else if(F(a)&&eT(a,t))break}}};function eA(e,t,r){let s=K(e,r);if(s||/^\w*$/.test(r))return{error:s,name:r};let n=r.split(".");for(;n.length;){let s=n.join("."),a=K(t,s),i=K(e,s);if(a&&!Array.isArray(a)&&r!==s)break;if(i&&i.type)return{name:s,error:i};if(i&&i.root&&i.root.type)return{name:"".concat(s,".root"),error:i.root};n.pop()}return{name:r}}var eO=(e,t,r)=>{let s=en(K(e,r));return H(s,"root",t[r]),H(e,r,s),e};function ex(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(ee(e)||Array.isArray(e)&&e.every(ee)||"boolean"==typeof e&&!e)return{type:r,message:ee(e)?e:"",ref:t}}var eR=e=>!F(e)||e instanceof RegExp?{value:e,message:""}:e,ej=async(e,t,r,s,n,a)=>{let{ref:i,refs:o,required:l,maxLength:c,minLength:u,min:h,max:d,pattern:f,validate:p,name:g,valueAsNumber:m,mount:y}=e._f,v=K(r,g);if(!y||t.has(g))return{};let _=o?o[0]:i,b=e=>{n&&_.reportValidity&&(_.setCustomValidity("boolean"==typeof e?"":e||""),_.reportValidity())},w={},k="radio"===i.type,S="checkbox"===i.type,E=(m||"file"===i.type)&&M(i.value)&&M(v)||eo(i)&&""===i.value||""===v||Array.isArray(v)&&!v.length,T=es.bind(null,g,s,w),A=function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"maxLength",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"minLength",a=e?t:r;w[g]=(0,P._)({type:e?s:n,message:a,ref:i},T(e?s:n,a))};if(a?!Array.isArray(v)||!v.length:l&&(!(k||S)&&(E||B(v))||"boolean"==typeof v&&!v||S&&!eg(o).isValid||k&&!ev(o).isValid)){let{value:e,message:t}=ee(l)?{value:!!l,message:l}:eR(l);if(e&&(w[g]=(0,P._)({type:Y,message:t,ref:_},T(Y,t)),!s))return b(t),w}if(!E&&(!B(h)||!B(d))){let e,t,r=eR(d),n=eR(h);if(B(v)||isNaN(v)){let s=i.valueAsDate||new Date(v),a=e=>new Date(new Date().toDateString()+" "+e),o="time"==i.type,l="week"==i.type;ee(r.value)&&v&&(e=o?a(v)>a(r.value):l?v>r.value:s>new Date(r.value)),ee(n.value)&&v&&(t=o?a(v)<a(n.value):l?v<n.value:s<new Date(n.value))}else{let s=i.valueAsNumber||(v?+v:v);B(r.value)||(e=s>r.value),B(n.value)||(t=s<n.value)}if((e||t)&&(A(!!e,r.message,n.message,"max","min"),!s))return b(w[g].message),w}if((c||u)&&!E&&(ee(v)||a&&Array.isArray(v))){let e=eR(c),t=eR(u),r=!B(e.value)&&v.length>+e.value,n=!B(t.value)&&v.length<+t.value;if((r||n)&&(A(r,e.message,t.message),!s))return b(w[g].message),w}if(f&&!E&&ee(v)){let{value:e,message:t}=eR(f);if(e instanceof RegExp&&!v.match(e)&&(w[g]=(0,P._)({type:$,message:t,ref:i},T($,t)),!s))return b(t),w}if(p){if(W(p)){let e=ex(await p(v,r),_);if(e&&(w[g]=(0,P._)({},e,T("validate",e.message)),!s))return b(e.message),w}else if(F(p)){let e={};for(let t in p){if(!ei(e)&&!s)break;let n=ex(await p[t](v,r),_,t);n&&(e=(0,P._)({},n,T(t,n.message)),b(n.message),s&&(w[g]=e))}if(!ei(e)&&(w[g]=(0,P._)({ref:_},e),!s))return w}}return b(!0),w};let eC={mode:G,reValidateMode:J,shouldFocusError:!0};function eI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=L.default.useRef(void 0),r=L.default.useRef(void 0),[s,n]=L.default.useState({isDirty:!1,isValidating:!1,isLoading:W(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:W(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current=(0,N._)((0,P._)({},e.formControl),{formState:s}),e.defaultValues&&!W(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{let r=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,P._)({},eC,t),s={submitCount:0,isDirty:!1,isReady:!1,isLoading:W(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},n={},a=(F(r.defaultValues)||F(r.values))&&q(r.defaultValues||r.values)||{},i=r.shouldUnregister?{}:q(a),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0,u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h=(0,P._)({},u),d=(0,P._)({},h),f={array:ea(),state:ea()},p="all"===r.criteriaMode,g=async e=>{if(!o.keepIsValid&&!r.disabled&&(h.isValid||d.isValid||e)){let e;r.resolver?(e=ei((await _()).errors),m()):e=await w(n,!0),e!==s.isValid&&f.state.next({isValid:e})}},m=(e,t)=>{!r.disabled&&(h.isValidating||h.validatingFields||d.isValidating||d.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?H(s.validatingFields,e,t):ec(s.validatingFields,e))}),f.state.next({validatingFields:s.validatingFields,isValidating:!ei(s.validatingFields)}))},y=(e,t,r,s)=>{let l=K(n,e);if(l){let n=K(i,e,M(r)?K(a,e):r);M(n)||s&&s.defaultChecked||t?H(i,e,t?n:e_(l._f)):E(e,n),o.mount&&!o.action&&g()}},v=(e,t,n,i,o)=>{let l=!1,c=!1,u={name:e};if(!r.disabled){if(!n||i){(h.isDirty||d.isDirty)&&(c=s.isDirty,s.isDirty=u.isDirty=k(),l=c!==u.isDirty);let r=er(K(a,e),t);c=!!K(s.dirtyFields,e),r?ec(s.dirtyFields,e):H(s.dirtyFields,e,!0),u.dirtyFields=s.dirtyFields,l=l||(h.dirtyFields||d.dirtyFields)&&!r!==c}if(n){let t=K(s.touchedFields,e);t||(H(s.touchedFields,e,n),u.touchedFields=s.touchedFields,l=l||(h.touchedFields||d.touchedFields)&&t!==n)}l&&o&&f.state.next(u)}return l?u:{}},_=async e=>(m(e,!0),await r.resolver(i,r.context,((e,t,r,s)=>{let n={};for(let r of e){let e=K(t,r);e&&H(n,r,e._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:s}})(e||l.mount,n,r.criteriaMode,r.shouldUseNativeValidation))),b=async e=>{let{errors:t}=await _(e);if(m(e),e)for(let r of e){let e=K(t,r);e?H(s.errors,r,e):ec(s.errors,r)}else s.errors=t;return t},w=async function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(let o in e){let c=e[o];if(c){let{_f:e}=c,o=(0,U._)(c,["_f"]);if(e){let o=l.array.has(e.name),u=c._f&&eS(c._f);u&&h.validatingFields&&m([e.name],!0);let d=await ej(c,l.disabled,i,p,r.shouldUseNativeValidation&&!n,o);if(u&&h.validatingFields&&m([e.name]),d[e.name]&&(a.valid=!1,n||t.shouldUseNativeValidation))break;n||(K(d,e.name)?o?eO(s.errors,d,e.name):H(s.errors,e.name,d[e.name]):ec(s.errors,e.name))}ei(o)||await w(o,n,a)}}return a.valid},k=(e,t)=>!r.disabled&&(e&&t&&H(i,e,t),!er(j(),a)),S=(e,t,r)=>{var s,n;return s=l,n=(0,P._)({},o.mount?i:M(t)?a:ee(e)?{[e]:t}:t),ee(e)?(r&&s.watch.add(e),K(n,e,t)):Array.isArray(e)?e.map(e=>(r&&s.watch.add(e),K(n,e))):(r&&(s.watchAll=!0),n)},E=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=K(n,e),a=t;if(s){let r=s._f;r&&(r.disabled||H(i,e,em(t,r)),a=eo(r.ref)&&B(t)?"":t,"select-multiple"===r.ref.type?[...r.ref.options].forEach(e=>e.selected=a.includes(e.value)):r.refs?"checkbox"===r.ref.type?r.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(a)?e.checked=!!a.find(t=>t===e.value):e.checked=a===e.value||!!a)}):r.refs.forEach(e=>e.checked=e.value===a):"file"===r.ref.type?r.ref.value="":(r.ref.value=a,r.ref.type||f.state.next({name:e,values:q(i)})))}(r.shouldDirty||r.shouldTouch)&&v(e,a,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&R(e)},T=(e,t,r)=>{for(let s in t){if(!t.hasOwnProperty(s))return;let a=t[s],i=e+"."+s,o=K(n,i);(l.array.has(e)||F(a)||o&&!o._f)&&!D(a)?T(i,a,r):E(i,a,r)}},A=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=K(n,e),u=l.array.has(e),p=q(t);H(i,e,p),u?(f.array.next({name:e,values:q(i)}),(h.isDirty||h.dirtyFields||d.isDirty||d.dirtyFields)&&r.shouldDirty&&f.state.next({name:e,dirtyFields:ed(a,i),isDirty:k(e,p)})):!c||c._f||B(p)?E(e,p,r):T(e,p,r),eE(e,l)?f.state.next((0,N._)((0,P._)({},s),{name:e,values:q(i)})):f.state.next({name:o.mount?e:void 0,values:q(i)})},O=async t=>{o.mount=!0;let a=t.target,u=a.name,y=!0,b=K(n,u),k=e=>{y=Number.isNaN(e)||D(e)&&isNaN(e.getTime())||er(e,K(i,u,e))},S=ew(r.mode),E=ew(r.reValidateMode);if(b){let o,L,D,B,V=a.type?e_(b._f):F(o=t)&&o.target?"checkbox"===o.target.type?o.target.checked:o.target.value:o,M="blur"===t.type||"focusout"===t.type,Z=!((B=b._f).mount&&(B.required||B.min||B.max||B.maxLength||B.minLength||B.pattern||B.validate))&&!r.resolver&&!K(s.errors,u)&&!b._f.deps||(T=M,A=K(s.touchedFields,u),O=s.isSubmitted,x=E,!(j=S).isOnAll&&(!O&&j.isOnTouch?!(A||T):(O?x.isOnBlur:j.isOnBlur)?!T:(O?!x.isOnChange:!j.isOnChange)||T)),z=eE(u,l,M);H(i,u,V),M?a&&a.readOnly||(b._f.onBlur&&b._f.onBlur(t),e&&e(0)):b._f.onChange&&b._f.onChange(t);let W=v(u,V,M),J=!ei(W)||z;if(M||f.state.next({name:u,type:t.type,values:q(i)}),Z)return(h.isValid||d.isValid)&&("onBlur"===r.mode?M&&g():M||g()),J&&f.state.next((0,P._)({name:u},z?{}:W));if(!M&&z&&f.state.next((0,P._)({},s)),r.resolver){let{errors:e}=await _([u]);if(m([u]),k(V),y){let t=eA(s.errors,n,u),r=eA(e,n,t.name||u);L=r.error,u=r.name,D=ei(e)}}else m([u],!0),L=(await ej(b,l.disabled,i,p,r.shouldUseNativeValidation))[u],m([u]),k(V),y&&(L?D=!1:(h.isValid||d.isValid)&&(D=await w(n,!0)));if(y){b._f.deps&&(!Array.isArray(b._f.deps)||b._f.deps.length>0)&&R(b._f.deps);var T,A,O,x,j,C=u,I=D,U=L;let t=K(s.errors,C),n=(h.isValid||d.isValid)&&"boolean"==typeof I&&s.isValid!==I;if(r.delayError&&U){let t;t=()=>{H(s.errors,C,U),f.state.next({errors:s.errors})},(e=e=>{clearTimeout(c),c=setTimeout(t,e)})(r.delayError)}else clearTimeout(c),e=null,U?H(s.errors,C,U):ec(s.errors,C);if((U?!er(t,U):t)||!ei(W)||n){let e=(0,N._)((0,P._)({},W,n&&"boolean"==typeof I?{isValid:I}:{}),{errors:s.errors,name:C});s=(0,P._)({},s,e),f.state.next(e)}}}},x=(e,t)=>{if(K(s.errors,t)&&e.focus)return e.focus(),1},R=async function(e){let t,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=en(e);if(r.resolver){let r=await b(M(e)?e:o);t=ei(r),a=e?!o.some(e=>K(r,e)):t}else e?((a=(await Promise.all(o.map(async e=>{let t=K(n,e);return await w(t&&t._f?{[e]:t}:t)}))).every(Boolean))||s.isValid)&&g():a=t=await w(n);return f.state.next((0,N._)((0,P._)({},!ee(e)||(h.isValid||d.isValid)&&t!==s.isValid?{}:{name:e},r.resolver||!e?{isValid:t}:{}),{errors:s.errors})),i.shouldFocus&&!a&&eT(n,x,e?o:l.mount),a},j=(e,t)=>{let r=(0,P._)({},o.mount?i:a);return t&&(r=function e(t,r){let s={};for(let n in t)if(t.hasOwnProperty(n)){let a=t[n],i=r[n];if(a&&F(a)&&i){let t=e(a,i);F(t)&&(s[n]=t)}else t[n]&&(s[n]=i)}return s}(t.dirtyFields?s.dirtyFields:s.touchedFields,r)),M(e)?r:ee(e)?K(r,e):e.map(e=>K(r,e))},C=(e,t)=>({invalid:!!K((t||s).errors,e),isDirty:!!K((t||s).dirtyFields,e),error:K((t||s).errors,e),isValidating:!!K(s.validatingFields,e),isTouched:!!K((t||s).touchedFields,e)}),I=(e,t,r)=>{let a=(K(n,e,{_f:{}})._f||{}).ref,i=K(s.errors,e)||{},{ref:o,message:l,type:c}=i,u=(0,U._)(i,["ref","message","type"]);H(s.errors,e,(0,N._)((0,P._)({},u,t),{ref:a})),f.state.next({name:e,errors:s.errors,isValid:!1}),r&&r.shouldFocus&&a&&a.focus&&a.focus()},L=e=>f.state.subscribe({next:t=>{let r,n,o;r=e.name,n=t.name,o=e.exact,(!r||!n||r===n||en(r).some(e=>e&&(o?e===n:e.startsWith(n)||n.startsWith(e))))&&((e,t,r,s)=>{r(e);let{name:n}=e,a=(0,U._)(e,["name"]);return ei(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(e=>t[e]===(!s||"all"))})(t,e.formState||h,et,e.reRenderRoot)&&e.callback((0,N._)((0,P._)({values:(0,P._)({},i)},s,t),{defaultValues:a}))}}).unsubscribe,z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let o of e?en(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(ec(n,o),ec(i,o)),t.keepError||ec(s.errors,o),t.keepDirty||ec(s.dirtyFields,o),t.keepTouched||ec(s.touchedFields,o),t.keepIsValidating||ec(s.validatingFields,o),r.shouldUnregister||t.keepDefaultValue||ec(a,o);f.state.next({values:q(i)}),f.state.next((0,P._)({},s,t.keepDirty?{isDirty:k()}:{})),t.keepIsValid||g()},J=e=>{let{disabled:t,name:r}=e;if("boolean"==typeof t&&o.mount||t||l.disabled.has(r)){let e=l.disabled.has(r);t?l.disabled.add(r):l.disabled.delete(r),!!t!==e&&o.mount&&!o.action&&g()}},G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=K(n,e),i="boolean"==typeof t.disabled||"boolean"==typeof r.disabled;return(H(n,e,(0,N._)((0,P._)({},s||{}),{_f:(0,P._)((0,N._)((0,P._)({},s&&s._f?s._f:{ref:{name:e}}),{name:e,mount:!0}),t)})),l.mount.add(e),s)?J({disabled:"boolean"==typeof t.disabled?t.disabled:r.disabled,name:e}):y(e,!0,t.value),(0,N._)((0,P._)({},i?{disabled:t.disabled||r.disabled}:{},r.progressive?{required:!!t.required,min:eb(t.min),max:eb(t.max),minLength:eb(t.minLength),maxLength:eb(t.maxLength),pattern:eb(t.pattern)}:{}),{name:e,onChange:O,onBlur:O,ref:i=>{if(i){let r;G(e,t),s=K(n,e);let o=M(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,l="radio"===(r=o).type||"checkbox"===r.type,c=s._f.refs||[];(l?c.find(e=>e===o):o===s._f.ref)||(H(n,e,{_f:(0,P._)({},s._f,l?{refs:[...c.filter(el),o,...Array.isArray(K(a,e))?[{}]:[]],ref:{type:o.type,name:e}}:{ref:o})}),y(e,!1,void 0,o))}else{var c;(s=K(n,e,{}))._f&&(s._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(c=l.array,!c.has(e.substring(0,e.search(/\.\d+(\.|$)/))||e)||!o.action)&&l.unMount.add(e)}}})},$=()=>r.shouldFocusError&&eT(n,x,l.mount),Y=(e,t)=>async a=>{let o;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let c=q(i);if(f.state.next({isSubmitting:!0}),r.resolver){let{errors:e,values:t}=await _();m(),s.errors=e,c=q(t)}else await w(n);if(l.disabled.size)for(let e of l.disabled)ec(c,e);if(ec(s.errors,"root"),ei(s.errors)){f.state.next({errors:{}});try{await e(c,a)}catch(e){o=e}}else t&&await t((0,P._)({},s.errors),a),$(),setTimeout($);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ei(s.errors)&&!o,submitCount:s.submitCount+1,errors:s.errors}),o)throw o},X=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=e?q(e):a,u=q(c),d=ei(e),p=d?a:u;if(t.keepDefaultValues||(a=c),!t.keepValues){if(t.keepDirtyValues)for(let e of Array.from(new Set([...l.mount,...Object.keys(ed(a,i))]))){let t=K(s.dirtyFields,e),r=K(i,e),n=K(p,e);t&&!M(r)?H(p,e,r):t||M(n)||A(e,n)}else{if(V&&M(e))for(let e of l.mount){let t=K(n,e);if(t&&t._f){let e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(eo(e)){let t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(let e of l.mount)A(e,K(p,e));else n={}}i=r.shouldUnregister?t.keepDefaultValues?q(a):{}:q(p),f.array.next({values:(0,P._)({},p)}),f.state.next({values:(0,P._)({},p)})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!t.keepIsValid||!!t.keepDirtyValues||!r.shouldUnregister&&!ei(p),o.watch=!!r.shouldUnregister,o.keepIsValid=!!t.keepIsValid,o.action=!1,t.keepErrors||(s.errors={}),f.state.next({submitCount:t.keepSubmitCount?s.submitCount:0,isDirty:!d&&(t.keepDirty?s.isDirty:!!(t.keepDefaultValues&&!er(e,a))),isSubmitted:!!t.keepIsSubmitted&&s.isSubmitted,dirtyFields:d?{}:t.keepDirtyValues?t.keepDefaultValues&&i?ed(a,i):s.dirtyFields:t.keepDefaultValues&&e?ed(a,e):t.keepDirty?s.dirtyFields:{},touchedFields:t.keepTouched?s.touchedFields:{},errors:t.keepErrors?s.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&s.isSubmitSuccessful,isSubmitting:!1,defaultValues:a})},Q=(e,t)=>X(W(e)?e(i):e,(0,P._)({},r.resetOptions,t)),et=e=>{s=(0,P._)({},s,e)},es={control:{register:G,unregister:z,getFieldState:C,handleSubmit:Y,setError:I,_subscribe:L,_runSchema:_,_updateIsValidating:m,_focusError:$,_getWatch:S,_getDirty:k,_setValid:g,_setFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,u=!(arguments.length>4)||void 0===arguments[4]||arguments[4],p=!(arguments.length>5)||void 0===arguments[5]||arguments[5];if(c&&l&&!r.disabled){if(o.action=!0,p&&Array.isArray(K(n,e))){let t=l(K(n,e),c.argA,c.argB);u&&H(n,e,t)}if(p&&Array.isArray(K(s.errors,e))){let t,r=l(K(s.errors,e),c.argA,c.argB);u&&H(s.errors,e,r),Z(K(t=s.errors,e)).length||ec(t,e)}if((h.touchedFields||d.touchedFields)&&p&&Array.isArray(K(s.touchedFields,e))){let t=l(K(s.touchedFields,e),c.argA,c.argB);u&&H(s.touchedFields,e,t)}(h.dirtyFields||d.dirtyFields)&&(s.dirtyFields=ed(a,i)),f.state.next({name:e,isDirty:k(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else H(i,e,t)},_setDisabledField:J,_setErrors:e=>{s.errors=e,f.state.next({errors:s.errors,isValid:!1})},_getFieldArray:e=>Z(K(o.mount?i:a,e,r.shouldUnregister?K(a,e,[]):[])),_reset:X,_resetDefaultValues:()=>W(r.defaultValues)&&r.defaultValues().then(e=>{Q(e,r.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(let e of l.unMount){let t=K(n,e);t&&(t._f.refs?t._f.refs.every(e=>!el(e)):!el(t._f.ref))&&z(e)}l.unMount=new Set},_disableForm:e=>{"boolean"==typeof e&&(f.state.next({disabled:e}),eT(n,(t,r)=>{let s=K(n,r);s&&(t.disabled=s._f.disabled||e,Array.isArray(s._f.refs)&&s._f.refs.forEach(t=>{t.disabled=s._f.disabled||e}))},0,!1))},_subjects:f,_proxyFormState:h,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(value){o=value},get _defaultValues(){return a},get _names(){return l},set _names(value){l=value},get _formState(){return s},get _options(){return r},set _options(value){r=(0,P._)({},r,value)}},subscribe:e=>(o.mount=!0,d=(0,P._)({},d,e.formState),L((0,N._)((0,P._)({},e),{formState:(0,P._)({},u,e.formState)}))),trigger:R,register:G,handleSubmit:Y,watch:(e,t)=>W(e)?f.state.subscribe({next:r=>"values"in r&&e(S(void 0,t),r)}):S(e,t,!0),setValue:A,getValues:j,reset:Q,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K(n,e)&&(M(t.defaultValue)?A(e,q(K(a,e))):(A(e,t.defaultValue),H(a,e,q(t.defaultValue))),t.keepTouched||ec(s.touchedFields,e),t.keepDirty||(ec(s.dirtyFields,e),s.isDirty=t.defaultValue?k(e,q(K(a,e))):k()),!t.keepError&&(ec(s.errors,e),h.isValid&&g()),f.state.next((0,P._)({},s)))},clearErrors:e=>{let t=e?en(e):void 0;null==t||t.forEach(e=>ec(s.errors,e)),t?t.forEach(e=>{f.state.next({name:e,errors:s.errors})}):f.state.next({errors:{}})},unregister:z,setError:I,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=K(n,e),s=r&&r._f;if(s){let e=s.refs?s.refs[0]:s.ref;e.focus&&setTimeout(()=>{e.focus(),t.shouldSelect&&W(e.select)&&e.select()})}},getFieldState:C};return(0,N._)((0,P._)({},es),{formControl:es})}(e),{formControl:n}=r,a=(0,U._)(r,["formControl"]);t.current=(0,N._)((0,P._)({},a),{formState:s})}let a=t.current.control;return a._options=e,Q(()=>{let e=a._subscribe({formState:a._proxyFormState,callback:()=>n((0,P._)({},a._formState)),reRenderRoot:!0});return n(e=>(0,N._)((0,P._)({},e),{isReady:!0})),a._formState.isReady=!0,e},[a]),L.default.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),L.default.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),L.default.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),L.default.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),L.default.useEffect(()=>{if(a._proxyFormState.isDirty){let e=a._getDirty();e!==s.isDirty&&a._subjects.state.next({isDirty:e})}},[a,s.isDirty]),L.default.useEffect(()=>{var t;e.values&&!er(e.values,r.current)?(a._reset(e.values,(0,P._)({keepFieldsRef:!0},a._options.resetOptions)),(null==(t=a._options.resetOptions)?void 0:t.keepIsValid)||a._setValid(),r.current=e.values,n(e=>(0,P._)({},e))):a._resetDefaultValues()},[a,e.values]),L.default.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next((0,P._)({},a._formState))),a._removeUnmounted()}),t.current.formState=L.default.useMemo(()=>X(s,a),[a,s]),t.current}e.s(["appendErrors",()=>es,"get",()=>K,"set",()=>H,"useForm",()=>eI],22233);let eP=(e,t,r)=>{if(e&&"reportValidity"in e){let s=K(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},eN=(e,t)=>{for(let r in t.fields){let s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?eP(s.ref,r,e):s.refs&&s.refs.forEach(t=>eP(t,r,e))}},eU=(e,t)=>e.some(e=>e.startsWith(t+"."));var eL=function(e,t){for(var r={};e.length;){var s=e[0],n=s.code,a=s.message,i=s.path.join(".");if(!r[i])if("unionErrors"in s){var o=s.unionErrors[0].errors[0];r[i]={message:o.message,type:o.code}}else r[i]={message:a,type:n};if("unionErrors"in s&&s.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=r[i].types,c=l&&l[s.code];r[i]=es(i,t,r,n,c?[].concat(c,s.message):s.message)}e.shift()}return r},eD=function(e,t,r){return void 0===r&&(r={}),function(s,n,a){try{return Promise.resolve(function(n,i){try{var o=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](s,t)).then(function(e){return a.shouldUseNativeValidation&&eN({},a),{errors:{},values:r.raw?s:e}})}catch(e){return i(e)}return o&&o.then?o.then(void 0,i):o}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:((e,t)=>{t.shouldUseNativeValidation&&eN(e,t);let r={};for(let s in e){let n=K(t.fields,s),a=Object.assign(e[s]||{},{ref:n&&n.ref});if(eU(t.names||Object.keys(e),s)){let e=Object.assign({},K(r,s));H(e,"root",a),H(r,s,e)}else H(r,s,a)}return r})(eL(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};throw e}))}catch(e){return Promise.reject(e)}}};e.s(["zodResolver",()=>eD],43217);var eB=e.i(37501);let eF=(0,eB.default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>eF],70718);let eV=(0,eB.default)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);e.s(["EyeOff",()=>eV],78600);var eq=e.i(12174);class eM extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class eZ extends eM{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ez extends eM{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class eK extends eM{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(n=y||(y={})).Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2";function eW(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)0>t.indexOf(s[n])&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}"function"==typeof SuppressedError&&SuppressedError;class eH{setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){var t,r,s,n;return t=this,r=arguments,s=void 0,n=function*(e){var t;let r,s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a,{headers:i,method:o,body:l,signal:c,timeout:u}=n,h={},{region:d}=n;d||(d=this.region);let f=new URL("".concat(this.url,"/").concat(e));d&&"any"!==d&&(h["x-region"]=d,f.searchParams.set("forceFunctionRegion",d)),l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?"u">typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",a=l):"string"==typeof l?(h["Content-Type"]="text/plain",a=l):"u">typeof FormData&&l instanceof FormData?a=l:(h["Content-Type"]="application/json",a=JSON.stringify(l)):a=!l||"string"==typeof l||"u">typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer||"u">typeof FormData&&l instanceof FormData?l:JSON.stringify(l);let p=c;u&&(s=new AbortController,r=setTimeout(()=>s.abort(),u),c?(p=s.signal,c.addEventListener("abort",()=>s.abort())):p=s.signal);let g=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),i),body:a,signal:p}).catch(e=>{throw new eZ(e)}),m=g.headers.get("x-relay-error");if(m&&"true"===m)throw new ez(g);if(!g.ok)throw new eK(g);let y=(null!=(t=g.headers.get("Content-Type"))?t:"text/plain").split(";")[0].trim();return{data:"application/json"===y?yield g.json():"application/octet-stream"===y||"application/pdf"===y?yield g.blob():"text/event-stream"===y?g:"multipart/form-data"===y?yield g.formData():yield g.text(),error:null,response:g}}catch(e){return{data:null,error:e,response:e instanceof eK||e instanceof ez?e.context:void 0}}finally{r&&clearTimeout(r)}},new(s||(s=Promise))(function(e,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof s?r:new s(function(e){e(r)})).then(i,o)}l((n=n.apply(t,r||[])).next())})}constructor(e,{headers:t={},customFetch:r,region:s=y.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=(e=>e?function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];return e(...r)}:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fetch(...t)})(r)}}var eJ=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},eG=class{throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,n,a;let i=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==r.method){let t=await e.text();""===t||(o="text/csv"===r.headers.get("Accept")||r.headers.get("Accept")&&(null==(n=r.headers.get("Accept"))?void 0:n.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}let a=null==(t=r.headers.get("Prefer"))?void 0:t.match(/count=(exact|planned|estimated)/),h=null==(s=e.headers.get("content-range"))?void 0:s.split("/");a&&h&&h.length>1&&(l=parseInt(h[1])),r.isMaybeSingle&&"GET"===r.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{let t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,u="OK")}catch(r){404===e.status&&""===t?(c=204,u="No Content"):i={message:t}}if(i&&r.isMaybeSingle&&(null==i||null==(a=i.details)?void 0:a.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&r.shouldThrowOnError)throw new eJ(i)}return{error:i,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,r,s,n,a,i;let o="",l="",c="",u=null==e?void 0:e.cause;if(u){let t=null!=(r=null==u?void 0:u.message)?r:"",i=null!=(s=null==u?void 0:u.code)?s:"";o="".concat(null!=(n=null==e?void 0:e.name)?n:"FetchError",": ").concat(null==e?void 0:e.message)+"\n\nCaused by: ".concat(null!=(a=null==u?void 0:u.name)?a:"Error",": ").concat(t),i&&(o+=" (".concat(i,")")),(null==u?void 0:u.stack)&&(o+="\n".concat(u.stack))}else o=null!=(i=null==e?void 0:e.stack)?i:"";let h=this.url.toString().length;return(null==e?void 0:e.name)==="AbortError"||(null==e?void 0:e.code)==="ABORT_ERR"?(c="",l="Request was aborted (timeout or manual cancellation)",h>this.urlLengthLimit&&(l+=". Note: Your request URL is ".concat(h," characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side."))):((null==u?void 0:u.name)==="HeadersOverflowError"||(null==u?void 0:u.code)==="UND_ERR_HEADERS_OVERFLOW")&&(c="",l="HTTP headers exceeded server limits (typically 16KB)",h>this.urlLengthLimit&&(l+=". Your request URL is ".concat(h," characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead."))),{error:{message:"".concat(null!=(t=null==e?void 0:e.name)?t:"FetchError",": ").concat(null==e?void 0:e.message),details:o,hint:l,code:c},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}constructor(e){var t,r,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!=(t=e.shouldThrowOnError)&&t,this.signal=e.signal,this.isMaybeSingle=null!=(r=e.isMaybeSingle)&&r,this.urlLengthLimit=null!=(s=e.urlLengthLimit)?s:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}},e$=class extends eG{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n?"".concat(n,".order"):"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===r?"":r?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.url.searchParams.set(void 0===r?"limit":"".concat(r,".limit"),"".concat(e)),this}range(e,t){let{foreignTable:r,referencedTable:s=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=void 0===s?"offset":"".concat(s,".offset"),a=void 0===s?"limit":"".concat(s,".limit");return this.url.searchParams.set(n,"".concat(e)),this.url.searchParams.set(a,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){var e;let{analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:a=!1,format:i="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=[t?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!=(e=this.headers.get("Accept"))?e:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(i,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}};let eY=RegExp("[,()]");var eX=class extends e${eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}regexMatch(e,t){return this.url.searchParams.append(e,"match.".concat(t)),this}regexIMatch(e,t){return this.url.searchParams.append(e,"imatch.".concat(t)),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}isDistinct(e,t){return this.url.searchParams.append(e,"isdistinct.".concat(t)),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&eY.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}notIn(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&eY.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"not.in.(".concat(r,")")),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="";return"plain"===s?n="pl":"phrase"===s?n="ph":"websearch"===s&&(n="w"),this.url.searchParams.append(e,"".concat(n,"fts").concat(void 0===r?"":"(".concat(r,")"),".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,"eq.".concat(r))}),this}not(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.url.searchParams.append(r?"".concat(r,".or"):"or","(".concat(e,")")),this}filter(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}},eQ=class{cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:r=!1,count:s}=null!=t?t:{},n=!1,a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join(""),{url:i,headers:o}=this.cloneRequestState();return i.searchParams.set("select",a),s&&o.append("Prefer","count=".concat(s)),new eX({method:r?"HEAD":"GET",url:i,headers:o,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e){var t;let{count:r,defaultToNull:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{url:n,headers:a}=this.cloneRequestState();if(r&&a.append("Prefer","count=".concat(r)),s||a.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>'"'.concat(e,'"'));n.searchParams.set("columns",e.join(","))}}return new eX({method:"POST",url:n,headers:a,schema:this.schema,body:e,fetch:null!=(t=this.fetch)?t:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e){var t;let{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{url:i,headers:o}=this.cloneRequestState();if(o.append("Prefer","resolution=".concat(s?"ignore":"merge","-duplicates")),void 0!==r&&i.searchParams.set("on_conflict",r),n&&o.append("Prefer","count=".concat(n)),a||o.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>'"'.concat(e,'"'));i.searchParams.set("columns",e.join(","))}}return new eX({method:"POST",url:i,headers:o,schema:this.schema,body:e,fetch:null!=(t=this.fetch)?t:fetch,urlLengthLimit:this.urlLengthLimit})}update(e){var t;let{count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{url:s,headers:n}=this.cloneRequestState();return r&&n.append("Prefer","count=".concat(r)),new eX({method:"PATCH",url:s,headers:n,schema:this.schema,body:e,fetch:null!=(t=this.fetch)?t:fetch,urlLengthLimit:this.urlLengthLimit})}delete(){var e;let{count:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{url:r,headers:s}=this.cloneRequestState();return t&&s.append("Prefer","count=".concat(t)),new eX({method:"DELETE",url:r,headers:s,schema:this.schema,fetch:null!=(e=this.fetch)?e:fetch,urlLengthLimit:this.urlLengthLimit})}constructor(e,{headers:t={},schema:r,fetch:s,urlLengthLimit:n=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s,this.urlLengthLimit=n}};function e0(e){return(e0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function e2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e1(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=e0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=e0(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==e0(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e5=class e{from(e){if(!e||"string"!=typeof e||""===e.trim())throw Error("Invalid relation name: relation must be a non-empty string.");return new eQ(new URL("".concat(this.url,"/").concat(e)),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e){var t;let r,s,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:a=!1,get:i=!1,count:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=new URL("".concat(this.url,"/rpc/").concat(e)),c=e=>null!==e&&"object"==typeof e&&(!Array.isArray(e)||e.some(c)),u=a&&Object.values(n).some(c);u?(r="POST",s=n):a||i?(r=a?"HEAD":"GET",Object.entries(n).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?"{".concat(r.join(","),"}"):"".concat(r)]}).forEach(e=>{let[t,r]=e;l.searchParams.append(t,r)})):(r="POST",s=n);let h=new Headers(this.headers);return u?h.set("Prefer",o?"count=".concat(o,",return=minimal"):"return=minimal"):o&&h.set("Prefer","count=".concat(o)),new eX({method:r,url:l,headers:h,schema:this.schemaName,body:s,fetch:null!=(t=this.fetch)?t:fetch,urlLengthLimit:this.urlLengthLimit})}constructor(e,{headers:t={},schema:r,fetch:s,timeout:n,urlLengthLimit:a=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.urlLengthLimit=a;const i=null!=s?s:globalThis.fetch;void 0!==n&&n>0?this.fetch=(e,t)=>{let r=new AbortController,s=setTimeout(()=>r.abort(),n),a=null==t?void 0:t.signal;if(a){if(a.aborted)return clearTimeout(s),i(e,t);let n=()=>{clearTimeout(s),r.abort()};return a.addEventListener("abort",n,{once:!0}),i(e,e2(e2({},t),{},{signal:r.signal})).finally(()=>{clearTimeout(s),a.removeEventListener("abort",n)})}return i(e,e2(e2({},t),{},{signal:r.signal})).finally(()=>clearTimeout(s))}:this.fetch=i}};let e4=class{static detectEnvironment(){var t;if("u">typeof WebSocket)return{type:"native",constructor:WebSocket};if("u">typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==e.g.WebSocket)return{type:"native",constructor:e.g.WebSocket};if("u">typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("u">typeof globalThis&&globalThis.EdgeRuntime||"u">typeof navigator&&(null==(t=navigator.userAgent)?void 0:t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let r=globalThis.process;if(r){let e=r.versions;if(e&&e.node){let t=parseInt(e.node.replace(/^v/,"").split(".")[0]);return t>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(t," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(t," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},e8="realtime-js/".concat("2.97.0"),e6="2.0.0";(a=v||(v={}))[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed",(i=_||(_={})).closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving",(o=b||(b={})).close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token",(w||(w={})).websocket="websocket",(l=k||(k={})).Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed";class e3{encode(e,t){return e.event!==this.BROADCAST_EVENT||e.payload instanceof ArrayBuffer||"string"!=typeof e.payload.event?t(JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload])):t(this._binaryEncodeUserBroadcastPush(e))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null==(t=e.payload)?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;let s=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,r;let s=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:{},n=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,n)}_encodeUserBroadcastPush(e,t,r){let s=e.topic,n=null!=(f=e.ref)?f:"",a=null!=(p=e.join_ref)?p:"",i=e.payload.event,o=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},l=0===Object.keys(o).length?"":JSON.stringify(o);if(a.length>255)throw Error("joinRef length ".concat(a.length," exceeds maximum of 255"));if(n.length>255)throw Error("ref length ".concat(n.length," exceeds maximum of 255"));if(s.length>255)throw Error("topic length ".concat(s.length," exceeds maximum of 255"));if(i.length>255)throw Error("userEvent length ".concat(i.length," exceeds maximum of 255"));if(l.length>255)throw Error("metadata length ".concat(l.length," exceeds maximum of 255"));let c=this.USER_BROADCAST_PUSH_META_LENGTH+a.length+n.length+s.length+i.length+l.length,u=new ArrayBuffer(this.HEADER_LENGTH+c),h=new DataView(u),d=0;h.setUint8(d++,this.KINDS.userBroadcastPush),h.setUint8(d++,a.length),h.setUint8(d++,n.length),h.setUint8(d++,s.length),h.setUint8(d++,i.length),h.setUint8(d++,l.length),h.setUint8(d++,t),Array.from(a,e=>h.setUint8(d++,e.charCodeAt(0))),Array.from(n,e=>h.setUint8(d++,e.charCodeAt(0))),Array.from(s,e=>h.setUint8(d++,e.charCodeAt(0))),Array.from(i,e=>h.setUint8(d++,e.charCodeAt(0))),Array.from(l,e=>h.setUint8(d++,e.charCodeAt(0)));var f,p,g=new Uint8Array(u.byteLength+r.byteLength);return g.set(new Uint8Array(u),0),g.set(new Uint8Array(r),u.byteLength),g.buffer}decode(e,t){if(this._isArrayBuffer(e))return t(this._binaryDecode(e));if("string"==typeof e){let[r,s,n,a,i]=JSON.parse(e);return t({join_ref:r,ref:s,topic:n,event:a,payload:i})}return t({})}_binaryDecode(e){let t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,s)}_decodeUserBroadcast(e,t,r){let s=t.getUint8(1),n=t.getUint8(2),a=t.getUint8(3),i=t.getUint8(4),o=this.HEADER_LENGTH+4,l=r.decode(e.slice(o,o+s));o+=s;let c=r.decode(e.slice(o,o+n));o+=n;let u=r.decode(e.slice(o,o+a));o+=a;let h=e.slice(o,e.byteLength),d=i===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,f={type:this.BROADCAST_EVENT,event:c,payload:d};return a>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||(null==(t=null==e?void 0:e.constructor)?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(e=>{let[r]=e;return t.includes(r)})):{}}constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}}class e9{reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}}(c=S||(S={})).abstime="abstime",c.bool="bool",c.date="date",c.daterange="daterange",c.float4="float4",c.float8="float8",c.int2="int2",c.int4="int4",c.int4range="int4range",c.int8="int8",c.int8range="int8range",c.json="json",c.jsonb="jsonb",c.money="money",c.numeric="numeric",c.oid="oid",c.reltime="reltime",c.text="text",c.time="time",c.timestamp="timestamp",c.timestamptz="timestamptz",c.timetz="timetz",c.tsrange="tsrange",c.tstzrange="tstzrange";let e7=function(e,t){var r;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=null!=(r=s.skipTypes)?r:[];return t?Object.keys(t).reduce((r,s)=>(r[s]=te(s,e,t,n),r),{}):{}},te=(e,t,r,s)=>{let n=t.find(t=>t.name===e),a=null==n?void 0:n.type,i=r[e];return a&&!s.includes(a)?tt(a,i):tr(i)},tt=(e,t)=>{if("_"===e.charAt(0))return ti(t,e.slice(1,e.length));switch(e){case S.bool:return ts(t);case S.float4:case S.float8:case S.int2:case S.int4:case S.int8:case S.numeric:case S.oid:return tn(t);case S.json:case S.jsonb:return ta(t);case S.timestamp:return to(t);case S.abstime:case S.date:case S.daterange:case S.int4range:case S.int8range:case S.money:case S.reltime:case S.text:case S.time:case S.timestamptz:case S.timetz:case S.tsrange:case S.tstzrange:default:return tr(t)}},tr=e=>e,ts=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},tn=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ta=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e},ti=(e,t)=>{if("string"!=typeof e)return e;let r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s,n=e.slice(1,r);try{s=JSON.parse("["+n+"]")}catch(e){s=n?n.split(","):[]}return s.map(e=>tt(t,e))}return e},to=e=>"string"==typeof e?e.replace(" ","T"):e,tl=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class tc{resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null==(r=this.receivedResp)?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}constructor(e,t,r={},s=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}}(u=E||(E={})).SYNC="sync",u.JOIN="join",u.LEAVE="leave";class tu{static syncState(e,t,r,s){let n=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(n,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{let r=n[e];if(r){let s=t.map(e=>e.presence_ref),n=r.map(e=>e.presence_ref),a=t.filter(e=>0>n.indexOf(e.presence_ref)),l=r.filter(e=>0>s.indexOf(e.presence_ref));a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(n,{joins:i,leaves:o},r,s)}static syncDiff(e,t,r,s){let{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(n,(t,s)=>{var n;let a=null!=(n=e[t])?n:[];if(e[t]=this.cloneDeep(s),a.length>0){let r=e[t].map(e=>e.presence_ref),s=a.filter(e=>0>r.indexOf(e.presence_ref));e[t].unshift(...s)}r(t,a,s)}),this.map(a,(t,r)=>{let n=e[t];if(!n)return;let a=r.map(e=>e.presence_ref);n=n.filter(e=>0>a.indexOf(e.presence_ref)),e[t]=n,s(t,n,r),0===n.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let s=e[r];return"metas"in s?t[r]=s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{let{onJoin:t,onLeave:r,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tu.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=tu.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},e=>{let{onJoin:t,onLeave:r,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=tu.syncDiff(this.state,e,t,r),s())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}}(h=T||(T={})).ALL="*",h.INSERT="INSERT",h.UPDATE="UPDATE",h.DELETE="DELETE",(d=A||(A={})).BROADCAST="broadcast",d.PRESENCE="presence",d.POSTGRES_CHANGES="postgres_changes",d.SYSTEM="system",(f=O||(O={})).SUBSCRIBED="SUBSCRIBED",f.TIMED_OUT="TIMED_OUT",f.CLOSED="CLOSED",f.CHANNEL_ERROR="CHANNEL_ERROR";class th{subscribe(e){var t,r,s;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;if(this.socket.isConnected()||this.socket.connect(),this.state==_.closed){let{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!=(r=null==(t=this.bindings.postgres_changes)?void 0:t.map(e=>e.filter))?r:[],c=!!this.bindings[A.PRESENCE]&&this.bindings[A.PRESENCE].length>0||(null==(s=this.params.config.presence)?void 0:s.enabled)===!0,u={},h={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(O.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(O.CLOSED)),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async t=>{var r;let{postgres_changes:s}=t;if(this.socket._isManualToken()||this.socket.setAuth(),void 0===s){null==e||e(O.SUBSCRIBED);return}{let t=this.bindings.postgres_changes,n=null!=(r=null==t?void 0:t.length)?r:0,a=[];for(let r=0;r<n;r++){let n=t[r],{filter:{event:i,schema:o,table:l,filter:c}}=n,u=s&&s[r];if(u&&u.event===i&&th.isFilterValueEqual(u.schema,o)&&th.isFilterValueEqual(u.table,l)&&th.isFilterValueEqual(u.filter,c))a.push(Object.assign(Object.assign({},n),{id:u.id}));else{this.unsubscribe(),this.state=_.errored,null==e||e(O.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=a,e&&e(O.SUBSCRIBED);return}}).receive("error",t=>{this.state=_.errored,null==e||e(O.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(O.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===_.joined&&e===A.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t){var r;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t)return Promise.reject("Payload is required for httpSend()");let n={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(n.Authorization="Bearer ".concat(this.socket.accessTokenValue));let a={method:"POST",headers:n,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!=(r=s.timeout)?r:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{let e=await i.json();o=e.error||e.message||o}catch(e){}return Promise.reject(Error(o))}async send(e){var t,r;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._canPush()||"broadcast"!==e.type)return new Promise(t=>{var r,n,a;let i=this._push(e.type,e,s.timeout||this.timeout);"broadcast"!==e.type||(null==(a=null==(n=null==(r=this.params)?void 0:r.config)?void 0:n.broadcast)?void 0:a.ack)||t("ok"),i.receive("ok",()=>t("ok")),i.receive("error",()=>t("error")),i.receive("timeout",()=>t("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:n,payload:a}=e,i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization="Bearer ".concat(this.socket.accessTokenValue));let o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!=(t=s.timeout)?t:this.timeout);return await (null==(r=e.body)?void 0:r.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=_.leaving;let t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(b.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{(r=new tc(this,b.leave,{},e)).receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){let s=new AbortController,n=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(n),a}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let s=new tc(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,n;let a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=b;if(r&&[i,o,l,c].indexOf(a)>=0&&r!==this._joinRef())return;let u=this._onMessage(a,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null==(s=this.bindings.postgres_changes)||s.filter(e=>{var t,r,s;return(null==(t=e.filter)?void 0:t.event)==="*"||(null==(s=null==(r=e.filter)?void 0:r.event)?void 0:s.toLocaleLowerCase())===a}).map(e=>e.callback(u,r)):null==(n=this.bindings[a])||n.filter(e=>{var r,s,n,i,o,l;if(!["broadcast","presence","postgres_changes"].includes(a))return e.type.toLocaleLowerCase()===a;if("id"in e){let a=e.id,i=null==(r=e.filter)?void 0:r.event;return a&&(null==(s=t.ids)?void 0:s.includes(a))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null==(n=t.data)?void 0:n.type.toLocaleLowerCase()))}{let r=null==(o=null==(i=null==e?void 0:e.filter)?void 0:i.event)?void 0:o.toLocaleLowerCase();return"*"===r||r===(null==(l=null==t?void 0:t.event)?void 0:l.toLocaleLowerCase())}}).map(e=>{if("object"==typeof u&&"ids"in u){let e=u.data,{schema:t,table:r,commit_timestamp:s,type:n,errors:a}=e;u=Object.assign(Object.assign({},{schema:t,table:r,commit_timestamp:s,eventType:n,new:{},old:{},errors:a}),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===_.closed}_isJoined(){return this.state===_.joined}_isJoining(){return this.state===_.joining}_isLeaving(){return this.state===_.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,r){let s=e.toLocaleLowerCase(),n={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var s;return!((null==(s=e.type)?void 0:s.toLocaleLowerCase())===r&&th.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(null!=e?e:void 0)===(null!=t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(b.close,{},e)}_onError(e){this._on(b.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=e7(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=e7(e.columns,e.old_record)),t}constructor(e,t={config:{}},r){var s,n;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=_.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new tc(this,b.join,this.params,this.timeout),this.rejoinTimer=new e9(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=_.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=_.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=_.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=_.errored,this.rejoinTimer.scheduleTimeout())}),this._on(b.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new tu(this),this.broadcastEndpointURL=tl(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(n=null==(s=this.params.config)?void 0:s.broadcast)?void 0:n.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}}let td=()=>{},tf=[1e3,2e3,5e3,1e4];class tp{connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=e4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;if(e.includes("Node.js"))throw Error("".concat(e,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw Error("WebSocket not available: ".concat(e))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case v.connecting:return k.Connecting;case v.open:return k.Open;case v.closing:return k.Closing;default:return k.Closed}}isConnected(){return this.connectionState()===k.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r="realtime:".concat(e),s=this.getChannels().find(e=>e.topic===r);if(s)return s;{let r=new th("realtime:".concat(e),t,this);return this.channels.push(r),r}}push(e){let{topic:t,event:r,payload:s,ref:n}=e,a=()=>{this.encode(e,e=>{var t;null==(t=this.conn)||t.send(e)})};this.log("push","".concat(t," ").concat(r," (").concat(n,")"),s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,null==(e=this.conn)||e.close(1e3,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||null==(e=this.reconnectTimer)||e.scheduleTimeout()},100);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event&&e.ref&&e.ref===this.pendingHeartbeatRef){let t=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error",t)}catch(e){this.log("error","error in heartbeat callback",e)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:t,event:r,payload:s,ref:n}=e,a=s.status||"";this.log("receive","".concat(a," ").concat(t," ").concat(r," ").concat(n?"(".concat(n,")"):"").trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,n)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null==(t=this.reconnectTimer)||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===v.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===v.open||this.conn.readyState===v.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(t=this.reconnectTimer)||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(e){this.log("error","error in heartbeat callback",e)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(b.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return"".concat(e).concat(r).concat(s)}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=!1;if(t)e=t,r=!0;else if(this.accessToken)try{e=await this.accessToken()}catch(t){this.log("error","Error fetching access token from callback",t),e=this.accessTokenValue}else e=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{let r={access_token:e,version:e8};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push(b.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this._isManualToken()||this.setAuth().catch(t=>{this.log("error","Error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(t){this.log("error","error in ".concat(e," callback"),t)}})}catch(t){this.log("error","error triggering ".concat(e," callbacks"),t)}}_setupReconnectionTimer(){this.reconnectTimer=new e9(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,n,a,i,o,l,c,u,h,d;switch(this.transport=null!=(t=null==e?void 0:e.transport)?t:null,this.timeout=null!=(r=null==e?void 0:e.timeout)?r:1e4,this.heartbeatIntervalMs=null!=(s=null==e?void 0:e.heartbeatIntervalMs)?s:25e3,this.worker=null!=(n=null==e?void 0:e.worker)&&n,this.accessToken=null!=(a=null==e?void 0:e.accessToken)?a:null,this.heartbeatCallback=null!=(i=null==e?void 0:e.heartbeatCallback)?i:td,this.vsn=null!=(o=null==e?void 0:e.vsn)?o:e6,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(l=null==e?void 0:e.reconnectAfterMs)?l:e=>tf[e-1]||1e4,this.vsn){case"1.0.0":this.encode=null!=(c=null==e?void 0:e.encode)?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!=(u=null==e?void 0:e.decode)?u:(e,t)=>t(JSON.parse(e));break;case e6:this.encode=null!=(h=null==e?void 0:e.encode)?h:this.serializer.encode.bind(this.serializer),this.decode=null!=(d=null==e?void 0:e.decode)?d:this.serializer.decode.bind(this.serializer);break;default:throw Error("Unsupported serializer version: ".concat(this.vsn))}if(this.worker){if("u">typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=td,this.ref=0,this.reconnectTimer=null,this.vsn=e6,this.logger=td,this.conn=null,this.sendBuffer=[],this.serializer=new e3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=e=>e?function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];return e(...r)}:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fetch(...t)},!(null==(r=null==t?void 0:t.params)?void 0:r.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(w.websocket),this.httpEndpoint=tl(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}}var tg=e.i(61527),tm=class extends Error{isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&(null==(r=t.icebergType)?void 0:r.includes("CommitState"))===!0}};async function ty(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:"Bearer ".concat(e.token)}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}function tv(e){return e.join("\x1f")}var t_=class{async listNamespaces(e){let t=e?{parent:tv(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces"),query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){let r={namespace:e.namespace,properties:null==t?void 0:t.properties};return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces"),body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(tv(e.namespace))})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(tv(e.namespace))})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(tv(e.namespace))}),!0}catch(e){if(e instanceof tm&&404===e.status)return!1;throw e}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(e){if(e instanceof tm&&409===e.status)return;throw e}}constructor(e,t=""){this.client=e,this.prefix=t}};function tb(e){return e.join("\x1f")}var tw=class{async listTables(e){return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(tb(e.namespace),"/tables")})).data.identifiers}async createTable(e,t){let r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(tb(e.namespace),"/tables"),body:t,headers:r})).data.metadata}async updateTable(e,t){let r=await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(tb(e.namespace),"/tables/").concat(e.name),body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){var r;await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(tb(e.namespace),"/tables/").concat(e.name),query:{purgeRequested:String(null!=(r=null==t?void 0:t.purge)&&r)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(tb(e.namespace),"/tables/").concat(e.name),headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(tb(e.namespace),"/tables/").concat(e.name),headers:t}),!0}catch(e){if(e instanceof tm&&404===e.status)return!1;throw e}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof tm&&409===r.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}},tk=class{async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}constructor(e){var t;let r="v1";e.catalogName&&(r+="/".concat(e.catalogName));const s=e.baseUrl.endsWith("/")?e.baseUrl:"".concat(e.baseUrl,"/");this.client=function(e){var t;let r=null!=(t=e.fetchImpl)?t:globalThis.fetch;return{async request(t){let{method:s,path:n,query:a,body:i,headers:o}=t,l=function(e,t,r){let s=new URL(t,e);if(r)for(let[e,t]of Object.entries(r))void 0!==t&&s.searchParams.set(e,t);return s.toString()}(e.baseUrl,n,a),c=await ty(e.auth),u=await r(l,{method:s,headers:(0,P._)({},i?{"Content-Type":"application/json"}:{},c,o),body:i?JSON.stringify(i):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&h?JSON.parse(h):h;if(!u.ok){var p;let e=d?f:void 0,t=null==e?void 0:e.error;throw new tm(null!=(p=null==t?void 0:t.message)?p:"Request failed with status ".concat(u.status),{status:u.status,icebergType:null==t?void 0:t.type,icebergCode:null==t?void 0:t.code,details:e})}return{status:u.status,headers:u.headers,data:f}}}}({baseUrl:s,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=null==(t=e.accessDelegation)?void 0:t.join(","),this.namespaceOps=new t_(this.client,r),this.tableOps=new tw(this.client,r,this.accessDelegation)}},tS=class extends Error{constructor(e,t="storage",r,s){super(e),this.__isStorageError=!0,this.namespace=t,this.name="vectors"===t?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=s}};function tE(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var tT=class extends tS{toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}constructor(e,t,r,s="storage"){super(e,s,t,r),this.name="vectors"===s?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}},tA=class extends tS{constructor(e,t,r="storage"){super(e,r),this.name="vectors"===r?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};let tO=e=>{if(Array.isArray(e))return e.map(e=>tO(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(e=>{let[r,s]=e;t[r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=tO(s)}),t};function tx(e){return(tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function tj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tR(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=tx(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=tx(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==tx(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let tC=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null==(t=e.error)?void 0:t.message)||JSON.stringify(e)},tI=async(e,t,r,s)=>{if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){let r=e.status||500;"function"==typeof e.json?e.json().then(e=>{let n=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new tT(tC(e),r,n,s))}).catch(()=>{t(new tT(e.statusText||"HTTP ".concat(r," error"),r,r+"",s))}):t(new tT(e.statusText||"HTTP ".concat(r," error"),r,r+"",s))}else t(new tA(tC(e),e,s))};async function tP(e,t,r,s,n,a,i){return new Promise((o,l)=>{let c;e(r,(c={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t||"HEAD"===t||!a||((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(a)?(c.headers=tj({"Content-Type":"application/json"},null==s?void 0:s.headers),c.body=JSON.stringify(a)):c.body=a,(null==s?void 0:s.duplex)&&(c.duplex=s.duplex)),tj(tj({},c),n))).then(e=>{if(!e.ok)throw e;if(null==s?void 0:s.noResolveJson)return e;if("vectors"===i){let t=e.headers.get("content-type");if("0"===e.headers.get("content-length")||204===e.status||!t||!t.includes("application/json"))return{}}return e.json()}).then(e=>o(e)).catch(e=>tI(e,l,s,i))})}function tN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"storage";return{get:async(t,r,s,n)=>tP(t,"GET",r,s,n,void 0,e),post:async(t,r,s,n,a)=>tP(t,"POST",r,n,a,s,e),put:async(t,r,s,n,a)=>tP(t,"PUT",r,n,a,s,e),head:async(t,r,s,n)=>tP(t,"HEAD",r,tj(tj({},s),{},{noResolveJson:!0}),n,void 0,e),remove:async(t,r,s,n,a)=>tP(t,"DELETE",r,n,a,s,e)}}let{get:tU,post:tL,put:tD,head:tB,remove:tF}=tN("storage"),tV=tN("vectors");var tq=class{throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=tj(tj({},this.headers),{},{[e]:t}),this}async handleOperation(e){try{return{data:await e(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tE(e))return{data:null,error:e};throw e}}constructor(e,t={},r,s="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=(e=>e?function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];return e(...r)}:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fetch(...t)})(r),this.namespace=s}},tM=class{then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tE(e))return{data:null,error:e};throw e}}constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}};t=Symbol.toStringTag;var tZ=class{asStream(){return new tM(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await (await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tE(e))return{data:null,error:e};throw e}}constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[t]="BlobDownloadBuilder",this.promise=null}};let tz={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tK={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var tW=class extends tq{async uploadOrUpdate(e,t,r,s){var n=this;return n.handleOperation(async()=>{let a,i=tj(tj({},tK),s),o=tj(tj({},n.headers),"POST"===e&&{"x-upsert":String(i.upsert)}),l=i.metadata;"u">typeof Blob&&r instanceof Blob?((a=new FormData).append("cacheControl",i.cacheControl),l&&a.append("metadata",n.encodeMetadata(l)),a.append("",r)):"u">typeof FormData&&r instanceof FormData?((a=r).has("cacheControl")||a.append("cacheControl",i.cacheControl),l&&!a.has("metadata")&&a.append("metadata",n.encodeMetadata(l))):(a=r,o["cache-control"]="max-age=".concat(i.cacheControl),o["content-type"]=i.contentType,l&&(o["x-metadata"]=n.toBase64(n.encodeMetadata(l))),("u">typeof ReadableStream&&a instanceof ReadableStream||a&&"object"==typeof a&&"pipe"in a&&"function"==typeof a.pipe)&&!i.duplex&&(i.duplex="half")),(null==s?void 0:s.headers)&&(o=tj(tj({},o),s.headers));let c=n._removeEmptyFolders(t),u=n._getFinalPath(c),h=await ("PUT"==e?tD:tL)(n.fetch,"".concat(n.url,"/object/").concat(u),a,tj({headers:o},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{path:c,id:h.Id,fullPath:h.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){var n=this;let a=n._removeEmptyFolders(e),i=n._getFinalPath(a),o=new URL(n.url+"/object/upload/sign/".concat(i));return o.searchParams.set("token",t),n.handleOperation(async()=>{let e,t=tj({upsert:tK.upsert},s),i=tj(tj({},n.headers),{"x-upsert":String(t.upsert)});return"u">typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"u">typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,i["cache-control"]="max-age=".concat(t.cacheControl),i["content-type"]=t.contentType),{path:a,fullPath:(await tD(n.fetch,o.toString(),e,{headers:i})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(e),n=tj({},r.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");let a=await tL(r.fetch,"".concat(r.url,"/object/upload/sign/").concat(s),{},{headers:n}),i=new URL(r.url+a.url),o=i.searchParams.get("token");if(!o)throw new tS("No token returned by API");return{signedUrl:i.toString(),path:e,token:o}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var s=this;return s.handleOperation(async()=>await tL(s.fetch,"".concat(s.url,"/object/move"),{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:s.headers}))}async copy(e,t,r){var s=this;return s.handleOperation(async()=>({path:(await tL(s.fetch,"".concat(s.url,"/object/copy"),{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(e,t,r){var s=this;return s.handleOperation(async()=>{let n=s._getFinalPath(e),a=await tL(s.fetch,"".concat(s.url,"/object/sign/").concat(n),tj({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:s.headers}),i=(null==r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return{signedUrl:encodeURI("".concat(s.url).concat(a.signedURL).concat(i))}})}async createSignedUrls(e,t,r){var s=this;return s.handleOperation(async()=>{let n=await tL(s.fetch,"".concat(s.url,"/object/sign/").concat(s.bucketId),{expiresIn:t,paths:e},{headers:s.headers}),a=(null==r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return n.map(e=>tj(tj({},e),{},{signedUrl:e.signedURL?encodeURI("".concat(s.url).concat(e.signedURL).concat(a)):null}))})}download(e,t,r){let s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=n?"?".concat(n):"",i=this._getFinalPath(e);return new tZ(()=>tU(this.fetch,"".concat(this.url,"/").concat(s,"/").concat(i).concat(a),{headers:this.headers,noResolveJson:!0},r),this.shouldThrowOnError)}async info(e){var t=this;let r=t._getFinalPath(e);return t.handleOperation(async()=>tO(await tU(t.fetch,"".concat(t.url,"/object/info/").concat(r),{headers:t.headers})))}async exists(e){let t=this._getFinalPath(e);try{return await tB(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(tE(e)&&e instanceof tA){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}}getPublicUrl(e,t){let r=this._getFinalPath(e),s=[],n=(null==t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==n&&s.push(n);let a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&s.push(i);let o=s.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(r).concat(o))}}}async remove(e){var t=this;return t.handleOperation(async()=>await tF(t.fetch,"".concat(t.url,"/object/").concat(t.bucketId),{prefixes:e},{headers:t.headers}))}async list(e,t,r){var s=this;return s.handleOperation(async()=>{let n=tj(tj(tj({},tz),t),{},{prefix:e||""});return await tL(s.fetch,"".concat(s.url,"/object/list/").concat(s.bucketId),n,{headers:s.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{let s=tj({},e);return await tL(r.fetch,"".concat(r.url,"/object/list-v2/").concat(r.bucketId),s,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==tg.Buffer?tg.Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}constructor(e,t={},r,s){super(e,t,s,"storage"),this.bucketId=r}};let tH={"X-Client-Info":"storage-js/".concat("2.97.0")};var tJ=class extends tq{async listBuckets(e){var t=this;return t.handleOperation(async()=>{let r=t.listBucketOptionsToQueryString(e);return await tU(t.fetch,"".concat(t.url,"/bucket").concat(r),{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await tU(t.fetch,"".concat(t.url,"/bucket/").concat(e),{headers:t.headers}))}async createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};var r=this;return r.handleOperation(async()=>await tL(r.fetch,"".concat(r.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await tD(r.fetch,"".concat(r.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await tL(t.fetch,"".concat(t.url,"/bucket/").concat(e,"/empty"),{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await tF(t.fetch,"".concat(t.url,"/bucket/").concat(e),{},{headers:t.headers}))}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}constructor(e,t={},r,s){const n=new URL(e);(null==s?void 0:s.useNewHostname)&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),super(n.href.replace(/\/$/,""),tj(tj({},tH),t),r,"storage")}},tG=class extends tq{async createBucket(e){var t=this;return t.handleOperation(async()=>await tL(t.fetch,"".concat(t.url,"/bucket"),{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let r=new URLSearchParams;(null==e?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(null==e?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&r.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&r.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&r.set("search",e.search);let s=r.toString(),n=s?"".concat(t.url,"/bucket?").concat(s):"".concat(t.url,"/bucket");return await tU(t.fetch,n,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await tF(t.fetch,"".concat(t.url,"/bucket/").concat(e),{},{headers:t.headers}))}from(e){var t=this;if(!(!(!e||"string"!=typeof e||0===e.length||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))throw new tS("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let r=new tk({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(e,t){let r=e[t];return"function"!=typeof r?r:async function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];try{return{data:await r.apply(e,n),error:null}}catch(e){if(s)throw e;return{data:null,error:e}}}}})}constructor(e,t={},r){super(e.replace(/\/$/,""),tj(tj({},tH),t),r,"storage")}},t$=class extends tq{async createIndex(e){var t=this;return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/CreateIndex"),e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await tV.post(r.fetch,"".concat(r.url,"/GetIndex"),{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/ListIndexes"),e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await tV.post(r.fetch,"".concat(r.url,"/DeleteIndex"),{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}constructor(e,t={},r){super(e.replace(/\/$/,""),tj(tj({},tH),{},{"Content-Type":"application/json"},t),r,"vectors")}},tY=class extends tq{async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/PutVectors"),e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/GetVectors"),e,{headers:t.headers}))}async listVectors(e){var t=this;if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error("segmentIndex must be between 0 and ".concat(e.segmentCount-1))}return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/ListVectors"),e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/QueryVectors"),e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/DeleteVectors"),e,{headers:t.headers})||{})}constructor(e,t={},r){super(e.replace(/\/$/,""),tj(tj({},tH),{},{"Content-Type":"application/json"},t),r,"vectors")}},tX=class extends tq{async createBucket(e){var t=this;return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/CreateVectorBucket"),{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/GetVectorBucket"),{vectorBucketName:e},{headers:t.headers}))}async listBuckets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=this;return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/ListVectorBuckets"),e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await tV.post(t.fetch,"".concat(t.url,"/DeleteVectorBucket"),{vectorBucketName:e},{headers:t.headers})||{})}constructor(e,t={},r){super(e.replace(/\/$/,""),tj(tj({},tH),{},{"Content-Type":"application/json"},t),r,"vectors")}},tQ=class extends tX{from(e){return new t0(this.url,this.headers,e,this.fetch)}async createBucket(e){return super.createBucket.call(this,e)}async getBucket(e){return super.getBucket.call(this,e)}async listBuckets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.listBuckets.call(this,e)}async deleteBucket(e){return super.deleteBucket.call(this,e)}constructor(e,t={}){super(e,t.headers||{},t.fetch)}},t0=class extends t${async createIndex(e){return super.createIndex.call(this,tj(tj({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.listIndexes.call(this,tj(tj({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return super.getIndex.call(this,this.vectorBucketName,e)}async deleteIndex(e){return super.deleteIndex.call(this,this.vectorBucketName,e)}index(e){return new t1(this.url,this.headers,this.vectorBucketName,e,this.fetch)}constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}},t1=class extends tY{async putVectors(e){return super.putVectors.call(this,tj(tj({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async getVectors(e){return super.getVectors.call(this,tj(tj({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async listVectors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.listVectors.call(this,tj(tj({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async queryVectors(e){return super.queryVectors.call(this,tj(tj({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}async deleteVectors(e){return super.deleteVectors.call(this,tj(tj({},e),{},{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}constructor(e,t,r,s,n){super(e,t,n),this.vectorBucketName=r,this.indexName=s}},t2=class extends tJ{from(e){return new tW(this.url,this.headers,e,this.fetch)}get vectors(){return new tQ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tG(this.url+"/iceberg",this.headers,this.fetch)}constructor(e,t={},r,s){super(e,t,r,s)}};let t5="2.97.0",t4="X-Supabase-Api-Version",t8={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},t6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class t3 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function t9(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class t7 extends t3{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class re extends t3{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class rt extends t3{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class rr extends rt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rs(e){return t9(e)&&"AuthSessionMissingError"===e.name}class rn extends rt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ra extends rt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ri extends rt{toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}}class ro extends rt{toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}}class rl extends rt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class rc extends rt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ru(e){return t9(e)&&"AuthRetryableFetchError"===e.name}class rh extends rt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class rd extends rt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}let rf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rp=" 	\n\r=".split(""),rg=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<rp.length;t+=1)e[rp[t].charCodeAt(0)]=-2;for(let t=0;t<rf.length;t+=1)e[rf[t].charCodeAt(0)]=t;return e})();function rm(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;)r(rf[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)r(rf[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function ry(e,t,r){let s=rg[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else if(-2===s)return;else throw Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}function rv(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,s,r)};for(let t=0;t<e.length;t+=1)ry(e.charCodeAt(t),n,a);return t.join("")}function r_(e){let t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)ry(e.charCodeAt(t),r,s);return new Uint8Array(t)}function rb(e){let t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>rm(e,r,s)),rm(null,r,s),t.join("")}let rw=()=>"u">typeof window&&"u">typeof document,rk={tested:!1,writable:!1},rS=()=>{if(!rw())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(rk.tested)return rk.writable;let e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),rk.tested=!0,rk.writable=!0}catch(e){rk.tested=!0,rk.writable=!1}return rk.writable},rE=e=>e?function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];return e(...r)}:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fetch(...t)},rT=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},rA=async(e,t)=>{let r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}},rO=async(e,t)=>{await e.removeItem(t)};class rx{constructor(){this.promise=new rx.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function rR(e){let t=e.split(".");if(3!==t.length)throw new rd("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!t6.test(t[e]))throw new rd("JWT not in base64url format");return{header:JSON.parse(rv(t[0])),payload:JSON.parse(rv(t[1])),signature:r_(t[2]),raw:{header:t[0],payload:t[1]}}}async function rj(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function rC(e){return("0"+e.toString(16)).substr(-2)}async function rI(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>String.fromCharCode(e)).join("")}async function rP(e){return"u">typeof crypto&&void 0!==crypto.subtle&&"u">typeof TextEncoder?btoa(await rI(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e)}async function rN(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=function(){let e=new Uint32Array(56);if("u"<typeof crypto){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,rC).join("")}(),n=s;r&&(n+="/PASSWORD_RECOVERY"),await rT(e,"".concat(t,"-code-verifier"),n);let a=await rP(s),i=s===a?"plain":"s256";return[a,i]}rx.promiseConstructor=Promise;let rU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,rL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function rD(e){if(!rL.test(e))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rB(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){let e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function rF(e){return JSON.parse(JSON.stringify(e))}let rV=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rq=[502,503,504];async function rM(e){var t;let r,s;if(!("object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json))throw new rc(rV(e),0);if(rq.includes(e.status))throw new rc(rV(e),e.status);try{r=await e.json()}catch(e){throw new re(rV(e),e)}let n=function(e){let t=e.headers.get(t4);if(!t||!t.match(rU))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(e){return null}}(e);if(n&&n.getTime()>=t8["2024-01-01"].timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?s=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new rh(rV(r),e.status,(null==(t=r.weak_password)?void 0:t.reasons)||[]);else if("session_not_found"===s)throw new rr}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new rh(rV(r),e.status,r.weak_password.reasons);throw new t7(rV(r),e.status||500,s)}async function rZ(e,t,r,s){var n;let a=Object.assign({},null==s?void 0:s.headers);a[t4]||(a[t4]=t8["2024-01-01"].name),(null==s?void 0:s.jwt)&&(a.Authorization="Bearer ".concat(s.jwt));let i=null!=(n=null==s?void 0:s.query)?n:{};(null==s?void 0:s.redirectTo)&&(i.redirect_to=s.redirectTo);let o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await rz(e,t,r+o,{headers:a,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function rz(e,t,r,s,n,a){let i,o,l=(o={method:t,headers:(null==s?void 0:s.headers)||{}},"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==s?void 0:s.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),n)));try{i=await e(r,Object.assign({},l))}catch(e){throw console.error(e),new rc(rV(e),0)}if(i.ok||await rM(i),null==s?void 0:s.noResolveJson)return i;try{return await i.json()}catch(e){await rM(e)}}function rK(e){var t,r,s;let n=null;(s=e).access_token&&s.refresh_token&&s.expires_in&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!=(t=e.user)?t:e},error:null}}function rW(e){let t=rK(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function rH(e){var t;return{data:{user:null!=(t=e.user)?t:e},error:null}}function rJ(e){return{data:e,error:null}}function rG(e){let{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a}=e;return{data:{properties:{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a},user:Object.assign({},eW(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function r$(e){return e}let rY=["global","local","others"];class rX{async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rY[0];if(0>rY.indexOf(t))throw Error("@supabase/auth-js: Parameter scope must be one of ".concat(rY.join(", ")));try{return await rZ(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(t9(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await rZ(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rH})}catch(e){if(t9(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,r=eW(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=null==r?void 0:r.newEmail,delete s.newEmail),await rZ(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:s,headers:this.headers,xform:rG,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(t9(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await rZ(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:rH})}catch(e){if(t9(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,r,s,n,a,i,o;try{let l={nextPage:null,lastPage:0,total:0},c=await rZ(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(n=null==(s=null==e?void 0:e.perPage)?void 0:s.toString())?n:""},xform:r$});if(c.error)throw c.error;let u=await c.json(),h=null!=(a=c.headers.get("x-total-count"))?a:0,d=null!=(o=null==(i=c.headers.get("link"))?void 0:i.split(","))?o:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(t9(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){rD(e);try{return await rZ(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:rH})}catch(e){if(t9(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){rD(e);try{return await rZ(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:rH})}catch(e){if(t9(e))return{data:{user:null},error:e};throw e}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];rD(e);try{return await rZ(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:rH})}catch(e){if(t9(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){rD(e.userId);try{let{data:t,error:r}=await rZ(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(t9(e))return{data:null,error:e};throw e}}async _deleteFactor(e){rD(e.userId),rD(e.id);try{return{data:await rZ(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(e){if(t9(e))return{data:null,error:e};throw e}}async _listOAuthClients(e){var t,r,s,n,a,i,o;try{let l={nextPage:null,lastPage:0,total:0},c=await rZ(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(n=null==(s=null==e?void 0:e.perPage)?void 0:s.toString())?n:""},xform:r$});if(c.error)throw c.error;let u=await c.json(),h=null!=(a=c.headers.get("x-total-count"))?a:0,d=null!=(o=null==(i=c.headers.get("link"))?void 0:i.split(","))?o:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(t9(e))return{data:{clients:[]},error:e};throw e}}async _createOAuthClient(e){try{return await rZ(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(t9(e))return{data:null,error:e};throw e}}async _getOAuthClient(e){try{return await rZ(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(t9(e))return{data:null,error:e};throw e}}async _updateOAuthClient(e,t){try{return await rZ(this.fetch,"PUT","".concat(this.url,"/admin/oauth/clients/").concat(e),{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(t9(e))return{data:null,error:e};throw e}}async _deleteOAuthClient(e){try{return await rZ(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(t9(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(e){try{return await rZ(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(t9(e))return{data:null,error:e};throw e}}constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=rE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}}function rQ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}let r0={debug:!!(globalThis&&rS()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class r1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class r2 extends r1{}async function r5(e,t,r){r0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let s=new globalThis.AbortController;t>0&&setTimeout(()=>{s.abort(),r0.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(s){r0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{r0.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}if(0===t)throw r0.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new r2('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(r0.debug)try{let e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()})}catch(r){if((null==r?void 0:r.name)==="AbortError")throw new r2('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" timed out waiting ').concat(t,"ms"));throw r}}function r4(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}class r8 extends Error{constructor({message:e,code:t,cause:r,name:s}){var n;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!=(n=null!=s?s:r instanceof Error?r.name:void 0)?n:"Unknown Error",this.code=t}}class r6 extends r8{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}let r3=new class{createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function r9(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function r7(){var e,t;return!!(rw()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null==(e=null==navigator?void 0:navigator.credentials)?void 0:e.create)&&"function"==typeof(null==(t=null==navigator?void 0:navigator.credentials)?void 0:t.get))}async function se(e){try{let t=await navigator.credentials.create(e);if(!t)return{data:null,error:new r6("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new r6("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function(e){var t,r,s;let{error:n,options:a}=e,{publicKey:i}=a;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(a.signal instanceof AbortSignal)return new r8({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if("ConstraintError"===n.name){if((null==(t=i.authenticatorSelection)?void 0:t.requireResidentKey)===!0)return new r8({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});else if("conditional"===a.mediation&&(null==(r=i.authenticatorSelection)?void 0:r.userVerification)==="required")return new r8({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});else if((null==(s=i.authenticatorSelection)?void 0:s.userVerification)==="required")return new r8({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else if("InvalidStateError"===n.name)return new r8({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});else if("NotAllowedError"===n.name)return new r8({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});else if("NotSupportedError"===n.name)return new r8(0===i.pubKeyCredParams.filter(e=>"public-key"===e.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});else if("SecurityError"===n.name){let e=window.location.hostname;if(!r9(e))return new r8({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:n});if(i.rp.id!==e)return new r8({message:'The RP ID "'.concat(i.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:n})}else if("TypeError"===n.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new r8({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if("UnknownError"===n.name)return new r8({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n});return new r8({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}({error:t,options:e})}}}async function st(e){try{let t=await navigator.credentials.get(e);if(!t)return{data:null,error:new r6("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new r6("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function(e){let{error:t,options:r}=e,{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(r.signal instanceof AbortSignal)return new r8({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("NotAllowedError"===t.name)return new r8({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});else if("SecurityError"===t.name){let e=window.location.hostname;if(!r9(e))return new r8({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(s.rpId!==e)return new r8({message:'The RP ID "'.concat(s.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new r8({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t});return new r8({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}({error:t,options:e})}}}let sr={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ss={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function sn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let s=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),a={};for(let e of t)if(e)for(let t in e){let r=e[t];if(void 0!==r)if(Array.isArray(r))a[t]=r;else if(n(r))a[t]=r;else if(s(r)){let e=a[t];s(e)?a[t]=sn(e,r):a[t]=sn(r)}else a[t]=r}return a}class sa{async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge(e,t){var r,s,n,a,i;let{factorId:o,webauthn:l,friendlyName:c,signal:u}=e;try{let{data:e,error:h}=await this.client.mfa.challenge({factorId:o,webauthn:l});if(!e)return{data:null,error:h};let d=null!=u?u:r3.createNewAbortSignal();if("create"===e.webauthn.type){let{user:t}=e.webauthn.credential_options.publicKey;if(!t.name)if(c)t.name="".concat(t.id,":").concat(c);else{let e=(await this.client.getUser()).data.user,s=(null==(r=null==e?void 0:e.user_metadata)?void 0:r.name)||(null==e?void 0:e.email)||(null==e?void 0:e.id)||"User";t.name="".concat(t.id,":").concat(s)}t.displayName||(t.displayName=t.name)}switch(e.webauthn.type){case"create":{let r=(s=e.webauthn.credential_options.publicKey,n=null==t?void 0:t.create,sn(sr,s,n||{})),{data:a,error:i}=await se({publicKey:r,signal:d});if(a)return{data:{factorId:o,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null};return{data:null,error:i}}case"request":{let r=(a=e.webauthn.credential_options.publicKey,i=null==t?void 0:t.request,sn(ss,a,i||{})),{data:s,error:n}=await st(Object.assign(Object.assign({},e.webauthn.credential_options),{publicKey:r,signal:d}));if(s)return{data:{factorId:o,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:s}},error:null};return{data:null,error:n}}}}catch(e){if(t9(e))return{data:null,error:e};return{data:null,error:new re("Unexpected error in challenge",e)}}}async _verify(e){let{challengeId:t,factorId:r,webauthn:s}=e;return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate(e,t){let{factorId:r,webauthn:{rpId:s="u">typeof window?window.location.hostname:void 0,rpOrigins:n="u">typeof window?[window.location.origin]:void 0,signal:a}={}}=e;if(!s)return{data:null,error:new t3("rpId is required for WebAuthn authentication")};try{if(!r7())return{data:null,error:new re("Browser does not support WebAuthn",null)};let{data:e,error:i}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:n},signal:a},{request:t});if(!e)return{data:null,error:i};let{webauthn:o}=e;return this._verify({factorId:r,challengeId:e.challengeId,webauthn:{type:o.type,rpId:s,rpOrigins:n,credential_response:o.credential_response}})}catch(e){if(t9(e))return{data:null,error:e};return{data:null,error:new re("Unexpected error in authenticate",e)}}}async _register(e,t){let{friendlyName:r,webauthn:{rpId:s="u">typeof window?window.location.hostname:void 0,rpOrigins:n="u">typeof window?[window.location.origin]:void 0,signal:a}={}}=e;if(!s)return{data:null,error:new t3("rpId is required for WebAuthn registration")};try{if(!r7())return{data:null,error:new re("Browser does not support WebAuthn",null)};let{data:e,error:i}=await this._enroll({friendlyName:r});if(!e)return await this.client.mfa.listFactors().then(e=>{var t;return null==(t=e.data)?void 0:t.all.find(e=>"webauthn"===e.factor_type&&e.friendly_name===r&&"unverified"!==e.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};let{data:o,error:l}=await this._challenge({factorId:e.id,friendlyName:e.friendly_name,webauthn:{rpId:s,rpOrigins:n},signal:a},{create:t});if(!o)return{data:null,error:l};return this._verify({factorId:e.id,challengeId:o.challengeId,webauthn:{rpId:s,rpOrigins:n,type:o.webauthn.type,credential_response:o.webauthn.credential_response}})}catch(e){if(t9(e))return{data:null,error:e};return{data:null,error:new re("Unexpected error in register",e)}}}constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"u">typeof self&&(self.globalThis=self)}let si={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/".concat(t5)},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function so(e,t,r){return await r()}let sl={};class sc{get jwks(){var e,t;return null!=(t=null==(e=sl[this.storageKey])?void 0:e.jwks)?t:{keys:[]}}set jwks(e){sl[this.storageKey]=Object.assign(Object.assign({},sl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!=(t=null==(e=sl[this.storageKey])?void 0:e.cachedAt)?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){sl[this.storageKey]=Object.assign(Object.assign({},sl[this.storageKey]),{cachedAt:e})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return"GoTrueClient@"+"".concat(this.storageKey,":").concat(this.instanceID," (").concat(t5,") ").concat(new Date().toISOString())}_debug(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(rw()&&(t=function(e){let t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(e){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),rw()&&this.detectSessionInUrl&&"none"!==r){let{data:s,error:n}=await this._getSessionFromURL(t,r);if(n){(this._debug("#_initialize()","error detecting session from URL",n),t9(n)&&"AuthImplicitGrantRedirectError"===n.name)&&(null==(e=n.details)||e.code);return{error:n}}let{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){if(t9(e))return this._returnResult({error:e});return this._returnResult({error:new re("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{let{data:n,error:a}=await rZ(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!=(r=null==(t=null==e?void 0:e.options)?void 0:t.data)?r:{},gotrue_meta_security:{captcha_token:null==(s=null==e?void 0:e.options)?void 0:s.captchaToken}},xform:rK});if(a||!n)return this._returnResult({data:{user:null,session:null},error:a});let i=n.session,o=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",i)),this._returnResult({data:{user:o,session:i},error:null})}catch(e){if(t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signUp(e){var t,r,s;try{let n;if("email"in e){let{email:r,password:s,options:a}=e,i=null,o=null;"pkce"===this.flowType&&([i,o]=await rN(this.storage,this.storageKey)),n=await rZ(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:r,password:s,data:null!=(t=null==a?void 0:a.data)?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:rK})}else if("phone"in e){let{phone:t,password:a,options:i}=e;n=await rZ(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:a,data:null!=(r=null==i?void 0:i.data)?r:{},channel:null!=(s=null==i?void 0:i.channel)?s:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:rK})}else throw new ra("You must provide either an email or phone number and a password");let{data:a,error:i}=n;if(i||!a)return await rO(this.storage,"".concat(this.storageKey,"-code-verifier")),this._returnResult({data:{user:null,session:null},error:i});let o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(e){if(await rO(this.storage,"".concat(this.storageKey,"-code-verifier")),t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithPassword(e){try{let t;if("email"in e){let{email:r,password:s,options:n}=e;t=await rZ(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:rW})}else if("phone"in e){let{phone:r,password:s,options:n}=e;t=await rZ(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:rW})}else throw new ra("You must provide either an email or phone number and a password");let{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){let e=new rn;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(e){if(t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(e){var t,r,s,n;return await this._handleProviderSignIn(e.provider,{redirectTo:null==(t=e.options)?void 0:t.redirectTo,scopes:null==(r=e.options)?void 0:r.scopes,queryParams:null==(s=e.options)?void 0:s.queryParams,skipBrowserRedirect:null==(n=e.options)?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,r,s,n,a,i,o,l,c,u,h,d;let f,p;if("message"in e)f=e.message,p=e.signature;else{let u,{chain:h,wallet:g,statement:m,options:y}=e;if(rw())if("object"==typeof g)u=g;else{let e=window;if("ethereum"in e&&"object"==typeof e.ethereum&&"request"in e.ethereum&&"function"==typeof e.ethereum.request)u=e.ethereum;else throw Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof g||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");u=g}let v=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href),_=await u.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||0===_.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let b=r4(_[0]),w=null==(r=null==y?void 0:y.signInWithEthereum)?void 0:r.chainId;w||(w=parseInt(await u.request({method:"eth_chainId"}),16)),f=function(e){var t;let{chainId:r,domain:s,expirationTime:n,issuedAt:a=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:u,uri:h,version:d}=e;if(!Number.isInteger(r))throw Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(r));if(!s)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(i));if(!h)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==d)throw Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(d));if(null==(t=e.statement)?void 0:t.includes("\n"))throw Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));let f=r4(e.address),p=u?"".concat(u,"://").concat(s):s,g=e.statement?"".concat(e.statement,"\n"):"",m="".concat(p," wants you to sign in with your Ethereum account:\n").concat(f,"\n\n").concat(g),y="URI: ".concat(h,"\nVersion: ").concat(d,"\nChain ID: ").concat(r).concat(i?"\nNonce: ".concat(i):"","\nIssued At: ").concat(a.toISOString());if(n&&(y+="\nExpiration Time: ".concat(n.toISOString())),o&&(y+="\nNot Before: ".concat(o.toISOString())),l&&(y+="\nRequest ID: ".concat(l)),c){let e="\nResources:";for(let t of c){if(!t||"string"!=typeof t)throw Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(t));e+="\n- ".concat(t)}y+=e}return"".concat(m,"\n").concat(y)}({domain:v.host,address:b,statement:m,uri:v.href,version:"1",chainId:w,nonce:null==(s=null==y?void 0:y.signInWithEthereum)?void 0:s.nonce,issuedAt:null!=(a=null==(n=null==y?void 0:y.signInWithEthereum)?void 0:n.issuedAt)?a:new Date,expirationTime:null==(i=null==y?void 0:y.signInWithEthereum)?void 0:i.expirationTime,notBefore:null==(o=null==y?void 0:y.signInWithEthereum)?void 0:o.notBefore,requestId:null==(l=null==y?void 0:y.signInWithEthereum)?void 0:l.requestId,resources:null==(c=null==y?void 0:y.signInWithEthereum)?void 0:c.resources}),p=await u.request({method:"personal_sign",params:[(d=f,"0x"+Array.from(new TextEncoder().encode(d),e=>e.toString(16).padStart(2,"0")).join("")),b]})}try{let{data:t,error:r}=await rZ(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:p},(null==(u=e.options)?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null==(h=e.options)?void 0:h.captchaToken}}:null),xform:rK});if(r)throw r;if(!t||!t.session||!t.user){let e=new rn;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(e){if(t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSolana(e){var t,r,s,n,a,i,o,l,c,u,h,d;let f,p;if("message"in e)f=e.message,p=e.signature;else{let h,{chain:d,wallet:g,statement:m,options:y}=e;if(rw())if("object"==typeof g)h=g;else{let e=window;if("solana"in e&&"object"==typeof e.solana&&("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))h=e.solana;else throw Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof g||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");h=g}let v=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href);if("signIn"in h&&h.signIn){let e,t=await h.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==y?void 0:y.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),m?{statement:m}:null));if(Array.isArray(t)&&t[0]&&"object"==typeof t[0])e=t[0];else if(t&&"object"==typeof t&&"signedMessage"in t&&"signature"in t)e=t;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in e&&"signature"in e&&("string"==typeof e.signedMessage||e.signedMessage instanceof Uint8Array)&&e.signature instanceof Uint8Array)f="string"==typeof e.signedMessage?e.signedMessage:new TextDecoder().decode(e.signedMessage),p=e.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in h)||"function"!=typeof h.signMessage||!("publicKey"in h)||"object"!=typeof h||!h.publicKey||!("toBase58"in h.publicKey)||"function"!=typeof h.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(v.host," wants you to sign in with your Solana account:"),h.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!=(s=null==(r=null==y?void 0:y.signInWithSolana)?void 0:r.issuedAt)?s:new Date().toISOString()),...(null==(n=null==y?void 0:y.signInWithSolana)?void 0:n.notBefore)?["Not Before: ".concat(y.signInWithSolana.notBefore)]:[],...(null==(a=null==y?void 0:y.signInWithSolana)?void 0:a.expirationTime)?["Expiration Time: ".concat(y.signInWithSolana.expirationTime)]:[],...(null==(i=null==y?void 0:y.signInWithSolana)?void 0:i.chainId)?["Chain ID: ".concat(y.signInWithSolana.chainId)]:[],...(null==(o=null==y?void 0:y.signInWithSolana)?void 0:o.nonce)?["Nonce: ".concat(y.signInWithSolana.nonce)]:[],...(null==(l=null==y?void 0:y.signInWithSolana)?void 0:l.requestId)?["Request ID: ".concat(y.signInWithSolana.requestId)]:[],...(null==(u=null==(c=null==y?void 0:y.signInWithSolana)?void 0:c.resources)?void 0:u.length)?["Resources",...y.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");let e=await h.signMessage(new TextEncoder().encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{let{data:t,error:r}=await rZ(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:rb(p)},(null==(h=e.options)?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null==(d=e.options)?void 0:d.captchaToken}}:null),xform:rK});if(r)throw r;if(!t||!t.session||!t.user){let e=new rn;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(e){if(t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _exchangeCodeForSession(e){let t=await rA(this.storage,"".concat(this.storageKey,"-code-verifier")),[r,s]=(null!=t?t:"").split("/");try{if(!r&&"pkce"===this.flowType)throw new rl;let{data:t,error:n}=await rZ(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:rK});if(await rO(this.storage,"".concat(this.storageKey,"-code-verifier")),n)throw n;if(!t||!t.session||!t.user){let e=new rn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=s?s:null}),error:n})}catch(e){if(await rO(this.storage,"".concat(this.storageKey,"-code-verifier")),t9(e))return this._returnResult({data:{user:null,session:null,redirectType:null},error:e});throw e}}async signInWithIdToken(e){try{let{options:t,provider:r,token:s,access_token:n,nonce:a}=e,{data:i,error:o}=await rZ(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:r,id_token:s,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:rK});if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let e=new rn;return this._returnResult({data:{user:null,session:null},error:e})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:i,error:o})}catch(e){if(t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(e){var t,r,s,n,a;try{if("email"in e){let{email:s,options:n}=e,a=null,i=null;"pkce"===this.flowType&&([a,i]=await rN(this.storage,this.storageKey));let{error:o}=await rZ(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:s,data:null!=(t=null==n?void 0:n.data)?t:{},create_user:null==(r=null==n?void 0:n.shouldCreateUser)||r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null==n?void 0:n.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){let{phone:t,options:r}=e,{data:i,error:o}=await rZ(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!=(s=null==r?void 0:r.data)?s:{},create_user:null==(n=null==r?void 0:r.shouldCreateUser)||n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!=(a=null==r?void 0:r.channel)?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o})}throw new ra("You must provide either an email or phone number.")}catch(e){if(await rO(this.storage,"".concat(this.storageKey,"-code-verifier")),t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async verifyOtp(e){var t,r;try{let s,n;"options"in e&&(s=null==(t=e.options)?void 0:t.redirectTo,n=null==(r=e.options)?void 0:r.captchaToken);let{data:a,error:i}=await rZ(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:s,xform:rK});if(i)throw i;if(!a)throw Error("An error occurred on token verification.");let o=a.session,l=a.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(e){if(t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSSO(e){var t,r,s,n,a;try{let i=null,o=null;"pkce"===this.flowType&&([i,o]=await rN(this.storage,this.storageKey));let l=await rZ(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!=(r=null==(t=e.options)?void 0:t.redirectTo)?r:void 0}),(null==(s=null==e?void 0:e.options)?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:rJ});return(null==(n=l.data)?void 0:n.url)&&rw()&&!(null==(a=e.options)?void 0:a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(e){if(await rO(this.storage,"".concat(this.storageKey,"-code-verifier")),t9(e))return this._returnResult({data:null,error:e});throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new rr;let{error:s}=await rZ(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{let t="".concat(this.url,"/resend");if("email"in e){let{email:r,type:s,options:n}=e,{error:a}=await rZ(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},redirectTo:null==n?void 0:n.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}if("phone"in e){let{phone:r,type:s,options:n}=e,{data:a,error:i}=await rZ(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:i})}throw new ra("You must provide either an email or phone number and a type")}catch(e){if(t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let t=null,r=await rA(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),null!==r&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};let s=!!t.expires_at&&1e3*t.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()","session has".concat(s?"":" not"," expired"),"expires_at",t.expires_at),!s){if(this.userStorage){let e=await rA(this.userStorage,this.storageKey+"-user");(null==e?void 0:e.user)?t.user=e.user:t.user=rB()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){var e;let r={value:this.suppressGetSessionWarning};t.user=(e=t.user,new Proxy(e,{get:(e,t,s)=>{if("__isInsecureUserWarningProxy"===t)return!0;if("symbol"==typeof t){let r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r||"Symbol(nodejs.util.inspect.custom)"===r)return Reflect.get(e,t,s)}return r.value||"string"!=typeof t||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(e,t,s)}})),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:n,error:a}=await this._callRefreshToken(t.refresh_token);if(a)return this._returnResult({data:{session:null},error:a});return this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;let t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{if(e)return await rZ(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:rH});return await this._useSession(async e=>{var t,r,s;let{data:n,error:a}=e;if(a)throw a;return(null==(t=n.session)?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await rZ(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!=(s=null==(r=n.session)?void 0:r.access_token)?s:void 0,xform:rH}):{data:{user:null},error:new rr}})}catch(e){if(t9(e))return rs(e)&&(await this._removeSession(),await rO(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{let{data:s,error:n}=r;if(n)throw n;if(!s.session)throw new rr;let a=s.session,i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await rN(this.storage,this.storageKey));let{data:l,error:c}=await rZ(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:rH});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(e){if(await rO(this.storage,"".concat(this.storageKey,"-code-verifier")),t9(e))return this._returnResult({data:{user:null},error:e});throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rr;let t=Date.now()/1e3,r=t,s=!0,n=null,{payload:a}=rR(e.access_token);if(a.exp&&(s=(r=a.exp)<=t),s){let{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};n=t}else{let{data:s,error:a}=await this._getUser(e.access_token);if(a)return this._returnResult({data:{user:null,session:null},error:a});n={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return this._returnResult({data:{user:n.user,session:n},error:null})}catch(e){if(t9(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:s,error:n}=t;if(n)throw n;e=null!=(r=s.session)?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new rr;let{data:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?this._returnResult({data:{user:null,session:null},error:n}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(e,t){try{if(!rw())throw new ri("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ri(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new ro("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new ri("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ro("No code detected.");let{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;let s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:s,access_token:n,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!n||!i||!a||!l)throw new ri("No session defined in URL");let c=Math.round(Date.now()/1e3),u=parseInt(i),h=c+u;o&&(h=parseInt(o));let d=h-c;1e3*d<=3e4&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(d,"s, should have been closer to ").concat(u,"s"));let f=h-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,h,c);let{data:p,error:g}=await this._getUser(n);if(g)throw g;let m={provider_token:r,provider_refresh_token:s,access_token:n,expires_in:u,expires_at:h,refresh_token:a,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(e){if(t9(e))return this._returnResult({data:{session:null,redirectType:null},error:e});throw e}}_isImplicitGrantCallback(e){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await rA(this.storage,"".concat(this.storageKey,"-code-verifier"));return!!(e.code&&t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;let{data:s,error:n}=t;if(n&&!rs(n))return this._returnResult({error:n});let a=null==(r=s.session)?void 0:r.access_token;if(a){let{error:t}=await this.admin.signOut(a,e);if(t&&!(t9(t)&&"AuthApiError"===t.name&&(404===t.status||401===t.status||403===t.status)||rs(t)))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await rO(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({error:null})})}onAuthStateChange(e){let t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{let{data:{session:s},error:n}=t;if(n)throw n;await (null==(r=this.stateChangeEmitters.get(e))?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(t){await (null==(s=this.stateChangeEmitters.get(e))?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,s=null;"pkce"===this.flowType&&([r,s]=await rN(this.storage,this.storageKey,!0));try{return await rZ(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(await rO(this.storage,"".concat(this.storageKey,"-code-verifier")),t9(e))return this._returnResult({data:null,error:e});throw e}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!=(e=t.user.identities)?e:[]},error:null})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{let{data:r,error:s}=await this._useSession(async t=>{var r,s,n,a,i;let{data:o,error:l}=t;if(l)throw l;let c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null==(r=e.options)?void 0:r.redirectTo,scopes:null==(s=e.options)?void 0:s.scopes,queryParams:null==(n=e.options)?void 0:n.queryParams,skipBrowserRedirect:!0});return await rZ(this.fetch,"GET",c,{headers:this.headers,jwt:null!=(i=null==(a=o.session)?void 0:a.access_token)?i:void 0})});if(s)throw s;return!rw()||(null==(t=e.options)?void 0:t.skipBrowserRedirect)||window.location.assign(null==r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null==r?void 0:r.url},error:null})}catch(t){if(t9(t))return this._returnResult({data:{provider:e.provider,url:null},error:t});throw t}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{let{error:s,data:{session:n}}=t;if(s)throw s;let{options:a,provider:i,token:o,access_token:l,nonce:c}=e,{data:u,error:h}=await rZ(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:null!=(r=null==n?void 0:n.access_token)?r:void 0,body:{provider:i,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:rK});if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u||!u.session||!u.user)return this._returnResult({data:{user:null,session:null},error:new rn});return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("USER_UPDATED",u.session)),this._returnResult({data:u,error:h})}catch(e){if(await rO(this.storage,"".concat(this.storageKey,"-code-verifier")),t9(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;let{data:n,error:a}=t;if(a)throw a;return await rZ(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!=(s=null==(r=n.session)?void 0:r.access_token)?s:void 0})})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(e){let t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{var r,s;let n=Date.now();return await (r=async r=>(r>0&&await rj(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await rZ(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:rK})),s=(e,t)=>{let r=200*Math.pow(2,e);return t&&ru(t)&&Date.now()+r-n<3e4},new Promise((e,t)=>{(async()=>{for(let n=0;n<1/0;n++)try{let t=await r(n);if(!s(n,null,t))return void e(t)}catch(e){if(!s(n,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),t9(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),rw()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let s=await rA(this.storage,this.storageKey);if(s&&this.userStorage){let t=await rA(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!t&&(t={user:s.user},await rT(this.userStorage,this.storageKey+"-user",t)),s.user=null!=(e=null==t?void 0:t.user)?e:rB()}else if(s&&!s.user&&!s.user){let e=await rA(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(s.user=e.user,await rO(this.storage,this.storageKey+"-user"),await rT(this.storage,this.storageKey,s)):s.user=rB()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),null!==s&&await this._removeSession();return}let n=(null!=(t=s.expires_at)?t:1/0)*1e3-Date.now()<9e4;if(this._debug(r,"session has".concat(n?"":" not"," expired with margin of ").concat(9e4,"s")),n){if(this.autoRefreshToken&&s.refresh_token){let{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),ru(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{let{data:e,error:t}=await this._getUser(s.access_token);!t&&(null==e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(e){console.error("Error getting user data:",e),this._debug(r,"error getting user data, skipping SIGNED_IN notification",e)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(e){this._debug(r,"error",e),console.error(e);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new rr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(s,"begin");try{this.refreshingDeferred=new rx;let{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new rr;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);let s={data:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(e){if(this._debug(s,"error",e),t9(e)){let r={data:null,error:e};return ru(e)||await this._removeSession(),null==(t=this.refreshingDeferred)||t.resolve(r),r}throw null==(r=this.refreshingDeferred)||r.reject(e),e}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s="#_notifyAllSubscribers(".concat(e,")");this._debug(s,"begin",t,"broadcast = ".concat(r));try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let s=[],n=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(e){s.push(e)}});if(await Promise.all(n),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await rO(this.storage,"".concat(this.storageKey,"-code-verifier"));let t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await rT(this.userStorage,this.storageKey+"-user",{user:t.user});let e=Object.assign({},t);delete e.user;let s=rF(e);await rT(this.storage,this.storageKey,s)}else{let e=rF(t);await rT(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rO(this.storage,this.storageKey),await rO(this.storage,this.storageKey+"-code-verifier"),await rO(this.storage,this.storageKey+"-user"),this.userStorage&&await rO(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rw()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e);let t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&"object"==typeof t&&"function"==typeof t.unref?t.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);let t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let s=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(s," ticks, a tick lasts ").concat(3e4,"ms, refresh threshold is ").concat(3," ticks")),s<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof r1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rw()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{"visible"!==document.visibilityState?this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let s=["provider=".concat(encodeURIComponent(t))];if((null==r?void 0:r.redirectTo)&&s.push("redirect_to=".concat(encodeURIComponent(r.redirectTo))),(null==r?void 0:r.scopes)&&s.push("scopes=".concat(encodeURIComponent(r.scopes))),"pkce"===this.flowType){let[e,t]=await rN(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});s.push(r.toString())}if(null==r?void 0:r.queryParams){let e=new URLSearchParams(r.queryParams);s.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&s.push("skip_http_redirect=".concat(r.skipBrowserRedirect)),"".concat(e,"?").concat(s.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:s,error:n}=t;return n?this._returnResult({data:null,error:n}):await rZ(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null==(r=null==s?void 0:s.session)?void 0:r.access_token})})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;let{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});let i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await rZ(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null==(s=null==o?void 0:o.totp)?void 0:s.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),this._returnResult({data:o,error:null}))})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r,s,n;let{data:a,error:i}=t;if(i)return this._returnResult({data:null,error:i});let o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?(s=e.webauthn.credential_response,"toJSON"in s&&"function"==typeof s.toJSON?s.toJSON():{id:s.id,rawId:s.id,response:{attestationObject:rb(new Uint8Array(s.response.attestationObject)),clientDataJSON:rb(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:null!=(n=s.authenticatorAttachment)?n:void 0}):function(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();let r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:rb(new Uint8Array(s.authenticatorData)),clientDataJSON:rb(new Uint8Array(s.clientDataJSON)),signature:rb(new Uint8Array(s.signature)),userHandle:s.userHandle?rb(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!=(t=e.authenticatorAttachment)?t:void 0}}(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await rZ(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:o,headers:this.headers,jwt:null==(r=null==a?void 0:a.session)?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;let{data:s,error:n}=t;if(n)return this._returnResult({data:null,error:n});let a=await rZ(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:this.headers,jwt:null==(r=null==s?void 0:s.session)?void 0:r.access_token});if(a.error)return a;let{data:i}=a;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential creation options are required");if("u">typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:r,excludeCredentials:s}=e,n=eW(e,["challenge","user","excludeCredentials"]),a=r_(t).buffer,i=Object.assign(Object.assign({},r),{id:r_(r.id).buffer}),o=Object.assign(Object.assign({},n),{challenge:a,user:i});if(s&&s.length>0){o.excludeCredentials=Array(s.length);for(let e=0;e<s.length;e++){let t=s[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:r_(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential request options are required");if("u">typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:r}=e,s=eW(e,["challenge","allowCredentials"]),n=r_(t).buffer,a=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){a.allowCredentials=Array(r.length);for(let e=0;e<r.length;e++){let t=r[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:r_(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return a}(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;let{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};let s={all:[],phone:[],totp:[],webauthn:[]};for(let r of null!=(e=null==t?void 0:t.factors)?e:[])s.all.push(r),"verified"===r.status&&s[r.factor_type].push(r);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,r,s,n;if(e)try{let{payload:s}=rR(e),n=null;s.aal&&(n=s.aal);let a=n,{data:{user:i},error:o}=await this.getUser(e);if(o)return this._returnResult({data:null,error:o});(null!=(r=null==(t=null==i?void 0:i.factors)?void 0:t.filter(e=>"verified"===e.status))?r:[]).length>0&&(a="aal2");let l=s.amr||[];return{data:{currentLevel:n,nextLevel:a,currentAuthenticationMethods:l},error:null}}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}let{data:{session:a},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:o}=rR(a.access_token),l=null;o.aal&&(l=o.aal);let c=l;return(null!=(n=null==(s=a.user.factors)?void 0:s.filter(e=>"verified"===e.status))?n:[]).length>0&&(c="aal2"),{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:o.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{let{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await rZ(this.fetch,"GET","".concat(this.url,"/oauth/authorizations/").concat(e),{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new rr})})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:s},error:n}=r;if(n)return this._returnResult({data:null,error:n});if(!s)return this._returnResult({data:null,error:new rr});let a=await rZ(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return a.data&&a.data.redirect_url&&rw()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:s},error:n}=r;if(n)return this._returnResult({data:null,error:n});if(!s)return this._returnResult({data:null,error:new rr});let a=await rZ(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return a.data&&a.data.redirect_url&&rw()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}}async _listOAuthGrants(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await rZ(this.fetch,"GET","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new rr})})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{let{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?(await rZ(this.fetch,"DELETE","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new rr})})}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}}async fetchJwk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]},r=t.keys.find(t=>t.kid===e);if(r)return r;let s=Date.now();if((r=this.jwks.keys.find(t=>t.kid===e))&&this.jwks_cached_at+6e5>s)return r;let{data:n,error:a}=await rZ(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return n.keys&&0!==n.keys.length&&(this.jwks=n,this.jwks_cached_at=s,r=n.keys.find(t=>t.kid===e))?r:null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var r;let s,n=e;if(!n){let{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}let{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=rR(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(i.exp);let u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks);if(!u){let{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:a,signature:o},error:null}}let h=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(a.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,(r="".concat(l,".").concat(c),s=[],!function(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){let t=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}(s,t)}}(r,e=>s.push(e)),new Uint8Array(s))))throw new rd("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(e){if(t9(e))return this._returnResult({data:null,error:e});throw e}}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const n=Object.assign(Object.assign({},si),e);if(this.storageKey=n.storageKey,this.instanceID=null!=(t=sc.nextInstanceID[this.storageKey])?t:0,sc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.instanceID>0&&rw()){const e="".concat(this._logPrefix()," Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=n.persistSession,this.autoRefreshToken=n.autoRefreshToken,this.admin=new rX({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=rE(n.fetch),this.lock=n.lock||so,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,this.throwOnError=n.throwOnError,this.lockAcquireTimeout=n.lockAcquireTimeout,n.lock?this.lock=n.lock:this.persistSession&&rw()&&(null==(r=null==globalThis?void 0:globalThis.navigator)?void 0:r.locks)?this.lock=r5:this.lock=so,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new sa(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:rS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rQ(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=rQ(this.memoryStorage)),rw()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null==(s=this.broadcastChannel)||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e);try{await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}catch(e){this._debug("#broadcastChannel","error",e)}})}n.skipAutoInitialize||this.initialize().catch(e=>{this._debug("#initialize()","error",e)})}}sc.nextInstanceID={};let su=sc,sh="";sh="u">typeof Deno?"deno":"u">typeof document?"web":"u">typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let sd={headers:{"X-Client-Info":"supabase-js-".concat(sh,"/").concat("2.97.0")}},sf={schema:"public"},sp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sg={};function sm(e){return(sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function sv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sy(Object(r),!0).forEach(function(t){!function(e,t,r){var s;(s=function(e,t){if("object"!=sm(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=sm(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==sm(s)?s:s+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sy(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var s_=class extends su{constructor(e){super(e)}},sb=class{get functions(){return new eH(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return null!=(e=null==(t=r.session)?void 0:t.access_token)?e:this.supabaseKey}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:s,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,storageKey:l,flowType:c,lock:u,debug:h,throwOnError:d}=e,f={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new s_({url:this.authUrl.href,headers:sv(sv({},f),t),storageKey:l,autoRefreshToken:s,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,flowType:c,lock:u,debug:h,throwOnError:d,fetch:r,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new tp(this.realtimeUrl.href,sv(sv({},e),{},{params:sv(sv({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}constructor(e,t,r){var s,n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){let t=null==e?void 0:e.trim();if(!t)throw Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t.endsWith("/")?t:t+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),l=function(e,t){var r,s;let{db:n,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:h}=t,d={db:sv(sv({},l),n),auth:sv(sv({},c),a),realtime:sv(sv({},u),i),storage:{},global:sv(sv(sv({},h),o),{},{headers:sv(sv({},null!=(r=null==h?void 0:h.headers)?r:{}),null!=(s=null==o?void 0:o.headers)?s:{})}),accessToken:async()=>""};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!=r?r:{},{db:sf,realtime:sg,auth:sv(sv({},sp),{},{storageKey:o}),global:sd});this.storageKey=null!=(s=l.auth.storageKey)?s:"",this.headers=null!=(n=l.global.headers)?n:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!=(a=l.auth)?a:{},this.headers,l.global.fetch),this.fetch=((e,t,r)=>{let s=r?function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return r(...t)}:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fetch(...t)},n=Headers;return async(r,a)=>{var i;let o=null!=(i=await t())?i:e,l=new n(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),s(r,sv(sv({},a),{},{headers:l}))}})(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(sv({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new e5(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new t2(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}};(function(){if("u">typeof window)return!1;let e=globalThis.process;if(!e)return!1;let t=e.version;if(null==t)return!1;let r=t.match(/^v(\d+)\./);return!!r&&18>=parseInt(r[1],10)})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var sw=e.i(58702);function sk(){return"u">typeof window&&void 0!==window.document}sw.parse,sw.serialize;let sS={path:"/",sameSite:"lax",httpOnly:!1,maxAge:3456e4},sE=/^(.*)[.](0|[1-9][0-9]*)$/;function sT(e,t){if(e===t)return!0;let r=e.match(sE);return!!r&&r[1]===t}function sA(e,t,r){let s=null!=r?r:3180,n=encodeURIComponent(t);if(n.length<=s)return[{name:e,value:t}];let a=[];for(;n.length>0;){let e=n.slice(0,s),t=e.lastIndexOf("%");t>s-3&&(e=e.slice(0,t));let r="";for(;e.length>0;)try{r=decodeURIComponent(e);break}catch(t){if(t instanceof URIError&&"%"===e.at(-3)&&e.length>3)e=e.slice(0,e.length-3);else throw t}a.push(r),n=n.slice(e.length)}return a.map((t,r)=>({name:"".concat(e,".").concat(r),value:t}))}async function sO(e,t){let r=await t(e);if(r)return r;let s=[];for(let r=0;;r++){let n="".concat(e,".").concat(r),a=await t(n);if(!a)break;s.push(a)}return s.length>0?s.join(""):null}let sx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sR=" 	\n\r=".split(""),sj=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<sR.length;t+=1)e[sR[t].charCodeAt(0)]=-2;for(let t=0;t<sx.length;t+=1)e[sx[t].charCodeAt(0)]=t;return e})();function sC(e){let t=[],r=0,s=0;if(function(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){let t=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}(s,t)}}(e,e=>{for(r=r<<8|e,s+=8;s>=6;){let e=r>>s-6&63;t.push(sx[e]),s-=6}}),s>0)for(r<<=6-s,s=6;s>=6;){let e=r>>s-6&63;t.push(sx[e]),s-=6}return t.join("")}function sI(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},n=0,a=0;for(let t=0;t<e.length;t+=1){let i=sj[e.charCodeAt(t)];if(i>-1)for(n=n<<6|i,a+=6;a>=8;)(function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}})(n>>a-8&255,s,r),a-=8;else if(-2===i)continue;else throw Error('Invalid Base64-URL character "'.concat(e.at(t),'" at position ').concat(t))}return t.join("")}let sP="base64-";async function sN(e,t){var r;let{getAll:s,setAll:n,setItems:a,removedItems:i}=e,o=t.cookieEncoding,l=null!=(r=t.cookieOptions)?r:null,c=await s([...a?Object.keys(a):[],...i?Object.keys(i):[]]),u=(null==c?void 0:c.map(e=>{let{name:t}=e;return t}))||[],h=Object.keys(i).flatMap(e=>u.filter(t=>sT(t,e))),d=Object.keys(a).flatMap(e=>{let t=new Set(u.filter(t=>sT(t,e))),r=a[e];"base64url"===o&&(r=sP+sC(r));let s=sA(e,r);return s.forEach(e=>{t.delete(e.name)}),h.push(...t),s}),f=(0,N._)((0,P._)({},sS,l),{maxAge:0}),p=(0,N._)((0,P._)({},sS,l),{maxAge:sS.maxAge});delete f.name,delete p.name,await n([...h.map(e=>({name:e,value:"",options:f})),...d.map(e=>{let{name:t,value:r}=e;return{name:t,value:r,options:p}})])}if(e.i(12896),void 0!==eq.default&&(null==(x=eq.default.env)?void 0:x.npm_package_name)){let e=eq.default.env.npm_package_name;["@supabase/auth-helpers-nextjs","@supabase/auth-helpers-react","@supabase/auth-helpers-remix","@supabase/auth-helpers-sveltekit"].includes(e)&&console.warn("\n\n   IMPORTANT: Package Consolidation Notice                                \n                                                                            \n The ".concat(e.padEnd(35)," package name is deprecated.  \n                                                                            \n You are now using @supabase/ssr - a unified solution for all frameworks.  \n                                                                            \n The auth-helpers packages have been consolidated into @supabase/ssr       \n to provide better maintenance and consistent APIs across frameworks.      \n                                                                            \n Please update your package.json to use @supabase/ssr directly:            \n   npm uninstall ").concat(e.padEnd(42)," \n   npm install @supabase/ssr                                               \n                                                                            \n For more information, visit:                                              \n https://supabase.com/docs/guides/auth/server-side                         \n\n    "))}var sU=e.i(593);function sL(){return(0,L.useMemo)(()=>(function(e,t,s){let n=sk();if(n&&r)return r;if(!e||!t)throw Error("@supabase/ssr: Your project's URL and API key are required to create a Supabase client!\n\nCheck your Supabase project's API settings to find these values\n\nhttps://supabase.com/dashboard/project/_/settings/api");let{storage:a}=function(e,t){var r;let s,n,a=null!=(r=e.cookies)?r:null,i=e.cookieEncoding,o={},l={};if(a)if("get"in a){let e=async e=>{let t=e.flatMap(e=>[e,...Array.from({length:5}).map((t,r)=>"".concat(e,".").concat(r))]),r=[];for(let e=0;e<t.length;e+=1){let s=await a.get(t[e]);(s||"string"==typeof s)&&r.push({name:t[e],value:s})}return r};if(s=async t=>await e(t),"set"in a&&"remove"in a)n=async e=>{for(let t=0;t<e.length;t+=1){let{name:r,value:s,options:n}=e[t];s?await a.set(r,s,n):await a.remove(r,n)}};else if(t)n=async()=>{console.warn("@supabase/ssr: createServerClient was configured without set and remove cookie methods, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness. Consider switching to the getAll and setAll cookie methods instead of get, set and remove which are deprecated and can be difficult to use correctly.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring a getAll and setAll cookie method (deprecated: alternatively both get, set and remove can be used)")}else if("getAll"in a)if(s=async()=>await a.getAll(),"setAll"in a)n=a.setAll;else if(t)n=async()=>{console.warn("@supabase/ssr: createServerClient was configured without the setAll cookie method, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring both getAll and setAll cookie methods (deprecated: alternatively both get, set and remove can be used)");else throw Error("@supabase/ssr: ".concat(t?"createServerClient":"createBrowserClient"," requires configuring getAll and setAll cookie methods (deprecated: alternatively use get, set and remove).").concat(sk()?" As this is called in a browser runtime, consider removing the cookies option object to use the document.cookie API automatically.":""));else if(!t&&sk())s=()=>{let e;return Object.keys(e=(0,sw.parse)(document.cookie)).map(t=>{var r;return{name:t,value:null!=(r=e[t])?r:""}})},n=e=>{e.forEach(e=>{let{name:t,value:r,options:s}=e;document.cookie=(0,sw.serialize)(t,r,s)})};else if(t)throw Error("@supabase/ssr: createServerClient must be initialized with cookie options that specify getAll and setAll functions (deprecated, not recommended: alternatively use get, set and remove)");else s=()=>[],n=()=>{throw Error("@supabase/ssr: createBrowserClient in non-browser runtimes (including Next.js pre-rendering mode) was not initialized cookie options that specify getAll and setAll functions (deprecated: alternatively use get, set and remove), but they were needed")};return t?{getAll:s,setAll:n,setItems:o,removedItems:l,storage:{isServer:!0,getItem:async e=>{if("string"==typeof o[e])return o[e];if(l[e])return null;let t=await s([e]),r=await sO(e,async e=>{let r=(null==t?void 0:t.find(t=>{let{name:r}=t;return r===e}))||null;return r?r.value:null});if(!r)return null;let n=r;return"string"==typeof r&&r.startsWith(sP)&&(n=sI(r.substring(sP.length))),n},setItem:async(t,r)=>{if(t.endsWith("-code-verifier")){var a;await sN({getAll:s,setAll:n,setItems:{[t]:r},removedItems:{}},{cookieOptions:null!=(a=null==e?void 0:e.cookieOptions)?a:null,cookieEncoding:i})}o[t]=r,delete l[t]},removeItem:async e=>{delete o[e],l[e]=!0}}}:{getAll:s,setAll:n,setItems:o,removedItems:l,storage:{isServer:!1,getItem:async e=>{let t=await s([e]),r=await sO(e,async e=>{let r=(null==t?void 0:t.find(t=>{let{name:r}=t;return r===e}))||null;return r?r.value:null});if(!r)return null;let n=r;return r.startsWith(sP)&&(n=sI(r.substring(sP.length))),n},setItem:async(t,r)=>{let a=await s([t]),o=new Set(((null==a?void 0:a.map(e=>{let{name:t}=e;return t}))||[]).filter(e=>sT(e,t))),l=r;"base64url"===i&&(l=sP+sC(r));let c=sA(t,l);c.forEach(e=>{let{name:t}=e;o.delete(t)});let u=(0,N._)((0,P._)({},sS,null==e?void 0:e.cookieOptions),{maxAge:0}),h=(0,N._)((0,P._)({},sS,null==e?void 0:e.cookieOptions),{maxAge:sS.maxAge});delete u.name,delete h.name;let d=[...[...o].map(e=>({name:e,value:"",options:u})),...c.map(e=>{let{name:t,value:r}=e;return{name:t,value:r,options:h}})];d.length>0&&await n(d)},removeItem:async t=>{let r=await s([t]),a=((null==r?void 0:r.map(e=>{let{name:t}=e;return t}))||[]).filter(e=>sT(e,t)),i=(0,N._)((0,P._)({},sS,null==e?void 0:e.cookieOptions),{maxAge:0});delete i.name,a.length>0&&await n(a.map(e=>({name:e,value:"",options:i})))}}}}((0,N._)((0,P._)({},void 0),{cookieEncoding:"base64url"}),!1),i=new sb(e,t,(0,N._)((0,P._)({},void 0),{global:(0,N._)((0,P._)({},void 0),{headers:(0,N._)((0,P._)({},void 0),{"X-Client-Info":"supabase-ssr/".concat("0.8.0"," createBrowserClient")})}),auth:(0,P._)((0,N._)((0,P._)({},void 0,null),{flowType:"pkce",autoRefreshToken:sk(),detectSessionInUrl:sk(),persistSession:!0,storage:a}),null)}));return n&&(r=i),i})(sU.config.supabase.url,sU.config.supabase.anonKey),[])}e.s(["useSupabase",()=>sL],71386),e.s([],10898),e.i(10898),(p=R||(R={})).assertEqual=e=>{},p.assertIs=function(e){},p.assertNever=function(e){throw Error()},p.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},p.getValidEnumValues=e=>{let t=p.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(let s of t)r[s]=e[s];return p.objectValues(r)},p.objectValues=e=>p.objectKeys(e).map(function(t){return e[t]}),p.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},p.find=(e,t)=>{for(let r of e)if(t(r))return r},p.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,p.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map(e=>"string"==typeof e?"'".concat(e,"'"):e).join(t)},p.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(j||(j={})).mergeShapes=(e,t)=>(0,P._)({},e,t);let sD=R.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),sB=e=>{switch(typeof e){case"undefined":return sD.undefined;case"string":return sD.string;case"number":return Number.isNaN(e)?sD.nan:sD.number;case"boolean":return sD.boolean;case"function":return sD.function;case"bigint":return sD.bigint;case"symbol":return sD.symbol;case"object":if(Array.isArray(e))return sD.array;if(null===e)return sD.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return sD.promise;if("u">typeof Map&&e instanceof Map)return sD.map;if("u">typeof Set&&e instanceof Set)return sD.set;if("u">typeof Date&&e instanceof Date)return sD.date;return sD.object;default:return sD.unknown}};e.s(["ZodParsedType",0,sD,"getParsedType",0,sB,"objectUtil",()=>j,"util",()=>R],15519);let sF=R.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),sV=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class sq extends Error{get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},s=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(s);else if("invalid_return_type"===n.code)s(n.returnTypeError);else if("invalid_arguments"===n.code)s(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,s=0;for(;s<n.path.length;){let r=n.path[s];s===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],s++}}};return s(this),r}static assert(e){if(!(e instanceof sq))throw Error("Not a ZodError: ".concat(e))}toString(){return this.message}get message(){return JSON.stringify(this.issues,R.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message,t={},r=[];for(let s of this.issues)if(s.path.length>0){let r=s.path[0];t[r]=t[r]||[],t[r].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}}sq.create=e=>new sq(e),e.s(["ZodError",()=>sq,"ZodIssueCode",0,sF,"quotelessJson",0,sV],83434);let sM=(e,t)=>{let r;switch(e.code){case sF.invalid_type:r=e.received===sD.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case sF.invalid_literal:r="Invalid literal value, expected ".concat(JSON.stringify(e.expected,R.jsonStringifyReplacer));break;case sF.unrecognized_keys:r="Unrecognized key(s) in object: ".concat(R.joinValues(e.keys,", "));break;case sF.invalid_union:r="Invalid input";break;case sF.invalid_union_discriminator:r="Invalid discriminator value. Expected ".concat(R.joinValues(e.options));break;case sF.invalid_enum_value:r="Invalid enum value. Expected ".concat(R.joinValues(e.options),", received '").concat(e.received,"'");break;case sF.invalid_arguments:r="Invalid function arguments";break;case sF.invalid_return_type:r="Invalid function return type";break;case sF.invalid_date:r="Invalid date";break;case sF.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"==typeof e.validation.position&&(r="".concat(r," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?r='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?r='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):R.assertNever(e.validation):r="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case sF.too_small:r="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type||"bigint"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case sF.too_big:r="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case sF.custom:r="Invalid input";break;case sF.invalid_intersection_types:r="Intersection results could not be merged";break;case sF.not_multiple_of:r="Number must be a multiple of ".concat(e.multipleOf);break;case sF.not_finite:r="Number must be finite";break;default:r=t.defaultError,R.assertNever(e)}return{message:r}},sZ=sM;function sz(e){sZ=e}function sK(){return sZ}e.s(["getErrorMap",()=>sK,"setErrorMap",()=>sz],98793),e.i(98793),e.s(["defaultErrorMap",0,sM,"getErrorMap",()=>sK,"setErrorMap",()=>sz],35260),e.i(35260);let sW=e=>{let{data:t,path:r,errorMaps:s,issueData:n}=e,a=[...r,...n.path||[]],i=(0,N._)((0,P._)({},n),{path:a});if(void 0!==n.message)return(0,N._)((0,P._)({},n),{path:a,message:n.message});let o="";for(let e of s.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return(0,N._)((0,P._)({},n),{path:a,message:o})},sH=[];function sJ(e,t){let r=sZ,s=sW({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===sM?void 0:sM].filter(e=>!!e)});e.common.issues.push(s)}class sG{dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let s of t){if("aborted"===s.status)return s$;"dirty"===s.status&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,s=await e.value;r.push({key:t,value:s})}return sG.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let s of t){let{key:t,value:n}=s;if("aborted"===t.status||"aborted"===n.status)return s$;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||s.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}constructor(){this.value="valid"}}let s$=Object.freeze({status:"aborted"}),sY=e=>({status:"dirty",value:e}),sX=e=>({status:"valid",value:e}),sQ=e=>"aborted"===e.status,s0=e=>"dirty"===e.status,s1=e=>"valid"===e.status,s2=e=>"u">typeof Promise&&e instanceof Promise;e.s(["DIRTY",0,sY,"EMPTY_PATH",0,sH,"INVALID",0,s$,"OK",0,sX,"ParseStatus",()=>sG,"addIssueToContext",()=>sJ,"isAborted",0,sQ,"isAsync",0,s2,"isDirty",0,s0,"isValid",0,s1,"makeIssue",0,sW],39472),e.i(39472),e.s([],5398),e.i(5398),e.i(15519),(g=C||(C={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},g.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class s5{get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}}let s4=(e,t)=>{if(s1(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new sq(e.common.issues);return this._error=t,this._error}}};function s8(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:s,description:n}=e;if(t&&(r||s))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{var a,i;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:n.defaultError}:void 0===n.data?{message:null!=(i=null!=o?o:s)?i:n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:null!=(a=null!=o?o:r)?a:n.defaultError}},description:n}}class s6{get description(){return this._def.description}_getType(e){return sB(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:sB(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new sG,ctx:{common:e.parent.common,data:e.data,parsedType:sB(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(s2(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let s={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sB(e)},n=this._parseSync({data:e,path:s.path,parent:s});return s4(s,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sB(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return s1(r)?{value:r.value}:{issues:t.common.issues}}catch(e){var r,s;(null==e||null==(s=e.message)||null==(r=s.toLowerCase())?void 0:r.includes("encountered"))&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>s1(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sB(e)},s=this._parse({data:e,path:r.path,parent:r});return s4(r,await (s2(s)?s:Promise.resolve(s)))}refine(e,t){return this._refinement((r,s)=>{let n=e(r),a=()=>s.addIssue((0,P._)({code:sF.custom},"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t));return"u">typeof Promise&&n instanceof Promise?n.then(e=>!!e||(a(),!1)):!!n||(a(),!1)})}refinement(e,t){return this._refinement((r,s)=>!!e(r)||(s.addIssue("function"==typeof t?t(r,s):t),!1))}_refinement(e){return new nz({schema:this,typeName:I.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return nK.create(this,this._def)}nullable(){return nW.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return nO.create(this)}promise(){return nZ.create(this,this._def)}or(e){return nR.create([this,e],this._def)}and(e){return nI.create(this,e,this._def)}transform(e){return new nz((0,N._)((0,P._)({},s8(this._def)),{schema:this,typeName:I.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){return new nH((0,N._)((0,P._)({},s8(this._def)),{innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:I.ZodDefault}))}brand(){return new nY((0,P._)({typeName:I.ZodBranded,type:this},s8(this._def)))}catch(e){return new nJ((0,N._)((0,P._)({},s8(this._def)),{innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:I.ZodCatch}))}describe(e){return new this.constructor((0,N._)((0,P._)({},this._def),{description:e}))}pipe(e){return nX.create(this,e)}readonly(){return nQ.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}}let s3=/^c[^\s-]{8,}$/i,s9=/^[0-9a-z]+$/,s7=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ne=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nt=/^[a-z0-9_-]{21}$/i,nr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ns=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,nn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,na=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ni=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,no=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,nl=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,nc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nu=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nh="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nd=new RegExp("^".concat(nh,"$"));function nf(e){let t="[0-5]\\d";e.precision?t="".concat(t,"\\.\\d{").concat(e.precision,"}"):null==e.precision&&(t="".concat(t,"(\\.\\d+)?"));let r=e.precision?"+":"?";return"([01]\\d|2[0-3]):[0-5]\\d(:".concat(t,")").concat(r)}function np(e){let t="".concat(nh,"T").concat(nf(e)),r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t="".concat(t,"(").concat(r.join("|"),")"),new RegExp("^".concat(t,"$"))}class ng extends s6{_parse(e){var t,r,n,a;let i;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==sD.string){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.string,received:t.parsedType}),s$}let o=new sG;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(sJ(i=this._getOrReturnCtx(e,i),{code:sF.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("max"===l.kind)e.data.length>l.value&&(sJ(i=this._getOrReturnCtx(e,i),{code:sF.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("length"===l.kind){let t=e.data.length>l.value,r=e.data.length<l.value;(t||r)&&(i=this._getOrReturnCtx(e,i),t?sJ(i,{code:sF.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&sJ(i,{code:sF.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if("email"===l.kind)nn.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"email",code:sF.invalid_string,message:l.message}),o.dirty());else if("emoji"===l.kind)s||(s=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),s.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:sF.invalid_string,message:l.message}),o.dirty());else if("uuid"===l.kind)ne.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:sF.invalid_string,message:l.message}),o.dirty());else if("nanoid"===l.kind)nt.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:sF.invalid_string,message:l.message}),o.dirty());else if("cuid"===l.kind)s3.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:sF.invalid_string,message:l.message}),o.dirty());else if("cuid2"===l.kind)s9.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:sF.invalid_string,message:l.message}),o.dirty());else if("ulid"===l.kind)s7.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:sF.invalid_string,message:l.message}),o.dirty());else if("url"===l.kind)try{new URL(e.data)}catch(t){sJ(i=this._getOrReturnCtx(e,i),{validation:"url",code:sF.invalid_string,message:l.message}),o.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"regex",code:sF.invalid_string,message:l.message}),o.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(sJ(i=this._getOrReturnCtx(e,i),{code:sF.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(sJ(i=this._getOrReturnCtx(e,i),{code:sF.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(sJ(i=this._getOrReturnCtx(e,i),{code:sF.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):"datetime"===l.kind?np(l).test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{code:sF.invalid_string,validation:"datetime",message:l.message}),o.dirty()):"date"===l.kind?nd.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{code:sF.invalid_string,validation:"date",message:l.message}),o.dirty()):"time"===l.kind?new RegExp("^".concat(nf(l),"$")).test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{code:sF.invalid_string,validation:"time",message:l.message}),o.dirty()):"duration"===l.kind?ns.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"duration",code:sF.invalid_string,message:l.message}),o.dirty()):"ip"===l.kind?(t=e.data,!(("v4"===(r=l.version)||!r)&&na.test(t)||("v6"===r||!r)&&no.test(t))&&1&&(sJ(i=this._getOrReturnCtx(e,i),{validation:"ip",code:sF.invalid_string,message:l.message}),o.dirty())):"jwt"===l.kind?!function(e,t){if(!nr.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(s));if("object"!=typeof n||null===n||"typ"in n&&(null==n?void 0:n.typ)!=="JWT"||!n.alg||t&&n.alg!==t)return!1;return!0}catch(e){return!1}}(e.data,l.alg)&&(sJ(i=this._getOrReturnCtx(e,i),{validation:"jwt",code:sF.invalid_string,message:l.message}),o.dirty()):"cidr"===l.kind?(n=e.data,!(("v4"===(a=l.version)||!a)&&ni.test(n)||("v6"===a||!a)&&nl.test(n))&&1&&(sJ(i=this._getOrReturnCtx(e,i),{validation:"cidr",code:sF.invalid_string,message:l.message}),o.dirty())):"base64"===l.kind?nc.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"base64",code:sF.invalid_string,message:l.message}),o.dirty()):"base64url"===l.kind?nu.test(e.data)||(sJ(i=this._getOrReturnCtx(e,i),{validation:"base64url",code:sF.invalid_string,message:l.message}),o.dirty()):R.assertNever(l);return{status:o.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),(0,P._)({validation:t,code:sF.invalid_string},C.errToObj(r)))}_addCheck(e){return new ng((0,N._)((0,P._)({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck((0,P._)({kind:"email"},C.errToObj(e)))}url(e){return this._addCheck((0,P._)({kind:"url"},C.errToObj(e)))}emoji(e){return this._addCheck((0,P._)({kind:"emoji"},C.errToObj(e)))}uuid(e){return this._addCheck((0,P._)({kind:"uuid"},C.errToObj(e)))}nanoid(e){return this._addCheck((0,P._)({kind:"nanoid"},C.errToObj(e)))}cuid(e){return this._addCheck((0,P._)({kind:"cuid"},C.errToObj(e)))}cuid2(e){return this._addCheck((0,P._)({kind:"cuid2"},C.errToObj(e)))}ulid(e){return this._addCheck((0,P._)({kind:"ulid"},C.errToObj(e)))}base64(e){return this._addCheck((0,P._)({kind:"base64"},C.errToObj(e)))}base64url(e){return this._addCheck((0,P._)({kind:"base64url"},C.errToObj(e)))}jwt(e){return this._addCheck((0,P._)({kind:"jwt"},C.errToObj(e)))}ip(e){return this._addCheck((0,P._)({kind:"ip"},C.errToObj(e)))}cidr(e){return this._addCheck((0,P._)({kind:"cidr"},C.errToObj(e)))}datetime(e){var t,r;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck((0,P._)({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(r=null==e?void 0:e.local)&&r},C.errToObj(null==e?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck((0,P._)({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision},C.errToObj(null==e?void 0:e.message)))}duration(e){return this._addCheck((0,P._)({kind:"duration"},C.errToObj(e)))}regex(e,t){return this._addCheck((0,P._)({kind:"regex",regex:e},C.errToObj(t)))}includes(e,t){return this._addCheck((0,P._)({kind:"includes",value:e,position:null==t?void 0:t.position},C.errToObj(null==t?void 0:t.message)))}startsWith(e,t){return this._addCheck((0,P._)({kind:"startsWith",value:e},C.errToObj(t)))}endsWith(e,t){return this._addCheck((0,P._)({kind:"endsWith",value:e},C.errToObj(t)))}min(e,t){return this._addCheck((0,P._)({kind:"min",value:e},C.errToObj(t)))}max(e,t){return this._addCheck((0,P._)({kind:"max",value:e},C.errToObj(t)))}length(e,t){return this._addCheck((0,P._)({kind:"length",value:e},C.errToObj(t)))}nonempty(e){return this.min(1,C.errToObj(e))}trim(){return new ng((0,N._)((0,P._)({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new ng((0,N._)((0,P._)({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new ng((0,N._)((0,P._)({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ng.create=e=>{var t;return new ng((0,P._)({checks:[],typeName:I.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t},s8(e)))};class nm extends s6{_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==sD.number){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.number,received:t.parsedType}),s$}let r=new sG;for(let s of this._def.checks)"int"===s.kind?R.isInteger(e.data)||(sJ(t=this._getOrReturnCtx(e,t),{code:sF.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&(sJ(t=this._getOrReturnCtx(e,t),{code:sF.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&(sJ(t=this._getOrReturnCtx(e,t),{code:sF.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):"multipleOf"===s.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,n=r>s?r:s;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}(e.data,s.value)&&(sJ(t=this._getOrReturnCtx(e,t),{code:sF.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(sJ(t=this._getOrReturnCtx(e,t),{code:sF.not_finite,message:s.message}),r.dirty()):R.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,C.toString(t))}gt(e,t){return this.setLimit("min",e,!1,C.toString(t))}lte(e,t){return this.setLimit("max",e,!0,C.toString(t))}lt(e,t){return this.setLimit("max",e,!1,C.toString(t))}setLimit(e,t,r,s){return new nm((0,N._)((0,P._)({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:C.toString(s)}]}))}_addCheck(e){return new nm((0,N._)((0,P._)({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:C.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:C.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:C.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:C.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:C.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:C.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:C.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:C.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:C.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&R.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}}nm.create=e=>new nm((0,P._)({checks:[],typeName:I.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1},s8(e)));class ny extends s6{_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==sD.bigint)return this._getInvalidInput(e);let r=new sG;for(let s of this._def.checks)"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&(sJ(t=this._getOrReturnCtx(e,t),{code:sF.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&(sJ(t=this._getOrReturnCtx(e,t),{code:sF.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(sJ(t=this._getOrReturnCtx(e,t),{code:sF.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):R.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.bigint,received:t.parsedType}),s$}gte(e,t){return this.setLimit("min",e,!0,C.toString(t))}gt(e,t){return this.setLimit("min",e,!1,C.toString(t))}lte(e,t){return this.setLimit("max",e,!0,C.toString(t))}lt(e,t){return this.setLimit("max",e,!1,C.toString(t))}setLimit(e,t,r,s){return new ny((0,N._)((0,P._)({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:C.toString(s)}]}))}_addCheck(e){return new ny((0,N._)((0,P._)({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:C.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:C.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:C.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:C.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:C.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}}ny.create=e=>{var t;return new ny((0,P._)({checks:[],typeName:I.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t},s8(e)))};class nv extends s6{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==sD.boolean){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.boolean,received:t.parsedType}),s$}return sX(e.data)}}nv.create=e=>new nv((0,P._)({typeName:I.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1},s8(e)));class n_ extends s6{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==sD.date){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.date,received:t.parsedType}),s$}if(Number.isNaN(e.data.getTime()))return sJ(this._getOrReturnCtx(e),{code:sF.invalid_date}),s$;let r=new sG;for(let s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(sJ(t=this._getOrReturnCtx(e,t),{code:sF.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(sJ(t=this._getOrReturnCtx(e,t),{code:sF.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):R.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new n_((0,N._)((0,P._)({},this._def),{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:C.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:C.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}n_.create=e=>new n_((0,P._)({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:I.ZodDate},s8(e)));class nb extends s6{_parse(e){if(this._getType(e)!==sD.symbol){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.symbol,received:t.parsedType}),s$}return sX(e.data)}}nb.create=e=>new nb((0,P._)({typeName:I.ZodSymbol},s8(e)));class nw extends s6{_parse(e){if(this._getType(e)!==sD.undefined){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.undefined,received:t.parsedType}),s$}return sX(e.data)}}nw.create=e=>new nw((0,P._)({typeName:I.ZodUndefined},s8(e)));class nk extends s6{_parse(e){if(this._getType(e)!==sD.null){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.null,received:t.parsedType}),s$}return sX(e.data)}}nk.create=e=>new nk((0,P._)({typeName:I.ZodNull},s8(e)));class nS extends s6{_parse(e){return sX(e.data)}constructor(){super(...arguments),this._any=!0}}nS.create=e=>new nS((0,P._)({typeName:I.ZodAny},s8(e)));class nE extends s6{_parse(e){return sX(e.data)}constructor(){super(...arguments),this._unknown=!0}}nE.create=e=>new nE((0,P._)({typeName:I.ZodUnknown},s8(e)));class nT extends s6{_parse(e){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.never,received:t.parsedType}),s$}}nT.create=e=>new nT((0,P._)({typeName:I.ZodNever},s8(e)));class nA extends s6{_parse(e){if(this._getType(e)!==sD.undefined){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.void,received:t.parsedType}),s$}return sX(e.data)}}nA.create=e=>new nA((0,P._)({typeName:I.ZodVoid},s8(e)));class nO extends s6{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==sD.array)return sJ(t,{code:sF.invalid_type,expected:sD.array,received:t.parsedType}),s$;if(null!==s.exactLength){let e=t.data.length>s.exactLength.value,n=t.data.length<s.exactLength.value;(e||n)&&(sJ(t,{code:e?sF.too_big:sF.too_small,minimum:n?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(sJ(t,{code:sF.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(sJ(t,{code:sF.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>s.type._parseAsync(new s5(t,e,t.path,r)))).then(e=>sG.mergeArray(r,e));let n=[...t.data].map((e,r)=>s.type._parseSync(new s5(t,e,t.path,r)));return sG.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new nO((0,N._)((0,P._)({},this._def),{minLength:{value:e,message:C.toString(t)}}))}max(e,t){return new nO((0,N._)((0,P._)({},this._def),{maxLength:{value:e,message:C.toString(t)}}))}length(e,t){return new nO((0,N._)((0,P._)({},this._def),{exactLength:{value:e,message:C.toString(t)}}))}nonempty(e){return this.min(1,e)}}nO.create=(e,t)=>new nO((0,P._)({type:e,minLength:null,maxLength:null,exactLength:null,typeName:I.ZodArray},s8(t)));class nx extends s6{_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=R.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==sD.object){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.object,received:t.parsedType}),s$}let{status:t,ctx:r}=this._processInputParams(e),{shape:s,keys:n}=this._getCached(),a=[];if(!(this._def.catchall instanceof nT&&"strip"===this._def.unknownKeys))for(let e in r.data)n.includes(e)||a.push(e);let i=[];for(let e of n){let t=s[e],n=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new s5(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof nT){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of a)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)a.length>0&&(sJ(r,{code:sF.unrecognized_keys,keys:a}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of a){let s=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new s5(r,s,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,s=await t.value;e.push({key:r,value:s,alwaysSet:t.alwaysSet})}return e}).then(e=>sG.mergeObjectSync(t,e)):sG.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return C.errToObj,new nx((0,P._)((0,N._)((0,P._)({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:(t,r)=>{var s,n,a,i;let o=null!=(s=null==(a=(i=this._def).errorMap)?void 0:a.call(i,t,r).message)?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!=(n=C.errToObj(e).message)?n:o}:{message:o}}}:{}))}strip(){return new nx((0,N._)((0,P._)({},this._def),{unknownKeys:"strip"}))}passthrough(){return new nx((0,N._)((0,P._)({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new nx((0,N._)((0,P._)({},this._def),{shape:()=>(0,P._)({},this._def.shape(),e)}))}merge(e){return new nx({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>(0,P._)({},this._def.shape(),e._def.shape()),typeName:I.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new nx((0,N._)((0,P._)({},this._def),{catchall:e}))}pick(e){let t={};for(let r of R.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new nx((0,N._)((0,P._)({},this._def),{shape:()=>t}))}omit(e){let t={};for(let r of R.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new nx((0,N._)((0,P._)({},this._def),{shape:()=>t}))}deepPartial(){return function e(t){if(t instanceof nx){let r={};for(let s in t.shape){let n=t.shape[s];r[s]=nK.create(e(n))}return new nx((0,N._)((0,P._)({},t._def),{shape:()=>r}))}if(t instanceof nO)return new nO((0,N._)((0,P._)({},t._def),{type:e(t.element)}));if(t instanceof nK)return nK.create(e(t.unwrap()));if(t instanceof nW)return nW.create(e(t.unwrap()));if(t instanceof nP)return nP.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of R.objectKeys(this.shape)){let s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new nx((0,N._)((0,P._)({},this._def),{shape:()=>t}))}required(e){let t={};for(let r of R.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof nK;)e=e._def.innerType;t[r]=e}return new nx((0,N._)((0,P._)({},this._def),{shape:()=>t}))}keyof(){return nV(R.objectKeys(this.shape))}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}}nx.create=(e,t)=>new nx((0,P._)({shape:()=>e,unknownKeys:"strip",catchall:nT.create(),typeName:I.ZodObject},s8(t))),nx.strictCreate=(e,t)=>new nx((0,P._)({shape:()=>e,unknownKeys:"strict",catchall:nT.create(),typeName:I.ZodObject},s8(t))),nx.lazycreate=(e,t)=>new nx((0,P._)({shape:e,unknownKeys:"strip",catchall:nT.create(),typeName:I.ZodObject},s8(t)));class nR extends s6{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r=(0,N._)((0,P._)({},t),{common:(0,N._)((0,P._)({},t.common),{issues:[]}),parent:null});return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new sq(e.ctx.common.issues));return sJ(t,{code:sF.invalid_union,unionErrors:r}),s$});{let e,s=[];for(let n of r){let r=(0,N._)((0,P._)({},t),{common:(0,N._)((0,P._)({},t.common),{issues:[]}),parent:null}),a=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:r}),r.common.issues.length&&s.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=s.map(e=>new sq(e));return sJ(t,{code:sF.invalid_union,unionErrors:n}),s$}}get options(){return this._def.options}}nR.create=(e,t)=>new nR((0,P._)({options:e,typeName:I.ZodUnion},s8(t)));let nj=e=>{if(e instanceof nB)return nj(e.schema);if(e instanceof nz)return nj(e.innerType());if(e instanceof nF)return[e.value];if(e instanceof nq)return e.options;if(e instanceof nM)return R.objectValues(e.enum);else if(e instanceof nH)return nj(e._def.innerType);else if(e instanceof nw)return[void 0];else if(e instanceof nk)return[null];else if(e instanceof nK)return[void 0,...nj(e.unwrap())];else if(e instanceof nW)return[null,...nj(e.unwrap())];else if(e instanceof nY)return nj(e.unwrap());else if(e instanceof nQ)return nj(e.unwrap());else if(e instanceof nJ)return nj(e._def.innerType);else return[]};class nC extends s6{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==sD.object)return sJ(t,{code:sF.invalid_type,expected:sD.object,received:t.parsedType}),s$;let r=this.discriminator,s=t.data[r],n=this.optionsMap.get(s);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(sJ(t,{code:sF.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),s$)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let s=new Map;for(let r of t){let t=nj(r.shape[e]);if(!t.length)throw Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(let n of t){if(s.has(n))throw Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(n)));s.set(n,r)}}return new nC((0,P._)({typeName:I.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s},s8(r)))}}class nI extends s6{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),s=(e,s)=>{if(sQ(e)||sQ(s))return s$;let n=function e(t,r){let s=sB(t),n=sB(r);if(t===r)return{valid:!0,data:t};if(s===sD.object&&n===sD.object){let s=R.objectKeys(r),n=R.objectKeys(t).filter(e=>-1!==s.indexOf(e)),a=(0,P._)({},t,r);for(let s of n){let n=e(t[s],r[s]);if(!n.valid)return{valid:!1};a[s]=n.data}return{valid:!0,data:a}}if(s===sD.array&&n===sD.array){if(t.length!==r.length)return{valid:!1};let s=[];for(let n=0;n<t.length;n++){let a=e(t[n],r[n]);if(!a.valid)return{valid:!1};s.push(a.data)}return{valid:!0,data:s}}if(s===sD.date&&n===sD.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,s.value);return n.valid?((s0(e)||s0(s))&&t.dirty(),{status:t.value,value:n.data}):(sJ(r,{code:sF.invalid_intersection_types}),s$)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(e=>{let[t,r]=e;return s(t,r)}):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}nI.create=(e,t,r)=>new nI((0,P._)({left:e,right:t,typeName:I.ZodIntersection},s8(r)));class nP extends s6{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==sD.array)return sJ(r,{code:sF.invalid_type,expected:sD.array,received:r.parsedType}),s$;if(r.data.length<this._def.items.length)return sJ(r,{code:sF.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s$;!this._def.rest&&r.data.length>this._def.items.length&&(sJ(r,{code:sF.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let s=[...r.data].map((e,t)=>{let s=this._def.items[t]||this._def.rest;return s?s._parse(new s5(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(s).then(e=>sG.mergeArray(t,e)):sG.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new nP((0,N._)((0,P._)({},this._def),{rest:e}))}}nP.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new nP((0,P._)({items:e,typeName:I.ZodTuple,rest:null},s8(t)))};class nN extends s6{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==sD.object)return sJ(r,{code:sF.invalid_type,expected:sD.object,received:r.parsedType}),s$;let s=[],n=this._def.keyType,a=this._def.valueType;for(let e in r.data)s.push({key:n._parse(new s5(r,e,r.path,e)),value:a._parse(new s5(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?sG.mergeObjectAsync(t,s):sG.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return new nN(t instanceof s6?(0,P._)({keyType:e,valueType:t,typeName:I.ZodRecord},s8(r)):(0,P._)({keyType:ng.create(),valueType:e,typeName:I.ZodRecord},s8(t)))}}class nU extends s6{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==sD.map)return sJ(r,{code:sF.invalid_type,expected:sD.map,received:r.parsedType}),s$;let s=this._def.keyType,n=this._def.valueType,a=[...r.data.entries()].map((e,t)=>{let[a,i]=e;return{key:s._parse(new s5(r,a,r.path,[t,"key"])),value:n._parse(new s5(r,i,r.path,[t,"value"]))}});if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of a){let s=await r.key,n=await r.value;if("aborted"===s.status||"aborted"===n.status)return s$;("dirty"===s.status||"dirty"===n.status)&&t.dirty(),e.set(s.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of a){let s=r.key,n=r.value;if("aborted"===s.status||"aborted"===n.status)return s$;("dirty"===s.status||"dirty"===n.status)&&t.dirty(),e.set(s.value,n.value)}return{status:t.value,value:e}}}}nU.create=(e,t,r)=>new nU((0,P._)({valueType:t,keyType:e,typeName:I.ZodMap},s8(r)));class nL extends s6{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==sD.set)return sJ(r,{code:sF.invalid_type,expected:sD.set,received:r.parsedType}),s$;let s=this._def;null!==s.minSize&&r.data.size<s.minSize.value&&(sJ(r,{code:sF.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&r.data.size>s.maxSize.value&&(sJ(r,{code:sF.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());let n=this._def.valueType;function a(e){let r=new Set;for(let s of e){if("aborted"===s.status)return s$;"dirty"===s.status&&t.dirty(),r.add(s.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>n._parse(new s5(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>a(e)):a(i)}min(e,t){return new nL((0,N._)((0,P._)({},this._def),{minSize:{value:e,message:C.toString(t)}}))}max(e,t){return new nL((0,N._)((0,P._)({},this._def),{maxSize:{value:e,message:C.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}nL.create=(e,t)=>new nL((0,P._)({valueType:e,minSize:null,maxSize:null,typeName:I.ZodSet},s8(t)));class nD extends s6{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==sD.function)return sJ(t,{code:sF.invalid_type,expected:sD.function,received:t.parsedType}),s$;function r(e,r){return sW({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sZ,sM].filter(e=>!!e),issueData:{code:sF.invalid_arguments,argumentsError:r}})}function s(e,r){return sW({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sZ,sM].filter(e=>!!e),issueData:{code:sF.invalid_return_type,returnTypeError:r}})}let n={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof nZ){let e=this;return sX(async function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];let l=new sq([]),c=await e._def.args.parseAsync(i,n).catch(e=>{throw l.addIssue(r(i,e)),l}),u=await Reflect.apply(a,this,c);return await e._def.returns._def.type.parseAsync(u,n).catch(e=>{throw l.addIssue(s(u,e)),l})})}{let e=this;return sX(function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];let l=e._def.args.safeParse(i,n);if(!l.success)throw new sq([r(i,l.error)]);let c=Reflect.apply(a,this,l.data),u=e._def.returns.safeParse(c,n);if(!u.success)throw new sq([s(c,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new nD((0,N._)((0,P._)({},this._def),{args:nP.create(t).rest(nE.create())}))}returns(e){return new nD((0,N._)((0,P._)({},this._def),{returns:e}))}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new nD((0,P._)({args:e||nP.create([]).rest(nE.create()),returns:t||nE.create(),typeName:I.ZodFunction},s8(r)))}constructor(){super(...arguments),this.validate=this.implement}}class nB extends s6{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}nB.create=(e,t)=>new nB((0,P._)({getter:e,typeName:I.ZodLazy},s8(t)));class nF extends s6{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return sJ(t,{received:t.data,code:sF.invalid_literal,expected:this._def.value}),s$}return{status:"valid",value:e.data}}get value(){return this._def.value}}function nV(e,t){return new nq((0,P._)({values:e,typeName:I.ZodEnum},s8(t)))}nF.create=(e,t)=>new nF((0,P._)({value:e,typeName:I.ZodLiteral},s8(t)));class nq extends s6{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return sJ(t,{expected:R.joinValues(r),received:t.parsedType,code:sF.invalid_type}),s$}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return sJ(t,{received:t.data,code:sF.invalid_enum_value,options:r}),s$}return sX(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return nq.create(e,(0,P._)({},this._def,t))}exclude(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return nq.create(this.options.filter(t=>!e.includes(t)),(0,P._)({},this._def,t))}}nq.create=nV;class nM extends s6{_parse(e){let t=R.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==sD.string&&r.parsedType!==sD.number){let e=R.objectValues(t);return sJ(r,{expected:R.joinValues(e),received:r.parsedType,code:sF.invalid_type}),s$}if(this._cache||(this._cache=new Set(R.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=R.objectValues(t);return sJ(r,{received:r.data,code:sF.invalid_enum_value,options:e}),s$}return sX(e.data)}get enum(){return this._def.values}}nM.create=(e,t)=>new nM((0,P._)({values:e,typeName:I.ZodNativeEnum},s8(t)));class nZ extends s6{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==sD.promise&&!1===t.common.async?(sJ(t,{code:sF.invalid_type,expected:sD.promise,received:t.parsedType}),s$):sX((t.parsedType===sD.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}nZ.create=(e,t)=>new nZ((0,P._)({type:e,typeName:I.ZodPromise},s8(t)));class nz extends s6{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===I.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,n={addIssue:e=>{sJ(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===s.type){let e=s.transform(r.data,n);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return s$;let s=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===s.status?s$:"dirty"===s.status||"dirty"===t.value?sY(s.value):s});{if("aborted"===t.value)return s$;let s=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===s.status?s$:"dirty"===s.status||"dirty"===t.value?sY(s.value):s}}if("refinement"===s.type){let e=e=>{let t=s.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?s$:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===s.status?s$:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}}if("transform"===s.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>s1(e)?Promise.resolve(s.transform(e.value,n)).then(e=>({status:t.value,value:e})):s$);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!s1(e))return s$;let a=s.transform(e.value,n);if(a instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}R.assertNever(s)}}nz.create=(e,t,r)=>new nz((0,P._)({schema:e,typeName:I.ZodEffects,effect:t},s8(r))),nz.createWithPreprocess=(e,t,r)=>new nz((0,P._)({schema:t,effect:{type:"preprocess",transform:e},typeName:I.ZodEffects},s8(r)));class nK extends s6{_parse(e){return this._getType(e)===sD.undefined?sX(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}nK.create=(e,t)=>new nK((0,P._)({innerType:e,typeName:I.ZodOptional},s8(t)));class nW extends s6{_parse(e){return this._getType(e)===sD.null?sX(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}nW.create=(e,t)=>new nW((0,P._)({innerType:e,typeName:I.ZodNullable},s8(t)));class nH extends s6{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===sD.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}nH.create=(e,t)=>new nH((0,P._)({innerType:e,typeName:I.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default},s8(t)));class nJ extends s6{_parse(e){let{ctx:t}=this._processInputParams(e),r=(0,N._)((0,P._)({},t),{common:(0,N._)((0,P._)({},t.common),{issues:[]})}),s=this._def.innerType._parse({data:r.data,path:r.path,parent:(0,P._)({},r)});return s2(s)?s.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new sq(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new sq(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}nJ.create=(e,t)=>new nJ((0,P._)({innerType:e,typeName:I.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch},s8(t)));class nG extends s6{_parse(e){if(this._getType(e)!==sD.nan){let t=this._getOrReturnCtx(e);return sJ(t,{code:sF.invalid_type,expected:sD.nan,received:t.parsedType}),s$}return{status:"valid",value:e.data}}}nG.create=e=>new nG((0,P._)({typeName:I.ZodNaN},s8(e)));let n$=Symbol("zod_brand");class nY extends s6{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class nX extends s6{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s$:"dirty"===e.status?(t.dirty(),sY(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s$:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new nX({in:e,out:t,typeName:I.ZodPipeline})}}class nQ extends s6{_parse(e){let t=this._def.innerType._parse(e),r=e=>(s1(e)&&(e.value=Object.freeze(e.value)),e);return s2(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function n0(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function n1(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return e?nS.create().superRefine((s,n)=>{let a=e(s);if(a instanceof Promise)return a.then(e=>{if(!e){var a,i;let e=n0(t,s),o=null==(a=null!=(i=e.fatal)?i:r)||a;n.addIssue((0,N._)((0,P._)({code:"custom"},e),{fatal:o}))}});if(!a){var i,o;let e=n0(t,s),a=null==(i=null!=(o=e.fatal)?o:r)||i;n.addIssue((0,N._)((0,P._)({code:"custom"},e),{fatal:a}))}}):nS.create()}nQ.create=(e,t)=>new nQ((0,P._)({innerType:e,typeName:I.ZodReadonly},s8(t)));let n2={object:nx.lazycreate};(m=I||(I={})).ZodString="ZodString",m.ZodNumber="ZodNumber",m.ZodNaN="ZodNaN",m.ZodBigInt="ZodBigInt",m.ZodBoolean="ZodBoolean",m.ZodDate="ZodDate",m.ZodSymbol="ZodSymbol",m.ZodUndefined="ZodUndefined",m.ZodNull="ZodNull",m.ZodAny="ZodAny",m.ZodUnknown="ZodUnknown",m.ZodNever="ZodNever",m.ZodVoid="ZodVoid",m.ZodArray="ZodArray",m.ZodObject="ZodObject",m.ZodUnion="ZodUnion",m.ZodDiscriminatedUnion="ZodDiscriminatedUnion",m.ZodIntersection="ZodIntersection",m.ZodTuple="ZodTuple",m.ZodRecord="ZodRecord",m.ZodMap="ZodMap",m.ZodSet="ZodSet",m.ZodFunction="ZodFunction",m.ZodLazy="ZodLazy",m.ZodLiteral="ZodLiteral",m.ZodEnum="ZodEnum",m.ZodEffects="ZodEffects",m.ZodNativeEnum="ZodNativeEnum",m.ZodOptional="ZodOptional",m.ZodNullable="ZodNullable",m.ZodDefault="ZodDefault",m.ZodCatch="ZodCatch",m.ZodPromise="ZodPromise",m.ZodBranded="ZodBranded",m.ZodPipeline="ZodPipeline",m.ZodReadonly="ZodReadonly";let n5=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"Input not instance of ".concat(e.name)};return n1(t=>t instanceof e,t)},n4=ng.create,n8=nm.create,n6=nG.create,n3=ny.create,n9=nv.create,n7=n_.create,ae=nb.create,at=nw.create,ar=nk.create,as=nS.create,an=nE.create,aa=nT.create,ai=nA.create,ao=nO.create,al=nx.create,ac=nx.strictCreate,au=nR.create,ah=nC.create,ad=nI.create,af=nP.create,ap=nN.create,ag=nU.create,am=nL.create,ay=nD.create,av=nB.create,a_=nF.create,ab=nq.create,aw=nM.create,ak=nZ.create,aS=nz.create,aE=nK.create,aT=nW.create,aA=nz.createWithPreprocess,aO=nX.create,ax=()=>n4().optional(),aR=()=>n8().optional(),aj=()=>n9().optional(),aC={string:e=>ng.create((0,N._)((0,P._)({},e),{coerce:!0})),number:e=>nm.create((0,N._)((0,P._)({},e),{coerce:!0})),boolean:e=>nv.create((0,N._)((0,P._)({},e),{coerce:!0})),bigint:e=>ny.create((0,N._)((0,P._)({},e),{coerce:!0})),date:e=>n_.create((0,N._)((0,P._)({},e),{coerce:!0}))};e.s(["BRAND",0,n$,"NEVER",0,s$,"Schema",()=>s6,"ZodAny",()=>nS,"ZodArray",()=>nO,"ZodBigInt",()=>ny,"ZodBoolean",()=>nv,"ZodBranded",()=>nY,"ZodCatch",()=>nJ,"ZodDate",()=>n_,"ZodDefault",()=>nH,"ZodDiscriminatedUnion",()=>nC,"ZodEffects",()=>nz,"ZodEnum",()=>nq,"ZodFirstPartyTypeKind",()=>I,"ZodFunction",()=>nD,"ZodIntersection",()=>nI,"ZodLazy",()=>nB,"ZodLiteral",()=>nF,"ZodMap",()=>nU,"ZodNaN",()=>nG,"ZodNativeEnum",()=>nM,"ZodNever",()=>nT,"ZodNull",()=>nk,"ZodNullable",()=>nW,"ZodNumber",()=>nm,"ZodObject",()=>nx,"ZodOptional",()=>nK,"ZodPipeline",()=>nX,"ZodPromise",()=>nZ,"ZodReadonly",()=>nQ,"ZodRecord",()=>nN,"ZodSchema",()=>s6,"ZodSet",()=>nL,"ZodString",()=>ng,"ZodSymbol",()=>nb,"ZodTransformer",()=>nz,"ZodTuple",()=>nP,"ZodType",()=>s6,"ZodUndefined",()=>nw,"ZodUnion",()=>nR,"ZodUnknown",()=>nE,"ZodVoid",()=>nA,"any",()=>as,"array",()=>ao,"bigint",()=>n3,"boolean",()=>n9,"coerce",0,aC,"custom",()=>n1,"date",()=>n7,"datetimeRegex",()=>np,"discriminatedUnion",()=>ah,"effect",()=>aS,"enum",()=>ab,"function",()=>ay,"instanceof",()=>n5,"intersection",()=>ad,"late",0,n2,"lazy",()=>av,"literal",()=>a_,"map",()=>ag,"nan",()=>n6,"nativeEnum",()=>aw,"never",()=>aa,"null",()=>ar,"nullable",()=>aT,"number",()=>n8,"object",()=>al,"oboolean",()=>aj,"onumber",()=>aR,"optional",()=>aE,"ostring",()=>ax,"pipeline",()=>aO,"preprocess",()=>aA,"promise",()=>ak,"record",()=>ap,"set",()=>am,"strictObject",()=>ac,"string",()=>n4,"symbol",()=>ae,"transformer",()=>aS,"tuple",()=>af,"undefined",()=>at,"union",()=>au,"unknown",()=>an,"void",()=>ai],72358),e.i(72358),e.i(83434),e.s(["BRAND",0,n$,"DIRTY",0,sY,"EMPTY_PATH",0,sH,"INVALID",0,s$,"NEVER",0,s$,"OK",0,sX,"ParseStatus",()=>sG,"Schema",()=>s6,"ZodAny",()=>nS,"ZodArray",()=>nO,"ZodBigInt",()=>ny,"ZodBoolean",()=>nv,"ZodBranded",()=>nY,"ZodCatch",()=>nJ,"ZodDate",()=>n_,"ZodDefault",()=>nH,"ZodDiscriminatedUnion",()=>nC,"ZodEffects",()=>nz,"ZodEnum",()=>nq,"ZodError",()=>sq,"ZodFirstPartyTypeKind",()=>I,"ZodFunction",()=>nD,"ZodIntersection",()=>nI,"ZodIssueCode",0,sF,"ZodLazy",()=>nB,"ZodLiteral",()=>nF,"ZodMap",()=>nU,"ZodNaN",()=>nG,"ZodNativeEnum",()=>nM,"ZodNever",()=>nT,"ZodNull",()=>nk,"ZodNullable",()=>nW,"ZodNumber",()=>nm,"ZodObject",()=>nx,"ZodOptional",()=>nK,"ZodParsedType",0,sD,"ZodPipeline",()=>nX,"ZodPromise",()=>nZ,"ZodReadonly",()=>nQ,"ZodRecord",()=>nN,"ZodSchema",()=>s6,"ZodSet",()=>nL,"ZodString",()=>ng,"ZodSymbol",()=>nb,"ZodTransformer",()=>nz,"ZodTuple",()=>nP,"ZodType",()=>s6,"ZodUndefined",()=>nw,"ZodUnion",()=>nR,"ZodUnknown",()=>nE,"ZodVoid",()=>nA,"addIssueToContext",()=>sJ,"any",()=>as,"array",()=>ao,"bigint",()=>n3,"boolean",()=>n9,"coerce",0,aC,"custom",()=>n1,"date",()=>n7,"datetimeRegex",()=>np,"defaultErrorMap",0,sM,"discriminatedUnion",()=>ah,"effect",()=>aS,"enum",()=>ab,"function",()=>ay,"getErrorMap",()=>sK,"getParsedType",0,sB,"instanceof",()=>n5,"intersection",()=>ad,"isAborted",0,sQ,"isAsync",0,s2,"isDirty",0,s0,"isValid",0,s1,"late",0,n2,"lazy",()=>av,"literal",()=>a_,"makeIssue",0,sW,"map",()=>ag,"nan",()=>n6,"nativeEnum",()=>aw,"never",()=>aa,"null",()=>ar,"nullable",()=>aT,"number",()=>n8,"object",()=>al,"objectUtil",()=>j,"oboolean",()=>aj,"onumber",()=>aR,"optional",()=>aE,"ostring",()=>ax,"pipeline",()=>aO,"preprocess",()=>aA,"promise",()=>ak,"quotelessJson",0,sV,"record",()=>ap,"set",()=>am,"setErrorMap",()=>sz,"strictObject",()=>ac,"string",()=>n4,"symbol",()=>ae,"transformer",()=>aS,"tuple",()=>af,"undefined",()=>at,"union",()=>au,"unknown",()=>an,"util",()=>R,"void",()=>ai],70945);var aI=e.i(70945),aI=aI;let aP=aI.object({name:aI.string().min(2,"Name must be at least 2 characters").max(60,"Name is too long"),email:aI.string().email("Please enter a valid email address"),phone:aI.string().regex(/^\+?[\d\s\-().]{10,}$/,"Please enter a valid phone number"),password:aI.string().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[0-9]/,"Password must contain at least one number"),profileType:aI.enum(["residential","business"]),preferredLanguage:aI.enum(["en","es"]).default("en"),businessName:aI.string().optional(),ein:aI.string().optional(),agreeToTerms:aI.boolean().refine(e=>!0===e,{message:"You must agree to the terms"})}),aN=e=>"business"!==e.profileType||!!e.businessName&&!!e.ein;aP.refine(aN,{message:"Business name and EIN are required for business accounts",path:["businessName"]});let aU=aI.object({email:aI.string().email("Please enter a valid email address"),password:aI.string().min(1,"Password is required")}),aL=aI.object({street:aI.string().min(5,"Please enter a valid street address"),apt:aI.string().optional(),city:aI.string().min(2,"City is required"),state:aI.string().length(2,"Please use 2-letter state code (e.g. NY)"),zip:aI.string().regex(/^\d{5}$/,"Please enter a valid 5-digit ZIP code"),instructions:aI.string().max(200,"Instructions too long").optional()}),aD=aP.extend({birthday:aI.string().min(1,"Birthday is required"),deliveryAddress:aL}).refine(aN,{message:"Business name and EIN are required for business accounts",path:["businessName"]});aI.object({deliveryAddress:aL,paymentMethodId:aI.string().min(1,"Please select a payment method"),saveAddress:aI.boolean().default(!1),notes:aI.string().max(200).optional()}),aI.object({customerPhone:aI.string().regex(/^\+?[\d\s\-().]{10,}$/,"Invalid phone number"),deliveryAddress:aL,items:aI.array(aI.object({productId:aI.string().uuid(),weightLbs:aI.enum(["10","20","30","40"]),quantity:aI.number().int().min(1).max(99)})).min(1,"Order must have at least one item"),paymentMethod:aI.enum(["card","cash_on_delivery"]),notes:aI.string().optional()}),e.s(["loginSchema",0,aU,"signupWithAddressSchema",0,aD],24415);var aB=e.i(26557),aF=e.i(50898);let aV=(0,L.forwardRef)(function(e,t){let[r,...s]=[e,t],{label:n,error:a,required:i,inputClassName:o,id:l}=r,c=(0,U._)(r,["label","error","required","inputClassName","id"]),[u]=s,h=null!=l?l:"field-".concat(n.replace(/\s/g,"-").toLowerCase());return(0,aB.jsxs)("div",{className:"w-full",children:[(0,aB.jsxs)("label",{htmlFor:h,className:"block text-xs font-semibold uppercase tracking-[0.06em] text-text-muted mb-1.5",children:[n,i&&(0,aB.jsx)("span",{className:"text-brand-sage ml-0.5",children:"*"})]}),(0,aB.jsx)("input",(0,P._)({ref:u,id:h,"aria-invalid":!!a,"aria-describedby":a?"".concat(h,"-error"):void 0,className:(0,aF.cn)("input",a&&"border-[color:var(--color-error)] focus:border-[color:var(--color-error)]",o)},c)),a&&(0,aB.jsx)("p",{id:"".concat(h,"-error"),role:"alert",className:"mt-1.5 text-sm text-[color:var(--color-error)]",children:a})]})});e.s(["FormField",0,aV],94545);let aq={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-2",lg:"w-14 h-14 border-[3px]"},aM={sage:"border-brand-sage border-t-transparent",primary:"border-primary border-t-transparent",mint:"border-brand-mint border-t-transparent",white:"border-text-primary border-t-transparent"};function aZ(e){let{size:t="md",color:r="sage",className:s}=e;return(0,aB.jsx)("div",{role:"status","aria-label":"Loading",className:(0,aF.cn)("rounded-full animate-spin",aq[t],aM[r],s)})}e.s(["Spinner",()=>aZ],41217)}]);