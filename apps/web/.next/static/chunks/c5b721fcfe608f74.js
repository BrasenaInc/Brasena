(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41217,e=>{"use strict";var r=e.i(26557),s=e.i(50898);let t={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-2",lg:"w-14 h-14 border-[3px]"},a={sage:"border-brand-sage border-t-transparent",primary:"border-primary border-t-transparent",mint:"border-brand-mint border-t-transparent",white:"border-text-primary border-t-transparent"};function l(e){let{size:l="md",color:i="sage",className:d}=e;return(0,r.jsx)("div",{role:"status","aria-label":"Loading",className:(0,s.cn)("rounded-full animate-spin",t[l],a[i],d)})}e.s(["Spinner",()=>l])},52132,e=>{"use strict";var r=e.i(15424),s=e.i(26557),t=e.i(68645),a=e.i(33201),l=e.i(37621),i=e.i(22233),d=e.i(43217),o=e.i(70718),n=e.i(78600),m=e.i(593),c=e.i(28256),u=e.i(71386),x=e.i(24415),p=e.i(52629),b=e.i(94545),f=e.i(41217),g=e.i(50898);let h={name:"",email:"",phone:"",password:"",profileType:"residential",preferredLanguage:"en",birthday:"",deliveryAddress:{street:"",apt:"",city:"",state:"",zip:""},agreeToTerms:!1};function y(){var e,y,v,j,N,w,A,F,S,T,_,z,L,q;let C=(0,l.useRouter)(),{t:O}=(0,c.useLanguage)(),k=(0,u.useSupabase)(),[R,U]=(0,t.useState)(!1),[E,P]=(0,t.useState)(null),{register:B,handleSubmit:G,watch:H,setValue:I,formState:{errors:K,isSubmitting:W}}=(0,i.useForm)({resolver:(0,d.zodResolver)(x.signupWithAddressSchema),defaultValues:h}),D=H("preferredLanguage");async function J(e){P(null);try{var r,s;let{data:t,error:a}=await k.auth.signUp({email:e.email,password:e.password,options:{data:{name:e.name,phone:e.phone,profile_type:"residential",preferred_language:e.preferredLanguage}}});if(a)return void P(a.message);let l=null==(s=t.user)?void 0:s.id;if(!l)return void P("Account created but session not found. Please sign in.");let i={user_id:l,street:e.deliveryAddress.street,apt:e.deliveryAddress.apt||null,city:e.deliveryAddress.city,state:e.deliveryAddress.state,zip:e.deliveryAddress.zip,instructions:null!=(r=e.deliveryAddress.instructions)?r:null,is_default:!0},{error:d}=await k.from("addresses").insert(i);if(d)return void P(d.message);C.push(m.ROUTES.SHOP)}catch(e){P(e instanceof Error?e.message:"Something went wrong")}}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-6 flex justify-center",children:(0,s.jsx)(p.BrasenaLogo,{size:"sm"})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)(a.default,{href:m.ROUTES.SIGNUP,className:"text-text-secondary hover:text-brand-sage text-sm font-medium min-h-touch flex items-center",children:["â† ",O("common.back")]}),(0,s.jsx)(a.default,{href:m.ROUTES.LOGIN,className:"text-text-secondary hover:text-brand-sage text-sm font-medium min-h-touch flex items-center",children:O("login.submit")})]}),(0,s.jsx)("p",{className:"text-brand-sage text-sm font-medium mb-6",children:O("signup.step2")}),(0,s.jsx)("h1",{className:"font-display text-2xl font-semibold text-text-primary mb-1",children:O("form.title")}),(0,s.jsx)("p",{className:"text-text-secondary text-base mb-6",children:O("form.subtitle")}),(0,s.jsxs)("form",{onSubmit:G(J),className:"flex flex-col gap-4",children:[(0,s.jsx)(b.FormField,(0,r._)({label:O("form.name"),required:!0,error:null==(e=K.name)?void 0:e.message},B("name"))),(0,s.jsx)(b.FormField,(0,r._)({label:O("form.email"),type:"email",autoComplete:"email",required:!0,error:null==(y=K.email)?void 0:y.message},B("email"))),(0,s.jsx)(b.FormField,(0,r._)({label:O("form.phone"),type:"tel",autoComplete:"tel",required:!0,error:null==(v=K.phone)?void 0:v.message},B("phone"))),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-text-primary mb-1.5",children:[O("form.password")," ",(0,s.jsx)("span",{className:"text-brand-sage ml-0.5",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",(0,r._)({type:R?"text":"password",autoComplete:"new-password",className:(0,g.cn)("input pr-12",K.password&&"border-[color:var(--color-error)]")},B("password"))),(0,s.jsx)("button",{type:"button",onClick:()=>U(e=>!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary min-h-touch min-w-touch flex items-center justify-center","aria-label":R?"Hide password":"Show password",children:R?(0,s.jsx)(n.EyeOff,{className:"w-5 h-5"}):(0,s.jsx)(o.Eye,{className:"w-5 h-5"})})]}),K.password&&(0,s.jsx)("p",{role:"alert",className:"mt-1.5 text-sm text-[color:var(--color-error)]",children:K.password.message})]}),(0,s.jsx)(b.FormField,(0,r._)({label:O("form.birthday"),type:"date",required:!0,error:null==(j=K.birthday)?void 0:j.message},B("birthday"))),(0,s.jsxs)("fieldset",{className:"space-y-3",children:[(0,s.jsx)("legend",{className:"text-sm font-medium text-text-primary",children:O("form.addressSection")}),(0,s.jsx)(b.FormField,(0,r._)({label:O("form.street"),required:!0,error:null==(w=K.deliveryAddress)||null==(N=w.street)?void 0:N.message},B("deliveryAddress.street"))),(0,s.jsx)(b.FormField,(0,r._)({label:O("form.aptShort"),error:null==(F=K.deliveryAddress)||null==(A=F.apt)?void 0:A.message},B("deliveryAddress.apt"))),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(b.FormField,(0,r._)({label:O("form.city"),required:!0,error:null==(T=K.deliveryAddress)||null==(S=T.city)?void 0:S.message},B("deliveryAddress.city"))),(0,s.jsx)(b.FormField,(0,r._)({label:O("form.state"),required:!0,error:null==(z=K.deliveryAddress)||null==(_=z.state)?void 0:_.message},B("deliveryAddress.state")))]}),(0,s.jsx)(b.FormField,(0,r._)({label:O("form.zip"),required:!0,error:null==(q=K.deliveryAddress)||null==(L=q.zip)?void 0:L.message},B("deliveryAddress.zip")))]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("span",{className:"block text-sm font-medium text-text-primary mb-2",children:O("form.language")}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>I("preferredLanguage","en"),className:(0,g.cn)("flex-1 py-3 rounded-xl font-medium min-h-touch border transition-all","en"===D?"bg-brand-sage/20 border-brand-sage text-brand-sage":"bg-surface-muted border-surface-border text-text-secondary hover:border-brand-sage/40"),children:O("common.english")}),(0,s.jsx)("button",{type:"button",onClick:()=>I("preferredLanguage","es"),className:(0,g.cn)("flex-1 py-3 rounded-xl font-medium min-h-touch border transition-all","es"===D?"bg-brand-sage/20 border-brand-sage text-brand-sage":"bg-surface-muted border-surface-border text-text-secondary hover:border-brand-sage/40"),children:O("common.espanol")})]})]}),(0,s.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,s.jsx)("input",(0,r._)({type:"checkbox",className:"mt-1 w-5 h-5 rounded border-surface-border bg-surface-muted text-brand-sage focus:ring-brand-sage"},B("agreeToTerms"))),(0,s.jsx)("span",{className:"text-sm text-text-secondary",children:O("form.agreeTerms")})]}),K.agreeToTerms&&(0,s.jsx)("p",{role:"alert",className:"text-sm text-[color:var(--color-error)]",children:K.agreeToTerms.message}),E&&(0,s.jsx)("p",{role:"alert",className:"text-sm text-[color:var(--color-error)]",children:E}),(0,s.jsx)("button",{type:"submit",disabled:W,className:"btn-primary w-full flex items-center justify-center gap-2 min-h-touch",children:W?(0,s.jsx)(f.Spinner,{size:"sm",color:"white"}):O("form.submit")})]})]})}e.s(["default",()=>y])}]);