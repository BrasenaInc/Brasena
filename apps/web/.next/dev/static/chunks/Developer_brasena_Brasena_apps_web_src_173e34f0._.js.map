{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/dre/Developer/brasena/Brasena/apps/web/src/lib/hooks/useProducts.ts"],"sourcesContent":["\"use client\"\n\nimport { useQuery } from \"@tanstack/react-query\"\nimport type { Database } from \"@/types/supabase\"\nimport { useSupabase } from \"@/lib/hooks/useSupabase\"\n\ntype ProductRow = Database[\"public\"][\"Tables\"][\"products\"][\"Row\"]\ntype WeightTierRow = Database[\"public\"][\"Tables\"][\"weight_tiers\"][\"Row\"]\n\nexport interface ProductWithTiers extends ProductRow {\n  weight_tiers: (WeightTierRow & {\n    total_price?: number\n    savings_amount?: number\n    savings_percent?: number\n  })[]\n}\n\nfunction computeTierExtras(\n  tiers: WeightTierRow[],\n  basePricePerLb: number\n): (WeightTierRow & { total_price: number; savings_amount: number; savings_percent: number })[] {\n  return tiers.map((t) => {\n    const total_price = t.weight_lbs * t.price_per_lb\n    const baseTotal = t.weight_lbs * basePricePerLb\n    const savings_amount = baseTotal - total_price\n    const savings_percent = basePricePerLb > 0 ? (savings_amount / baseTotal) * 100 : 0\n    return { ...t, total_price, savings_amount, savings_percent }\n  })\n}\n\nfunction buildProductWithTiers(\n  product: ProductRow,\n  tiers: WeightTierRow[]\n): ProductWithTiers {\n  const sorted = [...tiers].sort((a, b) => a.weight_lbs - b.weight_lbs)\n  const basePrice = sorted[0]?.price_per_lb ?? 0\n  const weight_tiers = computeTierExtras(sorted, basePrice)\n  return { ...product, weight_tiers }\n}\n\nexport function useProducts(category?: string): {\n  data: ProductWithTiers[] | undefined\n  isLoading: boolean\n  error: Error | null\n} {\n  const supabase = useSupabase()\n\n  const { data, isLoading, error } = useQuery({\n    queryKey: [\"products\", category ?? \"all\"],\n    queryFn: async (): Promise<ProductWithTiers[]> => {\n      let q = supabase\n        .from(\"products\")\n        .select(\"*\")\n        .eq(\"in_stock\", true)\n        .order(\"created_at\", { ascending: false })\n        .limit(12)\n      if (category && category !== \"All\") {\n        q = q.eq(\"category\", category)\n      }\n      const { data: products, error: productsError } = await q\n      if (productsError) throw productsError\n      if (!products?.length) return []\n\n      const ids = products.map((p) => p.id)\n      const { data: tiers, error: tiersError } = await supabase\n        .from(\"weight_tiers\")\n        .select(\"*\")\n        .in(\"product_id\", ids)\n        .order(\"weight_lbs\", { ascending: true })\n      if (tiersError) throw tiersError\n\n      const tiersByProduct = (tiers ?? []).reduce<Record<string, WeightTierRow[]>>((acc, t) => {\n        if (!acc[t.product_id]) acc[t.product_id] = []\n        acc[t.product_id].push(t)\n        return acc\n      }, {})\n\n      return products.map((p) => {\n        const productTiers = tiersByProduct[p.id] ?? []\n        return buildProductWithTiers(p, productTiers)\n      })\n    },\n  })\n\n  return { data, isLoading, error: error as Error | null }\n}\n\nexport function useProduct(slug: string): {\n  data: ProductWithTiers | undefined\n  isLoading: boolean\n  error: Error | null\n} {\n  const supabase = useSupabase()\n\n  const { data, isLoading, error } = useQuery({\n    queryKey: [\"product\", slug],\n    queryFn: async (): Promise<ProductWithTiers | undefined> => {\n      const { data: product, error: productError } = await supabase\n        .from(\"products\")\n        .select(\"*\")\n        .eq(\"slug\", slug)\n        .maybeSingle()\n      if (productError) throw productError\n      if (!product) return undefined\n\n      const { data: tiers, error: tiersError } = await supabase\n        .from(\"weight_tiers\")\n        .select(\"*\")\n        .eq(\"product_id\", product.id)\n        .order(\"weight_lbs\", { ascending: true })\n      if (tiersError) throw tiersError\n\n      return buildProductWithTiers(product, tiers ?? [])\n    },\n    enabled: !!slug,\n  })\n\n  return { data, isLoading, error: error as Error | null }\n}\n\nexport function useFeaturedProduct(): {\n  data: ProductWithTiers | undefined\n  isLoading: boolean\n  error: Error | null\n} {\n  const supabase = useSupabase()\n\n  const { data, isLoading, error } = useQuery({\n    queryKey: [\"featured-product\"],\n    queryFn: async (): Promise<ProductWithTiers | undefined> => {\n      const { data: product, error: productError } = await supabase\n        .from(\"products\")\n        .select(\"*\")\n        .eq(\"featured\", true)\n        .eq(\"in_stock\", true)\n        .limit(1)\n        .maybeSingle()\n      if (productError) throw productError\n      if (!product) return undefined\n\n      const { data: tiers, error: tiersError } = await supabase\n        .from(\"weight_tiers\")\n        .select(\"*\")\n        .eq(\"product_id\", product.id)\n        .order(\"weight_lbs\", { ascending: true })\n      if (tiersError) throw tiersError\n\n      return buildProductWithTiers(product, tiers ?? [])\n    },\n  })\n\n  return { data, isLoading, error: error as Error | null }\n}\n\nexport type PromotionRow = Database[\"public\"][\"Tables\"][\"promotions\"][\"Row\"]\n\nexport function useActivePromotion(): {\n  data: PromotionRow | null | undefined\n  isLoading: boolean\n  error: Error | null\n} {\n  const supabase = useSupabase()\n\n  const { data, isLoading, error } = useQuery({\n    queryKey: [\"active-promotion\"],\n    queryFn: async (): Promise<PromotionRow | null> => {\n      const { data: rows, error: e } = await supabase\n        .from(\"promotions\")\n        .select(\"*\")\n        .eq(\"is_active\", true)\n        .gt(\"expires_at\", new Date().toISOString())\n        .limit(1)\n        .maybeSingle()\n      if (e) {\n        if ((e as { code?: string }).code === \"42P01\") return null\n        throw e\n      }\n      return rows\n    },\n  })\n\n  return { data, isLoading, error: error as Error | null }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 324, "column": 0}, "map": {"version":3,"sources":["file:///Users/dre/Developer/brasena/Brasena/apps/web/src/store/cart.store.ts"],"sourcesContent":["import { create } from \"zustand\"\nimport { persist } from \"zustand/middleware\"\nimport type { CartItem, Product } from \"@/types\"\n\n/**\n * Cart store using Zustand with localStorage persistence.\n *\n * Why Zustand over Context API:\n * - No provider wrapping needed, import and use anywhere\n * - Built-in persist middleware handles localStorage sync\n * - Minimal re-renders: components only re-render when their\n *   specific slice of state changes, not the whole cart\n */\n\ninterface CartStore {\n  items: CartItem[]\n  isOpen: boolean\n\n  // Actions\n  addItem: (product: Product, weightLbs: 10 | 20 | 30 | 40) => void\n  removeItem: (productId: string, weightLbs: number) => void\n  updateQuantity: (productId: string, weightLbs: number, quantity: number) => void\n  clearCart: () => void\n  toggleCart: () => void\n\n  // Computed (derived from items)\n  itemCount: () => number\n  subtotal: () => number\n  totalSavings: () => number\n}\n\nexport const useCartStore = create<CartStore>()(\n  persist(\n    (set, get) => ({\n      items: [],\n      isOpen: false,\n\n      addItem: (product, weightLbs) => {\n        const { items } = get()\n        const tier = product.weightTiers.find(t => t.weightLbs === weightLbs)\n\n        if (!tier) {\n          console.error(`No pricing tier found for ${weightLbs}lb`)\n          return\n        }\n\n        const existingIndex = items.findIndex(\n          i => i.productId === product.id && i.weightLbs === weightLbs\n        )\n\n        if (existingIndex >= 0) {\n          // Increment quantity if already in cart\n          const updated = [...items]\n          const existing = updated[existingIndex]\n          updated[existingIndex] = {\n            ...existing,\n            quantity: existing.quantity + 1,\n            subtotal: (existing.quantity + 1) * tier.totalPrice,\n          }\n          set({ items: updated })\n        } else {\n          // Add new cart item\n          const newItem: CartItem = {\n            productId: product.id,\n            product,\n            weightLbs,\n            quantity: 1,\n            unitPrice: tier.totalPrice,\n            subtotal: tier.totalPrice,\n          }\n          set({ items: [...items, newItem] })\n        }\n      },\n\n      removeItem: (productId, weightLbs) => {\n        set(state => ({\n          items: state.items.filter(\n            i => !(i.productId === productId && i.weightLbs === weightLbs)\n          ),\n        }))\n      },\n\n      updateQuantity: (productId, weightLbs, quantity) => {\n        if (quantity <= 0) {\n          get().removeItem(productId, weightLbs)\n          return\n        }\n        set(state => ({\n          items: state.items.map(i =>\n            i.productId === productId && i.weightLbs === weightLbs\n              ? { ...i, quantity, subtotal: quantity * i.unitPrice }\n              : i\n          ),\n        }))\n      },\n\n      clearCart: () => set({ items: [] }),\n\n      toggleCart: () => set(state => ({ isOpen: !state.isOpen })),\n\n      // Derived values - computed on demand, not stored\n      itemCount: () =>\n        get().items.reduce((sum, item) => sum + item.quantity, 0),\n\n      subtotal: () =>\n        get().items.reduce((sum, item) => sum + item.subtotal, 0),\n\n      totalSavings: () =>\n        get().items.reduce((sum, item) => {\n          const tier = item.product.weightTiers.find(\n            t => t.weightLbs === item.weightLbs\n          )\n          return sum + (tier?.savingsAmount ?? 0) * item.quantity\n        }, 0),\n    }),\n    {\n      name: \"brasena-cart\",\n      // Only persist items, not UI state like isOpen\n      partialize: (state) => ({ items: state.items }),\n    }\n  )\n)\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;;;;;AA8BO,IAAM,eAAe,IAAA,wMAAM,IAChC,IAAA,8LAAO,EACL,SAAC,KAAK;WAAS;QACb,OAAO,EAAE;QACT,QAAQ;QAER,SAAS,SAAC,SAAS;YACjB,IAAM,AAAE,QAAU,MAAV;YACR,IAAM,OAAO,QAAQ,WAAW,CAAC,IAAI,CAAC,SAAA;uBAAK,EAAE,SAAS,KAAK;;YAE3D,IAAI,CAAC,MAAM;gBACT,QAAQ,KAAK,CAAC,AAAC,6BAAsC,OAAV,WAAU;gBACrD;YACF;YAEA,IAAM,gBAAgB,MAAM,SAAS,CACnC,SAAA;uBAAK,EAAE,SAAS,KAAK,QAAQ,EAAE,IAAI,EAAE,SAAS,KAAK;;YAGrD,IAAI,iBAAiB,GAAG;gBACtB,wCAAwC;gBACxC,IAAM,UAAW,gNAAG;gBACpB,IAAM,WAAW,OAAO,CAAC,cAAc;gBACvC,OAAO,CAAC,cAAc,GAAG,8ZACpB;oBACH,UAAU,SAAS,QAAQ,GAAG;oBAC9B,UAAU,CAAC,SAAS,QAAQ,GAAG,CAAC,IAAI,KAAK,UAAU;;gBAErD,IAAI;oBAAE,OAAO;gBAAQ;YACvB,OAAO;gBACL,oBAAoB;gBACpB,IAAM,UAAoB;oBACxB,WAAW,QAAQ,EAAE;oBACrB,SAAA;oBACA,WAAA;oBACA,UAAU;oBACV,WAAW,KAAK,UAAU;oBAC1B,UAAU,KAAK,UAAU;gBAC3B;gBACA,IAAI;oBAAE,OAAO,AAAC,gNAAG,cAAJ;wBAAW;qBAAQ;gBAAC;YACnC;QACF;QAEA,YAAY,SAAC,WAAW;YACtB,IAAI,SAAA;uBAAU;oBACZ,OAAO,MAAM,KAAK,CAAC,MAAM,CACvB,SAAA;+BAAK,CAAC,CAAC,EAAE,SAAS,KAAK,aAAa,EAAE,SAAS,KAAK,SAAS;;gBAEjE;;QACF;QAEA,gBAAgB,SAAC,WAAW,WAAW;YACrC,IAAI,YAAY,GAAG;gBACjB,MAAM,UAAU,CAAC,WAAW;gBAC5B;YACF;YACA,IAAI,SAAA;uBAAU;oBACZ,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,SAAA;+BACrB,EAAE,SAAS,KAAK,aAAa,EAAE,SAAS,KAAK,YACzC,8ZAAK;4BAAG,UAAA;4BAAU,UAAU,WAAW,EAAE,SAAS;6BAClD;;gBAER;;QACF;QAEA,WAAW;mBAAM,IAAI;gBAAE,OAAO,EAAE;YAAC;;QAEjC,YAAY;mBAAM,IAAI,SAAA;uBAAU;oBAAE,QAAQ,CAAC,MAAM,MAAM;gBAAC;;;QAExD,kDAAkD;QAClD,WAAW;mBACT,MAAM,KAAK,CAAC,MAAM,CAAC,SAAC,KAAK;uBAAS,MAAM,KAAK,QAAQ;eAAE;;QAEzD,UAAU;mBACR,MAAM,KAAK,CAAC,MAAM,CAAC,SAAC,KAAK;uBAAS,MAAM,KAAK,QAAQ;eAAE;;QAEzD,cAAc;mBACZ,MAAM,KAAK,CAAC,MAAM,CAAC,SAAC,KAAK;;gBACvB,IAAM,OAAO,KAAK,OAAO,CAAC,WAAW,CAAC,IAAI,CACxC,SAAA;2BAAK,EAAE,SAAS,KAAK,KAAK,SAAS;;gBAErC,OAAO,MAAM,CAAA,QAAC,iBAAA,2BAAA,KAAM,aAAa,AAAK,uCAAD,KAAK,KAAK,QAAQ;YACzD,GAAG;;IACP;GACA;IACE,MAAM;IACN,+CAA+C;IAC/C,YAAY,SAAC;eAAW;YAAE,OAAO,MAAM,KAAK;QAAC;;AAC/C"}},
    {"offset": {"line": 458, "column": 0}, "map": {"version":3,"sources":["file:///Users/dre/Developer/brasena/Brasena/apps/web/src/components/features/shop/BottomNav.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { Home, Search, ShoppingBag, User } from \"lucide-react\"\nimport { ROUTES } from \"@/config\"\nimport { useLanguage } from \"@/lib/context/language\"\nimport { useCartStore } from \"@/store/cart.store\"\nimport { cn } from \"@/lib/utils\"\n\nconst ITEMS = [\n  { href: ROUTES.SHOP, icon: Home, key: \"nav.home\" },\n  { href: ROUTES.CATEGORIES, icon: Search, key: \"nav.browse\" },\n  { href: ROUTES.CART, icon: ShoppingBag, key: \"nav.cart\" },\n  { href: ROUTES.ACCOUNT, icon: User, key: \"nav.account\" },\n] as const\n\nexport function BottomNav(): JSX.Element {\n  const pathname = usePathname()\n  const { t } = useLanguage()\n  const itemCount = useCartStore((s) => s.itemCount())\n\n  return (\n    <nav\n      className=\"sticky bottom-0 left-0 right-0 flex items-center border-t\"\n      style={{\n        background: \"var(--nav-bg)\",\n        backdropFilter: \"blur(20px)\",\n        borderColor: \"var(--border)\",\n        padding: \"10px 0 24px\",\n      }}\n    >\n      {ITEMS.map(({ href, icon: Icon, key }) => {\n        const active = pathname === href\n        const isCart = href === ROUTES.CART\n        return (\n          <Link\n            key={href}\n            href={href}\n            className=\"flex-1 flex flex-col items-center justify-center gap-1 min-h-[44px] min-w-[44px]\"\n            aria-current={active ? \"page\" : undefined}\n          >\n            <span className=\"relative inline-flex\">\n              <Icon\n                className=\"h-[22px] w-[22px] transition-colors\"\n                style={{ color: active ? \"var(--sage)\" : \"var(--text3)\" }}\n                strokeWidth={1.8}\n              />\n              {isCart && itemCount > 0 && (\n                <span\n                  className=\"absolute -top-1 -right-2 min-w-[16px] h-4 rounded-full flex items-center justify-center text-[10px] font-bold px-1\"\n                  style={{ background: \"var(--sage)\", color: \"var(--color-brand-black)\" }}\n                >\n                  {itemCount > 99 ? \"99+\" : itemCount}\n                </span>\n              )}\n            </span>\n            <span\n              className={cn(\"text-[10px] font-medium\")}\n              style={{ color: active ? \"var(--sage)\" : \"var(--text3)\" }}\n            >\n              {t(key)}\n            </span>\n          </Link>\n        )\n      })}\n    </nav>\n  )\n}\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;AARA;;;;;;;;AAUA,IAAM,QAAQ;IACZ;QAAE,MAAM,qLAAM,CAAC,IAAI;QAAE,MAAM,gPAAI;QAAE,KAAK;IAAW;IACjD;QAAE,MAAM,qLAAM,CAAC,UAAU;QAAE,MAAM,sPAAM;QAAE,KAAK;IAAa;IAC3D;QAAE,MAAM,qLAAM,CAAC,IAAI;QAAE,MAAM,yQAAW;QAAE,KAAK;IAAW;IACxD;QAAE,MAAM,qLAAM,CAAC,OAAO;QAAE,MAAM,gPAAI;QAAE,KAAK;IAAc;CACxD;AAEM,SAAS;;;IACd,IAAM,WAAW,IAAA,uLAAW;IAC5B,IAAM,AAAE,IAAM,IAAA,sMAAW,IAAjB;IACR,IAAM,YAAY,IAAA,kMAAY;6CAAC,SAAC;mBAAM,EAAE,SAAS;;;IAEjD,qBACE,gOAAC;QACC,WAAU;QACV,OAAO;YACL,YAAY;YACZ,gBAAgB;YAChB,aAAa;YACb,SAAS;QACX;kBAEC,MAAM,GAAG,CAAC;gBAAG,aAAA,MAAM,AAAM,aAAN,MAAY,YAAA;YAC9B,IAAM,SAAS,aAAa;YAC5B,IAAM,SAAS,SAAS,qLAAM,CAAC,IAAI;YACnC,qBACE,gOAAC,6MAAI;gBAEH,MAAM;gBACN,WAAU;gBACV,gBAAc,SAAS,SAAS;;kCAEhC,gOAAC;wBAAK,WAAU;;0CACd,gOAAC;gCACC,WAAU;gCACV,OAAO;oCAAE,OAAO,SAAS,gBAAgB;gCAAe;gCACxD,aAAa;;;;;;4BAEd,UAAU,YAAY,mBACrB,gOAAC;gCACC,WAAU;gCACV,OAAO;oCAAE,YAAY;oCAAe,OAAO;gCAA2B;0CAErE,YAAY,KAAK,QAAQ;;;;;;;;;;;;kCAIhC,gOAAC;wBACC,WAAW,IAAA,uLAAE,EAAC;wBACd,OAAO;4BAAE,OAAO,SAAS,gBAAgB;wBAAe;kCAEvD,EAAE;;;;;;;eAxBA;;;;;QA4BX;;;;;;AAGN;GAnDgB;;QACG,uLAAW;QACd,sMAAW;QACP,kMAAY;;;KAHhB"}},
    {"offset": {"line": 607, "column": 0}, "map": {"version":3,"sources":["file:///Users/dre/Developer/brasena/Brasena/apps/web/src/components/ui/ThemeToggle.tsx"],"sourcesContent":["\"use client\"\n\nimport { Moon, Sun } from \"lucide-react\"\nimport { useTheme } from \"@/lib/context/theme\"\nimport { cn } from \"@/lib/utils\"\n\nexport function ThemeToggle(): JSX.Element {\n  const { theme, setTheme } = useTheme()\n\n  return (\n    <div\n      className=\"inline-flex rounded-[20px] border p-0.5 gap-0.5\"\n      style={{ borderColor: \"var(--border)\", background: \"var(--card)\" }}\n      role=\"group\"\n      aria-label=\"Theme\"\n    >\n      <button\n        type=\"button\"\n        onClick={() => setTheme(\"dark\")}\n        className={cn(\n          \"rounded-2xl px-3 py-1.5 text-xs font-medium flex items-center gap-1.5 min-h-[44px] transition-all\",\n          theme === \"dark\" ? \"bg-[var(--sage)] text-[var(--color-brand-black)]\" : \"bg-transparent\"\n        )}\n        style={theme !== \"dark\" ? { color: \"var(--text3)\" } : undefined}\n      >\n        <Moon className=\"h-4 w-4\" strokeWidth={1.8} />\n        Dark\n      </button>\n      <button\n        type=\"button\"\n        onClick={() => setTheme(\"light\")}\n        className={cn(\n          \"rounded-2xl px-3 py-1.5 text-xs font-medium flex items-center gap-1.5 min-h-[44px] transition-all\",\n          theme === \"light\" ? \"bg-[var(--sage)] text-[var(--color-brand-black)]\" : \"bg-transparent\"\n        )}\n        style={theme !== \"light\" ? { color: \"var(--text3)\" } : undefined}\n      >\n        <Sun className=\"h-4 w-4\" strokeWidth={1.8} />\n        Light\n      </button>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;;AAEA;AAAA;AACA;AACA;;;;AAJA;;;;AAMO,SAAS;;IACd,IAA4B,YAAA,IAAA,gMAAQ,KAA5B,QAAoB,UAApB,OAAO,WAAa,UAAb;IAEf,qBACE,gOAAC;QACC,WAAU;QACV,OAAO;YAAE,aAAa;YAAiB,YAAY;QAAc;QACjE,MAAK;QACL,cAAW;;0BAEX,gOAAC;gBACC,MAAK;gBACL,SAAS;2BAAM,SAAS;;gBACxB,WAAW,IAAA,uLAAE,EACX,qGACA,UAAU,SAAS,qDAAqD;gBAE1E,OAAO,UAAU,SAAS;oBAAE,OAAO;gBAAe,IAAI;;kCAEtD,gOAAC,gPAAI;wBAAC,WAAU;wBAAU,aAAa;;;;;;oBAAO;;;;;;;0BAGhD,gOAAC;gBACC,MAAK;gBACL,SAAS;2BAAM,SAAS;;gBACxB,WAAW,IAAA,uLAAE,EACX,qGACA,UAAU,UAAU,qDAAqD;gBAE3E,OAAO,UAAU,UAAU;oBAAE,OAAO;gBAAe,IAAI;;kCAEvD,gOAAC,6OAAG;wBAAC,WAAU;wBAAU,aAAa;;;;;;oBAAO;;;;;;;;;;;;;AAKrD;GApCgB;;QACc,gMAAQ;;;KADtB"}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":["file:///Users/dre/Developer/brasena/Brasena/apps/web/src/components/features/shop/TopNav.tsx"],"sourcesContent":["\"use client\"\n\nimport Link from \"next/link\"\nimport { ChevronLeft, ShoppingBag } from \"lucide-react\"\nimport { ThemeToggle } from \"@/components/ui/ThemeToggle\"\nimport { ROUTES } from \"@/config\"\nimport { useLanguage } from \"@/lib/context/language\"\nimport { useAuth } from \"@/lib/hooks/useAuth\"\nimport { useCartStore } from \"@/store/cart.store\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface TopNavProps {\n  greeting?: boolean\n  title?: string\n  backHref?: string\n  showCart?: boolean\n  showThemeToggle?: boolean\n}\n\nfunction getGreetingKey(): \"nav.greetingMorning\" | \"nav.greetingAfternoon\" | \"nav.greetingEvening\" {\n  const h = new Date().getHours()\n  if (h < 12) return \"nav.greetingMorning\"\n  if (h < 18) return \"nav.greetingAfternoon\"\n  return \"nav.greetingEvening\"\n}\n\nexport function TopNav({\n  greeting = false,\n  title,\n  backHref,\n  showCart = true,\n  showThemeToggle = false,\n}: TopNavProps): JSX.Element {\n  const { language, setLanguage, t } = useLanguage()\n  const { profile } = useAuth()\n  const itemCount = useCartStore((s) => s.itemCount())\n\n  const name = profile?.full_name?.trim() || \"there\"\n  const greetingKey = getGreetingKey()\n\n  return (\n    <header\n      className=\"sticky top-0 z-40 border-b flex items-center justify-between\"\n      style={{\n        background: \"var(--nav-bg)\",\n        backdropFilter: \"blur(16px)\",\n        borderColor: \"var(--border-lt)\",\n        padding: \"46px 20px 12px\",\n      }}\n    >\n      <div className=\"flex min-w-0 flex-1 items-center gap-3\">\n        {backHref ? (\n          <>\n            <Link\n              href={backHref}\n              className=\"flex shrink-0 items-center justify-center text-[var(--text3)] hover:text-[var(--sage)] min-h-[44px] min-w-[44px]\"\n              aria-label={t(\"common.back\")}\n            >\n              <ChevronLeft className=\"h-6 w-6\" strokeWidth={2} />\n            </Link>\n            {title && (\n              <span className=\"font-display font-semibold text-xl truncate\" style={{ color: \"var(--text-primary)\" }}>\n                {title}\n              </span>\n            )}\n          </>\n        ) : greeting ? (\n          <div className=\"min-w-0\">\n            <p className=\"text-[11px] truncate\" style={{ color: \"var(--text3)\" }}>\n              {t(greetingKey)}, {name}\n            </p>\n            <p className=\"font-display font-bold text-lg tracking-[0.12em] truncate\" style={{ color: \"var(--sage)\" }}>\n              BRASENA\n            </p>\n          </div>\n        ) : title ? (\n          <span className=\"font-display font-semibold text-xl truncate\" style={{ color: \"var(--text-primary)\" }}>\n            {title}\n          </span>\n        ) : (\n          <span className=\"font-display font-bold tracking-[0.12em]\" style={{ color: \"var(--sage)\" }}>\n            BRASENA\n          </span>\n        )}\n      </div>\n\n      <div className=\"flex shrink-0 items-center gap-3\">\n        <div\n          className=\"flex rounded-[20px] border p-0.5 gap-0.5\"\n          style={{ borderColor: \"var(--border)\", background: \"var(--card)\" }}\n          role=\"group\"\n          aria-label=\"Language\"\n        >\n          <button\n            type=\"button\"\n            onClick={() => setLanguage(\"en\")}\n            className={cn(\n              \"rounded-2xl px-2.5 py-1 text-[11px] font-semibold tracking-wide min-h-[44px] min-w-[44px] flex items-center justify-center transition-all\",\n              language === \"en\" ? \"bg-[var(--sage)] text-[var(--color-brand-black)]\" : \"bg-transparent hover:opacity-80\"\n            )}\n            style={language !== \"en\" ? { color: \"var(--text3)\" } : undefined}\n          >\n            EN\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => setLanguage(\"es\")}\n            className={cn(\n              \"rounded-2xl px-2.5 py-1 text-[11px] font-semibold tracking-wide min-h-[44px] min-w-[44px] flex items-center justify-center transition-all\",\n              language === \"es\" ? \"bg-[var(--sage)] text-[var(--color-brand-black)]\" : \"bg-transparent hover:opacity-80\"\n            )}\n            style={language !== \"es\" ? { color: \"var(--text3)\" } : undefined}\n          >\n            ES\n          </button>\n        </div>\n\n        {showThemeToggle && <ThemeToggle />}\n        {showCart && (\n          <Link\n            href={ROUTES.CART}\n            className=\"relative flex items-center justify-center min-h-[44px] min-w-[44px] rounded-[10px] border\"\n            style={{ background: \"var(--card)\", borderColor: \"var(--border)\" }}\n            aria-label={t(\"nav.cart\")}\n          >\n            <ShoppingBag className=\"h-5 w-5\" style={{ color: \"var(--text-secondary)\" }} strokeWidth={1.8} />\n            {itemCount > 0 && (\n              <span\n                className=\"absolute -top-0.5 -right-0.5 min-w-[18px] h-[18px] rounded-full flex items-center justify-center text-[10px] font-bold px-1\"\n                style={{ background: \"var(--sage)\", color: \"var(--color-brand-black)\" }}\n              >\n                {itemCount > 99 ? \"99+\" : itemCount}\n              </span>\n            )}\n          </Link>\n        )}\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 977, "column": 0}, "map": {"version":3,"sources":["file:///Users/dre/Developer/brasena/Brasena/apps/web/src/components/features/shop/index.ts"],"sourcesContent":["export { BottomNav } from \"./BottomNav\"\nexport { TopNav } from \"./TopNav\"\nexport type { TopNavProps } from \"./TopNav\"\n"],"names":[],"mappings":";;AAAA;AACA"}},
    {"offset": {"line": 991, "column": 0}, "map": {"version":3,"sources":["file:///Users/dre/Developer/brasena/Brasena/apps/web/src/app/%28shop%29/home/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport Link from \"next/link\"\nimport {\n  Flame,\n  LayoutGrid,\n  Beef,\n  UtensilsCrossed,\n  Bird,\n  ChevronRight,\n  Tag,\n  Package,\n} from \"lucide-react\"\nimport { ROUTES } from \"@/config\"\nimport { useLanguage } from \"@/lib/context/language\"\nimport {\n  useFeaturedProduct,\n  useProducts,\n  useActivePromotion,\n  type ProductWithTiers,\n} from \"@/lib/hooks/useProducts\"\nimport { TopNav } from \"@/components/features/shop\"\nimport { BottomNav } from \"@/components/features/shop\"\nimport { cn } from \"@/lib/utils\"\n\nconst CATEGORIES = [\n  { id: \"All\", icon: LayoutGrid },\n  { id: \"Beef\", icon: Beef },\n  { id: \"Pork\", icon: UtensilsCrossed },\n  { id: \"Chicken\", icon: Bird },\n] as const\n\nfunction HeroSkeleton(): JSX.Element {\n  return (\n    <div\n      className=\"mx-4 mt-4 h-[180px] rounded-[22px] animate-pulse\"\n      style={{ background: \"var(--card2)\" }}\n    />\n  )\n}\n\nfunction ProductCardSkeleton(): JSX.Element {\n  return (\n    <div\n      className=\"h-[220px] w-[155px] shrink-0 rounded-[18px] animate-pulse\"\n      style={{ background: \"var(--card2)\" }}\n    />\n  )\n}\n\nfunction CategoryIcon({ category }: { category: string }): JSX.Element {\n  const C = CATEGORIES.find((c) => c.id === category)?.icon ?? Package\n  return <C className=\"h-8 w-8\" style={{ color: \"var(--text3)\" }} strokeWidth={1.5} />\n}\n\nexport default function ShopHomePage(): JSX.Element {\n  const { t, language } = useLanguage()\n  const [category, setCategory] = useState<string>(\"All\")\n  const { data: featured, isLoading: loadingFeatured } = useFeaturedProduct()\n  const { data: products, isLoading: loadingProducts } = useProducts(category === \"All\" ? undefined : category)\n  const { data: promotion } = useActivePromotion()\n\n  const heroEyebrow = language === \"es\" ? t(\"shop.heroOferta\") : t(\"shop.heroEyebrow\")\n  const shopNow = language === \"es\" ? t(\"shop.comprarAhora\") : t(\"shop.shopNow\")\n  const categoriesLabel = language === \"es\" ? t(\"shop.categorias\") : t(\"shop.categories\")\n  const seeAll = language === \"es\" ? t(\"shop.verTodo\") : t(\"shop.seeAll\")\n  const popularLabel = t(\"shop.popular\")\n  const viewMore = language === \"es\" ? t(\"shop.verMas\") : t(\"shop.viewMore\")\n  const saveLabel = language === \"es\" ? t(\"shop.save\") : t(\"shop.save\")\n\n  return (\n    <>\n      <TopNav greeting showCart showThemeToggle />\n\n      <main className=\"flex-1 overflow-y-auto overflow-x-hidden\" style={{ scrollbarWidth: \"none\" }}>\n        {/* Hero */}\n        <section className=\"px-4 pt-2\">\n          {loadingFeatured ? (\n            <HeroSkeleton />\n          ) : featured ? (\n            <div\n              className=\"relative rounded-[22px] p-6 overflow-hidden border\"\n              style={{\n                background: \"var(--hero-bg)\",\n                borderColor: \"var(--hero-border)\",\n              }}\n            >\n              {(() => {\n                const tiers = featured.weight_tiers\n                const maxTier = tiers.length ? tiers[tiers.length - 1] : null\n                const savings =\n                  maxTier && \"savings_amount\" in maxTier && maxTier.savings_amount\n                    ? (maxTier.savings_amount / 100).toFixed(0)\n                    : \"0\"\n                const weightRange =\n                  tiers.length >= 2\n                    ? `${tiers[0].weight_lbs}lb – ${tiers[tiers.length - 1].weight_lbs}lb`\n                    : tiers[0]\n                      ? `${tiers[0].weight_lbs}lb`\n                      : \"\"\n                return (\n                  <>\n                    <div className=\"flex items-center gap-1.5 text-[10px] font-semibold uppercase tracking-widest mb-2\" style={{ color: \"var(--gold-lt)\" }}>\n                      <Flame className=\"h-3.5 w-3.5\" strokeWidth={2} />\n                      {heroEyebrow}\n                    </div>\n                    <h2 className=\"font-display text-2xl font-bold leading-tight\" style={{ color: \"var(--text-primary)\" }}>\n                      {language === \"es\" ? t(\"shop.heroTitle1\") : t(\"shop.heroTitle1\")}\n                      <br />\n                      <span style={{ color: \"var(--sage)\" }}>{language === \"es\" ? t(\"shop.heroTitle2\") : t(\"shop.heroTitle2\")}</span>\n                    </h2>\n                    <p className=\"text-xs mt-1.5 mb-4\" style={{ color: \"var(--text3)\" }}>\n                      {featured.name} {weightRange && `· ${weightRange} bags`}\n                    </p>\n                    <Link\n                      href={ROUTES.PRODUCT(featured.slug)}\n                      className=\"btn-primary inline-flex items-center gap-1.5 text-sm px-4 py-2.5 rounded-xl min-h-[44px]\"\n                    >\n                      {shopNow}\n                      <ChevronRight className=\"h-4 w-4\" strokeWidth={2.5} />\n                    </Link>\n                    <div\n                      className=\"absolute top-3 right-3 text-xs font-mono font-semibold px-2 py-1 rounded-lg\"\n                      style={{ background: \"var(--gold-bg)\", color: \"var(--gold-lt)\" }}\n                    >\n                      {saveLabel} ${savings}\n                    </div>\n                  </>\n                )\n              })()}\n            </div>\n          ) : (\n            <div\n              className=\"rounded-[22px] p-6 border\"\n              style={{ background: \"var(--card)\", borderColor: \"var(--hero-border)\" }}\n            >\n              <p className=\"font-display text-lg font-semibold\" style={{ color: \"var(--text-primary)\" }}>\n                {t(\"shop.heroTitle1\")} {t(\"shop.heroTitle2\")}\n              </p>\n              <p className=\"text-sm mt-1\" style={{ color: \"var(--text3)\" }}>\n                No featured product yet.\n              </p>\n            </div>\n          )}\n        </section>\n\n        {/* Daily special strip */}\n        {promotion && (\n          <section className=\"mx-4 mt-4 rounded-xl border p-4 flex items-center gap-3\" style={{ background: \"var(--gold-bg)\", borderColor: \"var(--gold-border)\" }}>\n            <div className=\"w-10 h-10 rounded-lg flex items-center justify-center shrink-0\" style={{ background: \"var(--card)\" }}>\n              <Tag className=\"h-5 w-5\" style={{ color: \"var(--gold-lt)\" }} strokeWidth={1.8} />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm truncate\" style={{ color: \"var(--text-primary)\" }}>\n                {promotion.description}\n              </p>\n              <span className=\"font-mono text-xs px-2 py-0.5 rounded\" style={{ background: \"var(--card)\", color: \"var(--gold-lt)\" }}>\n                {promotion.code}\n              </span>\n            </div>\n            <Link href=\"#\" className=\"text-xs font-medium shrink-0 min-h-[44px] flex items-center\" style={{ color: \"var(--sage)\" }}>\n              {t(\"shop.promoView\")}\n            </Link>\n          </section>\n        )}\n\n        {/* Categories */}\n        <section className=\"mt-6 px-4\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"font-display text-lg font-semibold\" style={{ color: \"var(--text-primary)\" }}>\n              {categoriesLabel}\n            </h3>\n            <Link href={ROUTES.CATEGORIES} className=\"text-xs\" style={{ color: \"var(--sage)\" }}>\n              {seeAll}\n            </Link>\n          </div>\n          <div className=\"flex gap-2.5 overflow-x-auto pb-1\" style={{ scrollbarWidth: \"none\" }}>\n            {CATEGORIES.map((cat) => {\n              const Icon = cat.icon\n              const active = category === cat.id\n              return (\n                <button\n                  key={cat.id}\n                  type=\"button\"\n                  onClick={() => setCategory(cat.id)}\n                  className={cn(\n                    \"shrink-0 flex items-center gap-2 rounded-full border px-4 py-2.5 min-h-[44px] transition-all\",\n                    active ? \"border-[var(--sage)]\" : \"border-[var(--border)]\"\n                  )}\n                  style={{\n                    background: active ? \"var(--sage-bg)\" : \"var(--card)\",\n                    color: active ? \"var(--sage)\" : \"var(--text-secondary)\",\n                  }}\n                >\n                  <Icon className=\"h-4 w-4\" strokeWidth={1.8} />\n                  <span className=\"text-sm font-medium\">{cat.id}</span>\n                </button>\n              )\n            })}\n          </div>\n        </section>\n\n        {/* Products */}\n        <section className=\"mt-4 px-4 pb-6\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h3 className=\"font-display text-lg font-semibold\" style={{ color: \"var(--text-primary)\" }}>\n              {popularLabel}\n            </h3>\n            <Link href={ROUTES.CATEGORIES} className=\"text-xs\" style={{ color: \"var(--sage)\" }}>\n              {viewMore}\n            </Link>\n          </div>\n          <div className=\"flex gap-3 overflow-x-auto pb-2\" style={{ scrollbarWidth: \"none\" }}>\n            {loadingProducts ? (\n              <>\n                <ProductCardSkeleton />\n                <ProductCardSkeleton />\n                <ProductCardSkeleton />\n              </>\n            ) : (\n              (products ?? []).map((product) => (\n                <ProductCard key={product.id} product={product} saveLabel={saveLabel} />\n              ))\n            )}\n          </div>\n        </section>\n      </main>\n\n      <BottomNav />\n    </>\n  )\n}\n\nfunction ProductCard({ product, saveLabel }: { product: ProductWithTiers; saveLabel: string }): JSX.Element {\n  const tiers = product.weight_tiers ?? []\n  const cheapest = tiers[0]\n  const pricePerLb = cheapest ? (cheapest.price_per_lb / 100).toFixed(2) : \"0.00\"\n  const maxTier = tiers.length ? tiers[tiers.length - 1] : null\n  const savingsPercent =\n    maxTier && \"savings_percent\" in maxTier && typeof maxTier.savings_percent === \"number\" && maxTier.savings_percent > 0\n      ? Math.round(maxTier.savings_percent)\n      : 0\n  const weightRange = tiers.length >= 2 ? `10lb – ${tiers[tiers.length - 1].weight_lbs}lb` : tiers[0] ? `${tiers[0].weight_lbs}lb` : \"\"\n\n  return (\n    <Link\n      href={ROUTES.PRODUCT(product.slug)}\n      className=\"w-[155px] shrink-0 rounded-[18px] border overflow-hidden transition-all hover:border-[var(--sage)]/30\"\n      style={{ borderColor: \"var(--border)\", background: \"var(--card)\" }}\n    >\n      <div\n        className=\"h-[110px] flex items-center justify-center relative\"\n        style={{ background: \"var(--thumb-bg)\" }}\n      >\n        <CategoryIcon category={product.category} />\n        {savingsPercent > 0 && (\n          <span\n            className=\"absolute top-2 right-2 text-[10px] font-semibold px-1.5 py-0.5 rounded\"\n            style={{ background: \"var(--sage-bg-lt)\", color: \"var(--sage)\" }}\n          >\n            -{savingsPercent}%\n          </span>\n        )}\n      </div>\n      <div className=\"p-3\">\n        <h4 className=\"font-semibold text-xs leading-tight line-clamp-2\" style={{ color: \"var(--text-primary)\" }}>\n          {product.name}\n        </h4>\n        <p className=\"text-[11px] mt-0.5\" style={{ color: \"var(--text3)\" }}>\n          {weightRange} bags\n        </p>\n        <p className=\"font-mono text-sm font-medium mt-1\" style={{ color: \"var(--sage)\" }}>\n          ${pricePerLb}\n          <span className=\"text-[11px] font-normal ml-0.5\" style={{ color: \"var(--text3)\" }}>\n            /lb\n          </span>\n        </p>\n      </div>\n    </Link>\n  )\n}\n\n"],"names":[],"mappings":"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"}}]
}